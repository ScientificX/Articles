%!PS-Adobe-2.0
%%Creator: dvips 5.514 Copyright 1986, 1993 Radical Eye Software
%%Title: state.dvi
%%CreationDate: Thu Mar 10 13:17:08 1994
%%Pages: 17
%%PageOrder: Ascend
%%BoundingBox: 0 0 596 842
%%EndComments
%DVIPSCommandLine: /usr/local/tex/bin/sun4/dvips state.dvi
%DVIPSSource:  TeX output 1994.03.10:1302
%%BeginProcSet: tex.pro
/TeXDict 250 dict def TeXDict begin /N{def}def /B{bind def}N /S{exch}N
/X{S N}B /TR{translate}N /isls false N /vsize 11 72 mul N /@rigin{isls{[
0 -1 1 0 0 0]concat}if 72 Resolution div 72 VResolution div neg scale
isls{Resolution hsize -72 div mul 0 TR}if Resolution VResolution vsize
-72 div 1 add mul TR matrix currentmatrix dup dup 4 get round 4 exch put
dup dup 5 get round 5 exch put setmatrix}N /@landscape{/isls true N}B
/@manualfeed{statusdict /manualfeed true put}B /@copies{/#copies X}B
/FMat[1 0 0 -1 0 0]N /FBB[0 0 0 0]N /nn 0 N /IE 0 N /ctr 0 N /df-tail{
/nn 8 dict N nn begin /FontType 3 N /FontMatrix fntrx N /FontBBox FBB N
string /base X array /BitMaps X /BuildChar{CharBuilder}N /Encoding IE N
end dup{/foo setfont}2 array copy cvx N load 0 nn put /ctr 0 N[}B /df{
/sf 1 N /fntrx FMat N df-tail}B /dfs{div /sf X /fntrx[sf 0 0 sf neg 0 0]
N df-tail}B /E{pop nn dup definefont setfont}B /ch-width{ch-data dup
length 5 sub get}B /ch-height{ch-data dup length 4 sub get}B /ch-xoff{
128 ch-data dup length 3 sub get sub}B /ch-yoff{ch-data dup length 2 sub
get 127 sub}B /ch-dx{ch-data dup length 1 sub get}B /ch-image{ch-data
dup type /stringtype ne{ctr get /ctr ctr 1 add N}if}B /id 0 N /rw 0 N
/rc 0 N /gp 0 N /cp 0 N /G 0 N /sf 0 N /CharBuilder{save 3 1 roll S dup
/base get 2 index get S /BitMaps get S get /ch-data X pop /ctr 0 N ch-dx
0 ch-xoff ch-yoff ch-height sub ch-xoff ch-width add ch-yoff
setcachedevice ch-width ch-height true[1 0 0 -1 -.1 ch-xoff sub ch-yoff
.1 add]{ch-image}imagemask restore}B /D{/cc X dup type /stringtype ne{]}
if nn /base get cc ctr put nn /BitMaps get S ctr S sf 1 ne{dup dup
length 1 sub dup 2 index S get sf div put}if put /ctr ctr 1 add N}B /I{
cc 1 add D}B /bop{userdict /bop-hook known{bop-hook}if /SI save N @rigin
0 0 moveto /V matrix currentmatrix dup 1 get dup mul exch 0 get dup mul
add .99 lt{/QV}{/RV}ifelse load def pop pop}N /eop{SI restore showpage
userdict /eop-hook known{eop-hook}if}N /@start{userdict /start-hook
known{start-hook}if pop /VResolution X /Resolution X 1000 div /DVImag X
/IE 256 array N 0 1 255{IE S 1 string dup 0 3 index put cvn put}for
65781.76 div /vsize X 65781.76 div /hsize X}N /p{show}N /RMat[1 0 0 -1 0
0]N /BDot 260 string N /rulex 0 N /ruley 0 N /v{/ruley X /rulex X V}B /V
{}B /RV statusdict begin /product where{pop product dup length 7 ge{0 7
getinterval dup(Display)eq exch 0 4 getinterval(NeXT)eq or}{pop false}
ifelse}{false}ifelse end{{gsave TR -.1 -.1 TR 1 1 scale rulex ruley
false RMat{BDot}imagemask grestore}}{{gsave TR -.1 -.1 TR rulex ruley
scale 1 1 false RMat{BDot}imagemask grestore}}ifelse B /QV{gsave
transform round exch round exch itransform moveto rulex 0 rlineto 0
ruley neg rlineto rulex neg 0 rlineto fill grestore}B /a{moveto}B /delta
0 N /tail{dup /delta X 0 rmoveto}B /M{S p delta add tail}B /b{S p tail}
B /c{-4 M}B /d{-3 M}B /e{-2 M}B /f{-1 M}B /g{0 M}B /h{1 M}B /i{2 M}B /j{
3 M}B /k{4 M}B /w{0 rmoveto}B /l{p -4 w}B /m{p -3 w}B /n{p -2 w}B /o{p
-1 w}B /q{p 1 w}B /r{p 2 w}B /s{p 3 w}B /t{p 4 w}B /x{0 S rmoveto}B /y{
3 2 roll p a}B /bos{/SS save N}B /eos{SS restore}B end
%%EndProcSet
%%BeginProcSet: special.pro
TeXDict begin /SDict 200 dict N SDict begin /@SpecialDefaults{/hs 612 N
/vs 792 N /ho 0 N /vo 0 N /hsc 1 N /vsc 1 N /ang 0 N /CLIP 0 N /rwiSeen
false N /rhiSeen false N /letter{}N /note{}N /a4{}N /legal{}N}B
/@scaleunit 100 N /@hscale{@scaleunit div /hsc X}B /@vscale{@scaleunit
div /vsc X}B /@hsize{/hs X /CLIP 1 N}B /@vsize{/vs X /CLIP 1 N}B /@clip{
/CLIP 2 N}B /@hoffset{/ho X}B /@voffset{/vo X}B /@angle{/ang X}B /@rwi{
10 div /rwi X /rwiSeen true N}B /@rhi{10 div /rhi X /rhiSeen true N}B
/@llx{/llx X}B /@lly{/lly X}B /@urx{/urx X}B /@ury{/ury X}B /magscale
true def end /@MacSetUp{userdict /md known{userdict /md get type
/dicttype eq{userdict begin md length 10 add md maxlength ge{/md md dup
length 20 add dict copy def}if end md begin /letter{}N /note{}N /legal{}
N /od{txpose 1 0 mtx defaultmatrix dtransform S atan/pa X newpath
clippath mark{transform{itransform moveto}}{transform{itransform lineto}
}{6 -2 roll transform 6 -2 roll transform 6 -2 roll transform{
itransform 6 2 roll itransform 6 2 roll itransform 6 2 roll curveto}}{{
closepath}}pathforall newpath counttomark array astore /gc xdf pop ct 39
0 put 10 fz 0 fs 2 F/|______Courier fnt invertflag{PaintBlack}if}N
/txpose{pxs pys scale ppr aload pop por{noflips{pop S neg S TR pop 1 -1
scale}if xflip yflip and{pop S neg S TR 180 rotate 1 -1 scale ppr 3 get
ppr 1 get neg sub neg ppr 2 get ppr 0 get neg sub neg TR}if xflip yflip
not and{pop S neg S TR pop 180 rotate ppr 3 get ppr 1 get neg sub neg 0
TR}if yflip xflip not and{ppr 1 get neg ppr 0 get neg TR}if}{noflips{TR
pop pop 270 rotate 1 -1 scale}if xflip yflip and{TR pop pop 90 rotate 1
-1 scale ppr 3 get ppr 1 get neg sub neg ppr 2 get ppr 0 get neg sub neg
TR}if xflip yflip not and{TR pop pop 90 rotate ppr 3 get ppr 1 get neg
sub neg 0 TR}if yflip xflip not and{TR pop pop 270 rotate ppr 2 get ppr
0 get neg sub neg 0 S TR}if}ifelse scaleby96{ppr aload pop 4 -1 roll add
2 div 3 1 roll add 2 div 2 copy TR .96 dup scale neg S neg S TR}if}N /cp
{pop pop showpage pm restore}N end}if}if}N /normalscale{Resolution 72
div VResolution 72 div neg scale magscale{DVImag dup scale}if 0 setgray}
N /psfts{S 65781.76 div N}N /startTexFig{/psf$SavedState save N userdict
maxlength dict begin /magscale false def normalscale currentpoint TR
/psf$ury psfts /psf$urx psfts /psf$lly psfts /psf$llx psfts /psf$y psfts
/psf$x psfts currentpoint /psf$cy X /psf$cx X /psf$sx psf$x psf$urx
psf$llx sub div N /psf$sy psf$y psf$ury psf$lly sub div N psf$sx psf$sy
scale psf$cx psf$sx div psf$llx sub psf$cy psf$sy div psf$ury sub TR
/showpage{}N /erasepage{}N /copypage{}N /p 3 def @MacSetUp}N /doclip{
psf$llx psf$lly psf$urx psf$ury currentpoint 6 2 roll newpath 4 copy 4 2
roll moveto 6 -1 roll S lineto S lineto S lineto closepath clip newpath
moveto}N /endTexFig{end psf$SavedState restore}N /@beginspecial{SDict
begin /SpecialSave save N gsave normalscale currentpoint TR
@SpecialDefaults count /ocount X /dcount countdictstack N}N /@setspecial
{CLIP 1 eq{newpath 0 0 moveto hs 0 rlineto 0 vs rlineto hs neg 0 rlineto
closepath clip}if ho vo TR hsc vsc scale ang rotate rwiSeen{rwi urx llx
sub div rhiSeen{rhi ury lly sub div}{dup}ifelse scale llx neg lly neg TR
}{rhiSeen{rhi ury lly sub div dup scale llx neg lly neg TR}if}ifelse
CLIP 2 eq{newpath llx lly moveto urx lly lineto urx ury lineto llx ury
lineto closepath clip}if /showpage{}N /erasepage{}N /copypage{}N newpath
}N /@endspecial{count ocount sub{pop}repeat countdictstack dcount sub{
end}repeat grestore SpecialSave restore end}N /@defspecial{SDict begin}
N /@fedspecial{end}B /li{lineto}B /rl{rlineto}B /rc{rcurveto}B /np{
/SaveX currentpoint /SaveY X N 1 setlinecap newpath}N /st{stroke SaveX
SaveY moveto}N /fil{fill SaveX SaveY moveto}N /ellipse{/endangle X
/startangle X /yrad X /xrad X /savematrix matrix currentmatrix N TR xrad
yrad scale 0 0 1 startangle endangle arc savematrix setmatrix}N end
%%EndProcSet
TeXDict begin 39158280 55380996 1000 300 300
(/tmp_mnt/users/fp/simonpj/docs/papers/state/state.dvi)
@start /Fa 53 122 df<0008001000200040008001800300030006000E000C001C0018
00180038003000300070007000600060006000E000E000E000E000E000C000C000C000E0
00E000600060006000600030003000100008000C0004000D2A7B9E10>40
D<0100008000C00040006000200030003000300018001800180018001800180018001800
18001800380038003800300030007000700060006000E000C000C0018001800300030006
000400080018003000600080000D2A809E10>I<387878380808101020204080050C7D83
0C>44 D<7FF0FFE00C027F890E>I<00000400000C000018000018000030000030000060
0000600000C00000C0000180000300000300000600000600000C00000C00001800001800
00300000300000600000600000C00000C0000180000180000300000300000600000C0000
0C0000180000180000300000300000600000600000C00000C0000080000016297F9E15>
47 D<00F800038E000606000C03000C0300180380380380380380300380700380700380
700380700380E00700E00700E00700E00700E00700E00600E00E00C00E00C00E00C00C00
C01C00C0180060300060600030C0001F0000111D7C9B15>I<0018003003F00C70007000
70007000E000E000E000E000E000E001C001C001C001C001C001C0038003800380038003
80038007000780FFF80D1C7C9B15>I<007E000183800201C00400E00400E00F00E00F00
E01F00E01F00E00E00E00001E00001C0000380000380000700000E00001C000038000060
0000C0000180000300800600800801001001003FFF007FFE00FFFE00131C7E9B15>I<00
7C000187000203800403800F03C00F03C00F03C00E0380000380000700000600000C0000
380003F000001C00000E00000E00000F00000F00000F00700F00F80F00F80F00F00E00E0
1E00801C004038003070000F8000121D7D9B15>I<003E0000C100018080030380060780
0C07801C070018000038000030000071F000761800780C00E80E00F00600F00600E00700
E00700E00700E00E00C00E00C00E00C00E00C01C00E0180060380060300030C0000F8000
111D7C9B15>54 D<007C000183000201800601800C00C00C00C00C00C01C01801C01801F
03000F86000FCC0007F00003F80003FC000C7E00183F00301F00600700600700C00300C0
0300C00300C00200C006006004006008003830000FC000121D7D9B15>56
D<00F8000304000606000C03001C03003803003803803003807003807003807003807003
80700780700700700F00300F0018170008270007CE00000E00000C00001C00601800F038
00F03000E0600080C0004380003E0000111D7C9B15>I<00002000000030000000700000
00F0000000F0000001F0000001F800000278000002780000047800000478000008780000
083C0000103C0000103C0000203C0000203C0000403E0000401E0000FFFE0000801E0001
001E0001001F0002000F0002000F0004000F000C000F001E000F80FF807FF01C1D7F9C1F
>65 D<07FFFE0000F8078000F001C000F001E000F000E000F000F000F000F001E000E001
E001E001E001C001E003C001E0078001E01E0003FFFC0003C00F0003C0078003C003C003
C003C003C003C0078003C0078003C0078003C0078003C00780078007800F000F001E000F
003C00FFFFE0001C1C7F9B1D>I<0007F010001C0C300070026000C001E0038000E00700
00E00E0000600E0000601C0000403C00004038000040780000007800000078000000F000
0000F0000000F0000000F0000000F0000000F0000080F000010070000100700001003800
0200380004001C0004000C001800060020000380C000007F00001C1E7C9C1E>I<0FFFFC
0000F8078000F001C000F000E000F0007000F0007000F0007801E0003801E0003801E000
3801E0003801E0003C01E0003803C0003803C0007803C0007803C0007803C0007003C000
F0078000E0078000E0078001C0078003800780078007800E000F001C000F007000FFFFC0
001E1C7E9B20>I<07FFFFE000F801E000F000E000F0004000F0004000F0004000F00040
01E0004001E0204001E0200001E0200001E0600001E0E00003FFC00003C0C00003C04000
03C0400003C0400003C04080078000800780008007800100078001000780030007800600
0F000E000F003E00FFFFFC001B1C7E9B1C>I<07FFFFC000F803C000F001C000F0008000
F0008000F0008000F0008001E0008001E0208001E0200001E0200001E0600001E0E00003
FFC00003C0C00003C0400003C0400003C0400003C0400007800000078000000780000007
80000007800000078000000F0000000F800000FFF800001A1C7E9B1B>I<0007F010001C
0C300070026000C001E0038000E0070000E00E0000600E0000601C0000403C0000403800
0040780000007800000078000000F0000000F0000000F0000000F000FFF0F0000F80F000
0780F0000F0070000F0070000F0038000F0038000F001C001F000C001E00060066000381
8200007E00001C1E7C9C21>I<07FF00F800F000F000F000F000F001E001E001E001E001
E001E003C003C003C003C003C003C00780078007800780078007800F000F80FFF0101C7F
9B0F>73 D<07FFC000F80000F00000F00000F00000F00000F00001E00001E00001E00001
E00001E00001E00003C00003C00003C00003C00003C00003C00407800407800407800407
80080780080780180F00380F00F0FFFFF0161C7E9B1A>76 D<07F80007FC00F8000FC000
BC000F8000BC00178000BC00178000BC00278000BC002780011E004F00011E004F00011E
008F00011E008F00011E010F00010F010F00020F021E00020F021E00020F041E00020F04
1E000207881E000207901E000407903C000407A03C000407A03C000407C03C000403C03C
000403803C000C038078001E03007C00FF8307FF80261C7E9B26>I<07F800FF8000F800
3C0000BC00180000BC001000009E001000009F001000008F001000010F80200001078020
000107C020000103C020000103E020000101E020000200F040000200F040000200784000
020078400002003C400002003C400004001E800004001F800004000F800004000F800004
0007800004000780000C000300001E00010000FF80010000211C7F9B1F>I<0007F00000
381C0000E00E0001C0030003800380070001C00E0001C01E0001E01C0000E03C0000E038
0000E0780000F0780000F0780000F0F00001E0F00001E0F00001E0F00001E0F00003C0F0
0003C0F00003C0700007807000070078000F0038001E003C001C001C0038000E00E00003
83800000FE00001C1E7C9C20>I<07FFFC0000F80F0000F0038000F003C000F001C000F0
01C000F001C001E003C001E003C001E003C001E0038001E0070001E00E0003C03C0003FF
E00003C0000003C0000003C0000003C00000078000000780000007800000078000000780
0000078000000F0000000F800000FFF000001A1C7E9B1C>I<0FFFF80000F80E0000F007
8000F003C000F001C000F001E000F001E001E003C001E003C001E0038001E0070001E00E
0001E03C0003FFE00003C0780003C01C0003C01E0003C00E0003C00F0007801E0007801E
0007801E0007801E0007801E0007801E080F001E100F801E10FFF00E20000003C01D1D7E
9B1F>82 D<003F0400C0CC0180380300380600180E00180E00180E00181E00101E00001F
00000F80000FF80007FF0003FF8001FFC0003FE00003E00001E00000E00000E04000E040
00E04000E04000C06001C0E00180F00300CC0E0083F800161E7E9C17>I<1FFFFFF03C07
C0F03007803020078020600780204007802040078020400F0020800F0020000F0000000F
0000000F0000000F0000001E0000001E0000001E0000001E0000001E0000001E0000003C
0000003C0000003C0000003C0000003C0000003C000000780000007C00001FFFE0001C1C
7C9B1E>I<FFF01FF01F0007801E0003001E0002001E0002001E0002001E0002003C0004
003C0004003C0004003C0004003C0004003C000400780008007800080078000800780008
007800080078000800F0001000F000100070001000700020007000200038004000380080
001C0100000E0E000001F000001C1D7A9B1F>I<FFE1FFC0FF801F003E003E000F001E00
18000F001E0018000F001E0010000F001E0030000F001E0020000F003E0060000F802F00
400007804F00C00007804F00800007808F01800007808F01000007810F01000007C10782
000003C20782000003C20784000003C60784000003C40788000003CC0788000003C807D0
000001F803D0000001F003E0000001F003E0000001E003C0000001E003C0000001C00380
000000C001800000008001000000291D7B9B2B>87 D<FFE007F81F8001C00F0001800F80
01000780020007C0040003C00C0003C0080003E0100001E0200001F0600000F0400000F8
800000F90000007B0000007E0000003C0000003C00000038000000780000007800000078
000000780000007800000070000000F0000000F800000FFF00001D1C7B9B1F>89
D<07F0001C18001E0C001C0E00180E00000E00000E0001FE000F0E001C1C00301C00701C
00E01C40E01C40E03C40E05C80709D803F0E0012127D9115>97 D<3F00000F00000E0000
0E00000E00000E00000E00000E00001C00001C00001C00001C7C001D87001E01803C0180
3801C03800C03800E03800E03800E07001C07001C07001C0700380700300700600F00C00
CC380083E000131D7C9C17>I<00FE000307000E07801C07003806003800007000007000
00700000E00000E00000E000006000007002007004003008001C300007C00011127E9112
>I<0001F80000780000700000700000700000700000700000700000E00000E00000E000
F8E00386E00601E00C01C01801C03801C07001C07001C07001C0E00380E00380E0038060
0380700380300780300F001C378007C7E0151D7E9C17>I<01F8070C0C06180738033003
70037FFF7000E000E000E00060006002700430081C3007C010127E9112>I<000F800039
C00061C000E3C001C18001C00001C00001C0000380000380000380003FF8000380000380
000700000700000700000700000700000700000E00000E00000E00000E00000E00000E00
001C00001E0000FFC000121D7F9C0D>I<000038007CCC01871C0303080703800E03800E
03800E03800E03800E0700060600070C0009F0000800001800001800001FFE000FFF800F
FFC03001C06000C06000E0C000C0C000C0600180200300180E0007F000161C809215>I<
07E00001E00001C00001C00001C00001C00001C00001C000038000038000038000038F80
03B0C003C0E00780E00780E00700E00700E00700E00700E00E01C00E01C00E01C00E01C0
0E01C00E01C01C03801E03C0FF9FF0141D7F9C17>I<00C001C001C00180000000000000
00000000000000001F80078003800700070007000700070007000E000E000E000E000E00
0E001C001E00FF800A1D7F9C0C>I<07E00001E00001C00001C00001C00001C00001C000
01C0000380000380000380000381FC0380E00380C0070100070200070800071000073000
07F8000F38000E3C000E1C000E1E000E0E000E0F001C07001C0F80FF9FE0161D7F9C16>
107 D<07E001E001C001C001C001C001C001C00380038003800380038003800700070007
000700070007000E000E000E000E000E000E001C001E00FF800B1D7F9C0C>I<1F8FC0FC
00079061060003E076070007807807000780780700070070070007007007000700700700
07007007000E00E00E000E00E00E000E00E00E000E00E00E000E00E00E000E00E00E001C
01C01C001E01E01E00FF8FF8FF8021127F9124>I<1F8F8007B0C003C0E00780E00780E0
0700E00700E00700E00700E00E01C00E01C00E01C00E01C00E01C00E01C01C03801E03C0
FF9FF014127F9117>I<00FC000307000E01801C01C03800C03000C07000E07000E07000
E0E001C0E001C0E001C0600180600380700700380E001C180007E00013127E9115>I<0F
C7C003D87001E03803C01803801C03800C03800E03800E03800E07001C07001C07001C07
00380700300700600F00C00EC3800E3E000E00000E00000E00001C00001C00001C00001C
0000FF8000171A809117>I<1F9C07EE03CF078E078C07000700070007000E000E000E00
0E000E000E001C001E00FFC010127F9110>114 D<03F20C0E18061004300438043E001F
E00FF007F8003C401C400C400C6018E010D0608FC00F127F9110>I<0200020002000600
06000C001C003C00FFE01C001C0038003800380038003800380070007040704070407040
7080708031001E000B1A7C9910>I<FC1F803C07801C0380380700380700380700380700
380700380700700E00700E00700E00700E00701E00701E00703C00305E001F9F8011127C
9117>I<FF07E03C03803C03001C02001C02001C04001C08000E08000E10000E10000E20
000F200007400007C00007800007000003000002000013127C9116>I<FF3FC7E03C0F03
80380E0100380E03003C1F02001C1706001C3704001C270C001C6308001C4318001EC390
000E83B0000F83A0000F03E0000F01C0000E01C0000E018000040180001B127C911E>I<
0FF07E03C03803C03001C02001C02001C04001C08000E08000E10000E10000E20000F200
007400007C00007800007000003000002000002000004000004000708000F10000F30000
E60000780000171A809116>121 D E /Fb 2 64 df<040E0E1C1C1C38383070706060C0
C0070F7F8F0A>48 D<00400000C00000C00000C00000C00000C00000C00000C00000C000
00C00000C00000C00000C00000C00000C00000C00000C00000C000FFFFE0FFFFE013147D
931A>63 D E /Fc 4 99 df<0000700001F00003C0000780000E00001C00003800007000
00700000F00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E000
00E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E000
00E00000E00000E00000E00000E00000E00000E00000E00001C00001C00001C000038000
0700000600000E0000380000700000C000007000003800000E0000060000070000038000
01C00001C00001C00000E00000E00000E00000E00000E00000E00000E00000E00000E000
00E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E000
00E00000E00000E00000E00000E00000E00000E00000E00000E00000F000007000007000
003800001C00000E000007800003C00001F000007014637B811F>26
D<FFFFFFFFC0FFFFFFFFC01F00003E000F00003C000F00003C000F00003C000F00003C00
0F00003C000F00003C000F00003C000F00003C000F00003C000F00003C000F00003C000F
00003C000F00003C000F00003C000F00003C000F00003C000F00003C000F00003C000F00
003C000F00003C000F00003C000F00003C000F00003C000F00003C000F00003C000F0000
3C000F00003C000F00003C000F00003C000F00003C000F00003C000F00003C000F00003C
000F00003C000F00003C000F00003C001F80007E00FFF003FFC0FFF003FFC0222A7E7F27
>81 D<E000001CE000001CE000001CE000001CE000001CE000001CE000001CE000001CE0
00001CE000001CE000001CE000001CE000001CE000001CE000001CE000001CE000001CE0
00001CE000001CE000001CE000001CE000001CE000001CE000001CE000001CE000001CE0
00001CE000001CE000001CE000001CE000001C700000387000003838000070380000701C
0000E01E0001E00F8007C007E01F8001FFFE00007FF800001FE0001E2A7E7F23>83
D<00300000FC0001CE000703801C00E0300030C0000C1607809E17>98
D E /Fd 9 119 df<3FF87FF8C200820006000600040004000C000C000C00180018000D
0D7E8C0F>28 D<001000100020002000200020004001F0064C18463082208360836083C1
064106610C611832700FC0020002000400040004000400101A7E9314>30
D<07B00C7010703060606060606060C0C0C0C8C0C841C862D03C700D0D7E8C12>97
D<06070600000000384C4C8C98181830323264643808147F930C>105
D<30F87C00590C86004E0D06009C0E0600980C0600180C0600180C060030180C0030180C
8030181880301818806030190060300E00190D7F8C1D>109 D<30F8590C4E0C9C0C980C
180C180C30183019303130316032601C100D7F8C15>I<31E05A704C709C609800180018
003000300030003000600060000C0D7F8C0F>114 D<0700188019C0318038001E000F00
03804180E180C10082007C000A0D7E8C10>I<38104C184C108C10981018101810302030
203040304018800F000D0D7F8C11>118 D E /Fe 32 122 df<60F0F06004047B830D>
46 D<000080000180000300000300000300000600000600000600000C00000C00001800
00180000180000300000300000600000600000600000C00000C000018000018000018000
0300000300000300000600000600000C00000C00000C0000180000180000300000300000
300000600000600000600000C00000C0000011297D9E17>I<030007003F00C700070007
000700070007000700070007000700070007000700070007000700070007000700070007
00070007000F80FFF80D1C7B9B17>49 D<07E000183800200C00400E00400700F00780F8
0780F80380F80380700380000780000700000700000E00000C00001C0000380000700000
C0000180000300000200800400800800801001003FFF007FFF00FFFF00111C7D9B17>I<
07E000083800300C00200E00780F00780700780F00380F00000E00000E00001C00001800
00700007E000003800001C00000E00000700000780000780700780F80780F80780F80780
F00700400E00201C0018380007E000111D7D9B17>I<000C00000C00001C00003C00003C
00005C0000DC00009C00011C00031C00021C00041C000C1C00081C00101C00301C00201C
00401C00C01C00FFFFE0001C00001C00001C00001C00001C00001C00001C0001FFC0131C
7E9B17>I<00F8000306000602000C0700180F00380F00300600700000700000600000E3
E000E41800E80C00F00600F00700F00300E00380E00380E00380E0038060038060038070
0380700300300700180600180C000C180003E000111D7D9B17>54
D<0003000000030000000300000007800000078000000FC000000BC000000BC0000011E0
000011E0000031F0000020F0000020F00000407800004078000040780000803C0000803C
0001003E0001FFFE0001001E0002000F0002000F0002000F0004000780040007800C0007
C01E0007C0FF803FFC1E1D7E9C22>65 D<000FE0200070186001C00460030003E0060001
E00E0000E01C00006038000060380000207800002070000020F0000000F0000000F00000
00F0000000F0000000F0000000F0000000F0000000700000207800002038000020380000
201C0000400E000040060000800300010001C0060000701800000FE0001B1E7D9C21>67
D<FFF00F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F
000F000F000F000F000F000F000F000F000F00FFF00C1C7D9B11>73
D<FF80003FE00F80003E000F80003E000BC0005E000BC0005E0009E0009E0009E0009E00
09E0009E0008F0011E0008F0011E000878021E000878021E000878021E00083C041E0008
3C041E00081E081E00081E081E00081E081E00080F101E00080F101E000807A01E000807
A01E000807A01E000803C01E000803C01E000801801E001C01801E00FF8181FFE0231C7D
9B29>77 D<001FC00000F0780001800C00070007000E0003801C0001C01C0001C0380000
E0780000F0780000F070000070F0000078F0000078F0000078F0000078F0000078F00000
78F0000078F0000078780000F0780000F0780000F03C0001E01C0001C01E0003C00E0003
800700070003C01E0000F07800001FC0001D1E7D9C23>79 D<FFFFC0000F0078000F001C
000F000E000F0007000F0007800F0007800F0007800F0007800F0007800F0007000F000E
000F001C000F0078000FFFC0000F0000000F0000000F0000000F0000000F0000000F0000
000F0000000F0000000F0000000F0000000F0000000F000000FFF00000191C7D9B1F>I<
03F0400C0CC01002C03001C06000C0E000C0E00040E00040E00040F00000F800007E0000
7FE0003FFC001FFF0007FF80007F800007C00003E00001E00000E08000E08000E08000E0
C000C0C000C0E00180D00300CE060081F800131E7D9C19>83 D<7FFFFFC0700F01C0600F
00C0400F0040400F0040C00F0020800F0020800F0020800F0020000F0000000F0000000F
0000000F0000000F0000000F0000000F0000000F0000000F0000000F0000000F0000000F
0000000F0000000F0000000F0000000F0000000F0000001F800003FFFC001B1C7D9B21>
I<00200000700000700000700000B80000B80000B800011C00011C00031E00020E00020E
0004070007FF000407000803800803801803C01801C03801C0FC07F815157F9419>97
D<FFFC001C07001C03801C03C01C03C01C03C01C03C01C03801C07801FFF001FFF001C03
801C03C01C01E01C01E01C01E01C01E01C01C01C03C01C0780FFFE0013157F9418>I<00
FC200782600E01E01C00E0380060780020700020F00020F00000F00000F00000F00000F0
0000F000207000207800203800401C00400E008007830000FC0013157E9419>I<FFFC00
1C07001C01C01C00E01C00E01C00701C00701C00781C00781C00781C00781C00781C0078
1C00781C00701C00701C00E01C00E01C01C01C0700FFFC0015157F941A>I<FFFF801C03
801C00801C00801C00401C00401C08401C08001C08001C18001FF8001C18001C08001C08
201C08201C00201C00601C00401C00C01C01C0FFFFC013157F9417>I<FFFF801C03801C
00801C00801C00401C00401C08401C08001C08001C18001FF8001C18001C08001C08001C
08001C00001C00001C00001C00001C0000FFC00012157F9416>I<00FC200782600E01E0
1C00E0380060780020700020F00020F00000F00000F00000F00FF8F000E0F000E07000E0
7800E03800E01C00E00E00E007836000FC2015157E941B>I<FF8FF81C01C01C01C01C01
C01C01C01C01C01C01C01C01C01C01C01C01C01FFFC01C01C01C01C01C01C01C01C01C01
C01C01C01C01C01C01C01C01C0FF8FF815157F9419>I<FF801C001C001C001C001C001C
001C001C001C001C001C001C001C001C001C001C001C001C001C00FF8009157F940D>I<
FE000FE01E000F00170017001700170017001700138027001380270011C0470011C04700
11C0470010E0870010E08700107107001071070010710700103A0700103A0700101C0700
101C0700381C0700FE083FE01B157F941F>109 D<FC03F81E00E01E0040170040138040
13C04011C04010E040107040107040103840101C40101C40100E401007401007C01003C0
1001C01000C03800C0FE004015157F9419>I<01F800070E000C03001C03803801C07801
E07000E0F000F0F000F0F000F0F000F0F000F0F000F0F000F07000E07801E03801C01C03
801E0780070E0001F80014157E941A>I<FFF8001C0E001C07801C03801C03C01C03C01C
03C01C03801C07801C0E001FF8001C1C001C0E001C07001C07001C07001C07801C07841C
07C41C03CCFF80F816157F9419>114 D<1F1030F06030C030C010C010E000E0007E003F
C01FE003F0007800380018801880188010C030F0608F800D157E9413>I<7FFFF0607030
407010407010807008807008807008007000007000007000007000007000007000007000
00700000700000700000700000700000700007FF0015157F9419>I<FF83F81C00E01C00
401C00401C00401C00401C00401C00401C00401C00401C00401C00401C00401C00401C00
401C00400C00C00E008006010003860000FC0015157F9419>I<FF80FE1E00380E00200F
006007004003808003C08001C10001E20000E200007400007C0000380000380000380000
380000380000380000380000380001FF001715809419>121 D E
/Ff 20 122 df<0180038006000C0018003800300070007000E000E000E000E000E000E0
00E000700070003000380018000C0006000380018009197B9612>40
D<80C06030181C0C0E0E070707070707070E0E0C1C183060C08008197C9612>I<60F0F8
78183030E0C00509798312>44 D<FFFEFFFE7FFE0000000000007FFEFFFEFFFE0F097F8E
12>61 D<4000E000F0007C003E000F8007C001E000F8007800F801E007C00F803E007C00
F000E00040000D137E9312>I<038007C007C006C006C00EE00EE00EE00EE00C601C701C
701C701FF01FF0383838383838FC7EFC7E0F147F9312>65 D<FFE0FFE00E000E000E000E
000E000E000E000E000E000E000E000E000E000E000E000E00FFE0FFE00B147D9312>73
D<1FC0003FF000383800101C00001C0007FC003FFC00781C00E01C00E01C00E01C00703C
003FFF801FCF80110E7F8D12>97 D<F800F80038003800380038003BE03FF03C38381C38
0C380E380E380E380E380C381C3C383FF01BC00F147F9312>I<07F01FF8383870106000
E000E000E000E0006000703838381FF007E00D0E7E8D12>I<07801FE0387070706038E0
38FFF8FFF8E0006000703838381FF007C00D0E7E8D12>101 D<06000F000F0006000000
000000007F007F000700070007000700070007000700070007000700FFF0FFF00C157D94
12>105 D<FF00FF00070007000700070007000700070007000700070007000700070007
0007000700FFF8FFF80D147E9312>108 D<F9E0FFF03E383C3838383838383838383838
383838383838FE3EFE3E0F0E7F8D12>110 D<0F803FE038E07070E038E038E038E038E0
38F078707038E03FE00F800D0E7E8D12>I<1FF03FF06070C070E0007F003FE00FF00078
6018E018F030FFE0DFC00D0E7E8D12>115 D<06000E000E000E007FF8FFF80E000E000E
000E000E000E000E000E1C0E1C0E1C07F801E00E127F9112>I<FC7EFC7E383838381C70
1C701C700EE00EE00EE00EE007C007C003800F0E7F8D12>118 D<7C7C7C7C1CF00EE00F
C007C00380078007C00EE01EF01C70FC7EFC7E0F0E7F8D12>120
D<FC7EFC7E38381C381C701C700E700E600EE006E006E007C003C003C003800380038077
007F007E0038000F157F8D12>I E /Fg 54 123 df<07800001C00001E00000E00000E0
0000F000007000007000007800003800003800003C00001C00001C00001E00000E00001E
00003F0000670000C7000187800303800603800E03C01C01C03801C07001E0E000E0C000
F0141D7E9C18>21 D<0FFFF81FFFF83FFFF8608400418400810400010400030C00030C00
020C00060C00060C000E0C000C0C001C0E001C0E00380E0018060015127E9118>25
D<001E0000718000C0C00180C00380C00300E00700E00700E00E01C00E01C00E01C00E01
801C03801C03001C06001E0C003A180039E0003800003800007000007000007000007000
00E00000E00000C00000131B7F9115>I<01FFF803FFF80FFFF81E1E00180E0038060070
0600700600E00E00E00E00E00E00E00C00E01C00E01800E0300060600030C0001F000015
127E9118>I<0FFFE01FFFE03FFFE060C00040C000808000008000018000018000018000
0300000300000300000700000700000700000E000006000013127E9112>I<0001000002
00000200000200000200000400000400000400000400000800000800007E0001C9800710
E00C1060181070381030702030702030E02070E02070E04070E040E0E040E06041C06083
803086001C9C0007E0000100000100000100000100000200000200000200000200001425
7E9C19>30 D<1E3E60C0C0C0C0C0603E1E070B7E930C>44 D<60F0F06004047C830C>58
D<60F0F0701010101020204080040C7C830C>I<00010003000600060006000C000C000C
0018001800180030003000300060006000C000C000C00180018001800300030003000600
06000C000C000C00180018001800300030003000600060006000C000C00010297E9E15>
61 D<00000C0000000C0000001C0000001C0000003C0000005C0000005C0000009E0000
008E0000010E0000020E0000020E0000040E0000040E0000080E0000100E0000100E0000
200700003FFF000040070000800700008007000100070001000700020007000400070004
0007001C000780FF803FF01C1D7F9C1F>65 D<01FFFF00003C01C0003800E0003800F000
3800700038007000700070007000F0007000F0007001E000E003C000E0078000E01F0000
FFFC0001C00F0001C0078001C003C001C003C0038003C0038003C0038003C0038003C007
0007800700070007000E0007001C000E007800FFFFC0001C1C7E9B1F>I<0001F808000E
061800380138006000F001C0007003800070070000300F0000200E0000201C0000203C00
00203C000000780000007800000078000000F0000000F0000000F0000000F0000000F000
0100F0000100F0000100700002007000020030000400380008001C0010000E0060000701
800000FE00001D1E7E9C1E>I<01FFFF80003C01E000380070003800380038003C003800
1C0070001C0070001E0070001E0070001E00E0001E00E0001E00E0001E00E0001E01C000
3C01C0003C01C0003C01C000380380007803800070038000F0038000E0070001C0070003
800700070007001C000E007800FFFFC0001F1C7E9B22>I<01FFFFF8003C007800380018
0038001000380010003800100070001000700010007008100070080000E0100000E01000
00E0300000FFF00001C0200001C0200001C0200001C02000038040400380004003800080
03800080070001000700010007000300070006000E003E00FFFFFC001D1C7E9B1F>I<01
FFFFF0003C00F00038003000380020003800200038002000700020007000200070082000
70080000E0100000E0100000E0300000FFF00001C0200001C0200001C0200001C0200003
804000038000000380000003800000070000000700000007000000070000000F000000FF
F000001C1C7E9B1B>I<0001F808000E061800380138006000F001C00070038000700700
00300F0000200E0000201C0000203C0000203C000000780000007800000078000000F000
0000F0000000F0007FF0F0000780F0000700F0000700F00007007000070070000E003000
0E0038000E001C001E000E0064000701840000FE00001D1E7E9C21>I<01FFC0003C0000
380000380000380000380000700000700000700000700000E00000E00000E00000E00001
C00001C00001C00001C0000380000380000380000380000700000700000700000700000F
0000FFE000121C7E9B12>73 D<01FFC07F80003C001E0000380018000038002000003800
40000038008000007002000000700400000070080000007010000000E040000000E0C000
0000E1E0000000E2E0000001C470000001D070000001E038000001C03800000380380000
03801C000003801C000003800E000007000E000007000E0000070007000007000700000F
00078000FFE03FF000211C7E9B23>75 D<01FFE0003C0000380000380000380000380000
700000700000700000700000E00000E00000E00000E00001C00001C00001C00001C00003
800203800203800203800407000407000C0700180700380E00F0FFFFF0171C7E9B1C>I<
01FE0000FF003E0000F0002E0001E0002E0002E0002E0002E0002E0004E0004E0009C000
4E0009C000470011C000470011C000870023800087004380008700438000870083800107
0107000107010700010382070001038207000203840E000203880E000203880E00020390
0E000403A01C000403A01C000401C01C000C01C01C001C01803C00FF8103FF80281C7E9B
28>I<01FC00FF80001C001C00002E001800002E001000002E0010000027001000004700
20000043002000004380200000438020000081C040000081C040000081C040000080E040
000100E08000010070800001007080000100708000020039000002003900000200390000
02001D000004001E000004000E000004000E00000C000E00001C00040000FF8004000021
1C7E9B21>I<0003F800000E0E000038038000E001C001C001C0038000E0070000E00F00
00F01E0000F01C0000F03C0000F03C0000F0780000F0780000F0780000F0F00001E0F000
01E0F00001E0F00003C0F00003C0F0000780F0000780F0000F0070000E0070001C003800
38003C0070001C01C0000707800001FC00001C1E7E9C20>I<01FFFF00003C03C0003800
E0003800F00038007000380070007000F0007000F0007000F0007000E000E001E000E003
C000E0070000E01E0001FFF00001C0000001C0000001C000000380000003800000038000
0003800000070000000700000007000000070000000F000000FFE000001C1C7E9B1B>I<
01FFFE00003C03C0003800E0003800F00038007000380070007000F0007000F0007000F0
007001E000E001C000E0078000E01E0000FFF00001C0380001C00C0001C00E0001C00E00
03800E0003800E0003800E0003800E0007001E0007001E0807001E0807001E100F000F10
FFE00F20000003C01D1D7E9B20>82 D<000FC100303300400F0080060180060300060300
0606000406000407000007000007800003F00001FF0000FFC0003FE00003E00000F00000
700000300000302000302000306000606000606000C0600080F00300CC060083F800181E
7E9C19>I<1FFFFFF01C03807030070030200700206007002040070020400E0020800E00
20800E0020000E0000001C0000001C0000001C0000001C00000038000000380000003800
00003800000070000000700000007000000070000000E0000000E0000000E0000000E000
0001E000007FFF00001C1C7F9B18>I<7FF03FE00F0007000E0006000E0004000E000400
0E0004001C0008001C0008001C0008001C00080038001000380010003800100038001000
70002000700020007000200070002000E0004000E0004000E0004000E0008000E0008000
E00100006002000060040000300800001830000007C000001B1D7D9B1C>I<FFC00FF01C
0003801C0003001C0002001C0002001C0004001C0008001E0008000E0010000E0030000E
0020000E0040000E0040000E0080000E0100000F01000007020000070400000704000007
08000007080000071000000720000003A0000003C0000003800000038000000300000003
0000001C1D7D9B18>I<FFC0FFC0FF3C001C003C1C001C00101C003C00101C003C00201C
005C00401C005C00401C009C00801C009C00801C011C01001C011C01001C021C02001C04
1C02001C041C04001C081C08001C081C08001C100E10001E100E10000E200E20000E200E
20000E400E40000E800EC0000E800E80000F000F00000F000F00000E000E00000E000E00
000C000C00000C000C0000281D7D9B27>I<01E3000717000C0F00180F00380E00300E00
700E00700E00E01C00E01C00E01C00E01C00E03880E03880E038806078803199001E0E00
11127E9116>97 D<3F00070007000E000E000E000E001C001C001C001C0039E03A303C18
38187018701C701C701CE038E038E038E030E070E060E0C061C023001E000E1D7E9C12>
I<0007E00000E00000E00001C00001C00001C00001C000038000038000038000038001E7
000717000C0F00180F00380E00300E00700E00700E00E01C00E01C00E01C00E01C00E038
80E03880E038806078803199001E0E00131D7E9C16>100 D<01F007080C081804380830
0870307FC0E000E000E000E000E000E0046008601030600F800E127E9113>I<0001E000
0630000E78000EF0001C60001C00001C00001C00001C0000380000380003FFC000380000
380000700000700000700000700000700000E00000E00000E00000E00000E00001C00001
C00001C00001C00001C000018000038000038000630000F30000F60000E4000078000015
257E9C14>I<0038C000C5C00183C00303C00703800603800E03800E03801C07001C0700
1C07001C07001C0E001C0E001C0E000C1E00047C00039C00001C00001C00003800603800
F03000F07000E0C0007F0000121A809114>I<0FC00001C00001C0000380000380000380
000380000700000700000700000700000E3E000EC3000F03800E03801E03801C03801C03
801C0380380700380700380700380E00700E20700E20701C20701C40E00C80600700131D
7E9C18>I<01C003C003C001800000000000000000000000001C00270047004700870087
000E000E001C001C001C003800388038807080710032001C000A1C7E9B0E>I<0FC00001
C00001C0000380000380000380000380000700000700000700000700000E07000E08800E
11C00E23C01C47801C83001D00001E00003FC00038E00038700038700070710070710070
7100707200E03200601C00121D7E9C16>107 D<1F800380038007000700070007000E00
0E000E000E001C001C001C001C0038003800380038007000700070007000E200E200E200
E40064003800091D7F9C0C>I<381F81F04E20C6184640E81C4680F01C8F00F01C8E00E0
1C0E00E01C0E00E01C1C01C0381C01C0381C01C0381C01C0703803807138038071380380
E1380380E2700700643003003820127E9124>I<3C1F004E61804681C04701C08F01C08E
01C00E01C00E01C01C03801C03801C03801C0700380710380710380E10380E2070064030
038014127E9119>I<00F800030C000E06001C0300180300300300700380700380E00700
E00700E00700E00E00E00E00E01C0060180060300030E0000F800011127E9114>I<0787
8009C86008D03008E03011C03011C03801C03801C0380380700380700380700380600700
E00700C00701800783000E86000E78000E00000E00001C00001C00001C00001C00003C00
00FF0000151A819115>I<01C206260C1E181E381C301C701C701CE038E038E038E038E0
70E070E07060F023E01CE000E000E001C001C001C001C003801FF00F1A7E9113>I<3C3C
4E424687470F8E1E8E0C0E000E001C001C001C001C003800380038003800700030001012
7E9113>I<01F0060C0C040C0E180C1C001F000FE00FF003F80038201C7018F018F01080
3060601F800F127E9113>I<00C001C001C001C00380038003800380FFF0070007000700
0E000E000E000E001C001C001C001C00382038203840384018800F000C1A80990F>I<1C
00C02701C04701C04701C08703808703800E03800E03801C07001C07001C07001C070018
0E20180E20180E201C1E200C264007C38013127E9118>I<1C0327074707470387018701
0E010E011C021C021C021C041804180818081C100C2007C010127E9114>I<1C00C08027
01C1C04701C1C04701C0C087038040870380400E0380400E0380401C0700801C0700801C
0700801C07010018060100180601001C0E02001C0F04000E13080003E1F0001A127E911E
>I<07878008C84010F0C020F1E020E3C040E18000E00000E00001C00001C00001C00001
C000638080F38080F38100E5810084C60078780013127E9118>I<1C00C02701C04701C0
4701C08703808703800E03800E03801C07001C07001C07001C0700180E00180E00180E00
1C1E000C3C0007DC00001C00001800603800F03000F06000E0C0004180003E0000121A7E
9114>I<038107C10FF6081C10080010002000400080010002000400080410043C1867F8
43F081E010127E9113>I E /Fh 42 122 df<00FCF807839C0E079C1C07081C07001C07
001C07001C07001C0700FFFFE01C07001C07001C07001C07001C07001C07001C07001C07
001C07001C07001C07001C07007F1FE01617809615>11 D<00FC000782000E07001C0700
1C02001C00001C00001C00001C0000FFFF001C07001C07001C07001C07001C07001C0700
1C07001C07001C07001C07001C07001C07007F1FC01217809614>I<60F0F0F0F0F06060
606060606060600000000060F0F06004177D960A>33 D<60C0F1E0F1E070E01020102020
402040408040800B0A7F9612>I<60F0F070101020204040040A7D960A>39
D<0102040C1818303070606060E0E0E0E0E0E0E0E0E0E060606070303018180C04020108
227D980E>I<8040203018180C0C0E060606070707070707070707070606060E0C0C1818
3020408008227E980E>I<60F0F070101020204040040A7D830A>44
D<FF80FF80090280870C>I<60F0F06004047D830A>I<60F0F06000000000000060F0F070
10102020404004147D8D0A>59 D<001000003800003800003800005C00005C00005C0000
8E00008E00008E0001070001070002038002038002038007FFC00401C00401C00800E008
00E01800F03800F0FE03FE17177F961A>65 D<FFFE001C03801C00E01C00601C00701C00
701C00701C00701C00E01C01C01FFF801FFFC01C00E01C00701C00301C00381C00381C00
381C00381C00701C00E01C01C0FFFF0015177F9619>I<FF83FE1C00701C00701C00701C
00701C00701C00701C00701C00701C00701C00701FFFF01C00701C00701C00701C00701C
00701C00701C00701C00701C00701C0070FF83FE17177F961A>72
D<FFE00E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E
000E000E000E000E00FFE00B177F960D>I<7FFFF8603818403808403808803804803804
803804003800003800003800003800003800003800003800003800003800003800003800
00380000380000380000380003FF8016177F9619>84 D<204020404080408081008100E1
C0F1E0F1E060C00B0A7B9612>92 D<3FC0706070302038003803F81E3830387038E039E0
39E07970FF1F1E100E7F8D12>97 D<F80000380000380000380000380000380000380000
38000038000039F0003E0C00380600380700380300380380380380380380380380380300
380700380600361C0021F00011177F9614>I<07F01838303870106000E000E000E000E0
00600070083008183007C00D0E7F8D10>I<003E00000E00000E00000E00000E00000E00
000E00000E00000E0007CE001C3E00300E00700E00600E00E00E00E00E00E00E00E00E00
600E00700E00301E00182E0007CF8011177F9614>I<0FC0186030307038E018FFF8E000
E000E000600070083010183007C00D0E7F8D10>I<03E006700E701C201C001C001C001C
001C00FF801C001C001C001C001C001C001C001C001C001C001C001C007F800C1780960B
>I<0F9E18E33060707070707070306018C02F80200060003FE03FF83FFC600EC006C006
C006600C38380FE010157F8D12>I<F80000380000380000380000380000380000380000
38000038000038F8003B1C003C0E00380E00380E00380E00380E00380E00380E00380E00
380E00380E00380E00FE3F8011177F9614>I<307878300000000000F838383838383838
3838383838FE07177F960A>I<0300078007800300000000000000000000001F80038003
8003800380038003800380038003800380038003800380038003804380E300E7007C0009
1D82960B>I<F80038003800380038003800380038003800383E38383830384038803980
3FC039E038E038F03878383C383CFE7F10177F9613>I<F8383838383838383838383838
383838383838383838FE07177F960A>I<F8F83E003B1CC7003C0F0380380E0380380E03
80380E0380380E0380380E0380380E0380380E0380380E0380380E0380380E0380FE3F8F
E01B0E7F8D1E>I<F8F8003B1C003C0E00380E00380E00380E00380E00380E00380E0038
0E00380E00380E00380E00FE3F80110E7F8D14>I<07C018303018600C600CE00EE00EE0
0EE00EE00E701C3018183007C00F0E7F8D12>I<F9F0003E1C0038060038070038030038
0380380380380380380380380300380700380E003E1C0039F00038000038000038000038
0000380000FE000011147F8D14>I<07C2001C2600381E00700E00600E00E00E00E00E00
E00E00E00E00600E00700E00301E001C2E0007CE00000E00000E00000E00000E00000E00
003F8011147F8D13>I<F9E03A703C703820380038003800380038003800380038003800
FF000C0E7F8D0E>I<1F4060C0C040C040E000FF007F801FC001E080608060C060E0C09F
000B0E7F8D0E>I<080008000800180018003800FFC03800380038003800380038003800
38403840384038401C800F000A147F930E>I<F83E00380E00380E00380E00380E00380E
00380E00380E00380E00380E00380E00381E001C2E0007CF80110E7F8D14>I<FE1F380E
3C0C1C081C080E100E100720072007E003C003C001800180100E7F8D13>I<FEFE7C3838
38383810383C101C3C201C4C201E4E600ECE400E87400787800703800703800303000201
00160E7F8D19>I<FE3F3C1C1C100E20074007C0038001C002E004F008701838383CFC7F
100E7F8D13>I<FE1F380E3C0C1C081C080E100E100720072007E003C003C00180018001
000100E200E200A400780010147F8D13>I E /Fi 5 54 df<1878981818181818181818
18181818FF08107D8F0F>49 D<1F00618040C08060C0600060006000C00180030006000C
00102020207FC0FFC00B107F8F0F>I<1F00218060C060C000C0008001001F0000800040
0060C060C060804060801F000B107F8F0F>I<01800180038005800D8019801180218041
80C180FFE001800180018001800FE00B107F8F0F>I<20C03F802E002000200020002F00
30802040006000600060C06080C061801F000B107F8F0F>I E /Fj
7 62 df<0F0030C0606060604020C030C030C030C030C030C030C030C030C03040206060
606030C00F000C137E9211>48 D<0C001C00EC000C000C000C000C000C000C000C000C00
0C000C000C000C000C000C000C00FFC00A137D9211>I<1F0060C06060F070F030603000
700070006000C001C00180020004000810101020207FE0FFE00C137E9211>I<0FC03070
7038703870380038003000E00FC0007000380018001C601CF01CF018E03860701FC00E13
7F9211>I<006000E000E00160026006600C600860106020606060C060FFFC0060006000
600060006003FC0E137F9211>I<60607FC07F8044004000400040004F0070C040E00060
00700070E070E070E06040E021C01F000C137E9211>I<7FFFE0FFFFF000000000000000
0000000000000000000000FFFFF07FFFE0140A7E8B19>61 D E /Fk
59 125 df<071C00071C00071C00071C00071C007FFF00FFFF80FFFF800E38000E38000E
38000E38000E38000E38000E3800FFFF80FFFF807FFF001C70001C70001C70001C70001C
700011177F9614>35 D<60F0F878181818303060C080050C789614>39
D<0180038006000C001C0018003800700070007000E000E000E000E000E000E000E000E0
00E000700070007000380018001C000C00060003800180091D799914>I<80C060303818
1C0E0E0E0707070707070707070E0E0E1C18383060C080081D7C9914>I<01C00001C000
01C00001C00001C00001C00001C000FFFF80FFFF80FFFF8001C00001C00001C00001C000
01C00001C00001C00011117F9314>43 D<70F8FCFC7C0C1830E0C0060A798414>I<FFFE
FFFEFFFE0F037E8C14>I<07C00FE01C7038383018701C701CE00EE00EE00EE00EE00EE0
0EE00EE00EE00E701C701C383838381C700FE007C00F177E9614>48
D<0300030007000F003F00F7004700070007000700070007000700070007000700070007
000700070007007FF07FF00C177C9614>I<0FC01FF03838701CE00EE00EE00E400E000E
001C001C00380030007000E001C0030006000C00180E300E7FFE7FFE0F177E9614>I<0F
C01FF03838701C701C201C001C0018003800700FE00FF00038001C000E000E400EE00EE0
0E701C78383FF00FC00F177E9614>I<70F8F8F87000000000000070F8F8F8700510798F
14>58 D<000E003E007C00F003E007C01F003E00F800F000F8003E001F0007C003E000F0
007C003E000E0F137E9414>60 D<FFFF80FFFF807FFF800000000000000000007FFF80FF
FF80FFFF8011097F8F14>I<4000E000F8007C001E000F8007C001F000F8003E001E003E
00F801F007C00F801E007C00F800E00040000F157E9514>I<01C00003E00003E0000360
000360000770000770000770000770000630000E38000E38000E38000E38001C1C001FFC
001FFC001C1C001C1C00380E00380E00FE3F80FE3F8011177F9614>65
D<FFF0FFFC381E380E3807380738073807380E381E3FFC3FFC381E380E38073807380738
073807380E381EFFFCFFF810177F9614>I<01F18007FF800E1F801C0780380780700380
700380700380E00000E00000E00000E00000E00000E00000E00000700380700380700380
3807001C07000E0E0007FC0001F00011177F9614>I<FFE000FFF800383C00381E00380E
003807003807003807003803803803803803803803803803803803803803803803803807
00380700380E00381E00383C00FFF800FFE00011177F9614>I<FFFF80FFFF8038038038
03803803803803803800003800003838003838003FF8003FF80038380038380038000038
0000380000380000380000380000380000FF0000FF000011177F9614>70
D<FFF8FFF807000700070007000700070007000700070007000700070007000700070007
00070007000700FFF8FFF80D177D9614>73 D<FC1F80FC1F807C1F007637007637007637
0076370077770077770073670073670073670073E70071C70071C7007007007007007007
00700700700700700700F80F80F80F8011177F9614>77 D<1FF07FFC783C701CE00EE00E
E00EE00EE00EE00EE00EE00EE00EE00EE00EE00EE00EE00EE00E701C783C7FFC1FF00F17
7E9614>79 D<FFE000FFF800383C00381C00380E00380E00380E00380E00381C00383C00
3FF8003FF000383800381C00381C00381C00381C00381C00381C80381DC0381DC0FE0F80
FE070012177F9614>82 D<0FCC1FFC307C603CE01CE01CE01CE00070007E003FE00FF001
F8001C001E000E600EE00EE00EF01CF838FFF0C7E00F177E9614>I<7FFF80FFFF80E1C3
80E1C380E1C380E1C38001C00001C00001C00001C00001C00001C00001C00001C00001C0
0001C00001C00001C00001C00001C00001C0000FF8000FF80011177F9614>I<FC1F80FC
1F80380E00380E00380E003C1E001C1C001C1C001C1C001C1C000E38000E38000E38000E
380006300007700007700007700003600003600003E00003E00001C00011177F9614>86
D<FC1F80FC1F8070070070070070070070070070070070070070070031C60033E6003BEE
003B6E003B6E003B6E003B6E003B6E001B6C001B6C001A2C001E3C001E3C001E3C001117
7F9614>I<FFE0FFE0E000E000E000E000E000E000E000E000E000E000E000E000E000E0
00E000E000E000E000E000E000E000E000E000E000E000FFE0FFE00B1D799914>91
D<C000E000E00070007000380038001C001C000E000E000700070003800380038001C001
C000E000E00070007000380038001C001C000E000E00060F1D7E9914>I<FFE0FFE000E0
00E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E0
00E000E000E000E000E000E0FFE0FFE00B1D7F9914>I<FFFEFFFEFFFE0F037E7E14>95
D<0818306060C0C0C0F0F87830050C799914>I<1FC0007FF000707800201800001C0000
1C0007FC001FFC003C1C00701C00E01C00E01C00E01C00707C003FFF800F8F8011107E8F
14>I<FC0000FC00001C00001C00001C00001C00001C00001CF8001DFE001F07001E0300
1C03801C01C01C01C01C01C01C01C01C01C01C01C01C03801E03001F0E001DFC000CF800
1217809614>I<03F80FFE1C0E380470006000E000E000E000E00060007000380E1C1E0F
FC03F00F107E8F14>I<007E00007E00000E00000E00000E00000E00000E0007CE000FFE
001C3E00301E00700E00E00E00E00E00E00E00E00E00E00E00E00E00700E00301E00383E
001FEFC007CFC012177F9614>I<07E00FF01C38301C700CE00EE00EFFFEFFFEE0006000
7000380E1C1E0FFC03F00F107E8F14>I<00FC01FE038E07040700070007007FFEFFFE07
0007000700070007000700070007000700070007000700FFF8FFF80F177F9614>I<07CF
001FFF80383B80301800701C00701C00701C003018003838003FF00037C0007000007000
003FF8001FFC003FFE00700F00E00380E00380E00380E003807007003C1E001FFC0007F0
0011197F8F14>I<FC0000FC00001C00001C00001C00001C00001C00001C78001DFE001F
86001E07001C07001C07001C07001C07001C07001C07001C07001C07001C07001C0700FF
8FE0FF8FE01317809614>I<06000F000F0006000000000000000000FF00FF0007000700
0700070007000700070007000700070007000700FFF8FFF80D187C9714>I<FC0000FC00
001C00001C00001C00001C00001C00001CFF801CFF801C1C001C38001C70001CE0001DC0
001FE0001FE0001E70001C38001C3C001C1C001C0E00FF1F80FF1F801117809614>107
D<FF80FF8003800380038003800380038003800380038003800380038003800380038003
80038003800380FFFEFFFE0F177E9614>I<FB8E00FFDF003CF3803CF38038E38038E380
38E38038E38038E38038E38038E38038E38038E38038E380FEFBE0FE79E01310808F14>
I<FC7800FDFE001F86001E07001C07001C07001C07001C07001C07001C07001C07001C07
001C07001C0700FF8FE0FF8FE01310808F14>I<07C01FF03C78701C701CE00EE00EE00E
E00EE00EE00E701C783C3C781FF007C00F107E8F14>I<FCF800FDFE001F07001E03001C
03801C01C01C01C01C01C01C01C01C01C01C01C01C03801E03001F0E001DFC001CF8001C
00001C00001C00001C00001C00001C0000FF8000FF80001218808F14>I<03E7000FF700
1C1F00300F00700F00E00700E00700E00700E00700E00700E00700700F00300F001C3F00
0FF70007C700000700000700000700000700000700000700003FE0003FE013187F8F14>
I<FE1F00FE7F800EE3800F81000F00000F00000E00000E00000E00000E00000E00000E00
000E00000E0000FFF000FFF00011107F8F14>I<0FD83FF86038C038C038F0007F803FF0
07F8001C6006E006F006F81CFFF8CFE00F107E8F14>I<06000E000E000E000E007FFCFF
FC0E000E000E000E000E000E000E000E000E0E0E0E0E0E0E1C07F801F00F157F9414>I<
FC3F00FC3F001C07001C07001C07001C07001C07001C07001C07001C07001C07001C0700
1C07001C1F000FFFE003E7E01310808F14>I<FE3F80FE3F803C1E001C1C001C1C001C1C
000E38000E38000E380006300007700007700007700003E00003E00003E00011107F8F14
>I<FE3F80FE3F80700700380E00380E00380E0039CE0039CE0039CE001B6C001A6C001A
6C001A6C001E7C001E7C000E380011107F8F14>I<7E3F007E3F001E3C000E7800077000
07E00003E00001C00003C00003E0000770000E78000E38001C1C00FE3F80FE3F8011107F
8F14>I<FE3F80FE3F801C0E001C1C001C1C000E1C000E38000E38000738000730000730
0003700003700003E00001E00001E00001C00001C00001C0000380007380007700007E00
003C000011187F8F14>I<3FFF7FFF700E701C7038007000E001C0038007000E001C0738
077007FFFFFFFF10107F8F14>I<E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0
E0E0E0E0E0E0E0031D789914>124 D E /Fl 60 125 df<038700038700038700038700
0387000387007FFFC0FFFFE0FFFFE0070E00070E00070E000E1C000E1C000E1C000E1C00
FFFFE0FFFFE07FFFC01C38001C38001C38001C38001C38001C380013197F9816>35
D<30787C3C1C1C1C1C3878F0E040060D789816>39 D<00E001E0038007000E001C001C00
38003800700070007000E000E000E000E000E000E000E000E000E0007000700070003800
38001C001C000E000700038001E000E00B217A9C16>I<C000E000700038001C000E000E
000700070003800380038001C001C001C001C001C001C001C001C001C003800380038007
0007000E000E001C0038007000E000C0000A217B9C16>I<00E00000E00000E00000E000
00E00000E00000E00000E000FFFFE0FFFFE0FFFFE000E00000E00000E00000E00000E000
00E00000E00000E00013137F9516>43 D<387C7E7E3E0E1E1C78F060070B798416>I<FF
FF80FFFF80FFFF8011037E8D16>I<70F8F8F8700505788416>I<03E0000FF8001FFC001E
3C00380E00780F00700700700700E00380E00380E00380E00380E00380E00380E00380E0
0380F00780700700700700780F003C1E001E3C001FFC000FF80003E00011197E9816>48
D<0300070007000F001F00FF00FF00E70007000700070007000700070007000700070007
000700070007000700FFF8FFF8FFF80D197B9816>I<07E0001FF8003FFC00783E00E007
00F00780F00380600380000380000380000700000700000E00001C0000380000700000E0
0001C0000380000F00001E03803803807FFF80FFFF807FFF8011197E9816>I<70F8F8F8
70000000000000000070F8F8F8700512789116>58 D<7FFFC0FFFFE0FFFFE00000000000
00000000000000000000FFFFE0FFFFE07FFFC0130B7F9116>61 D<C00000F00000FC0000
3E00000F800007C00001F00000F800003E00001F80000780001F80003E0000F80001F000
07C0000F80003E0000FC0000F00000C0000011157E9616>I<00E00001F00001F00001B0
0001B00003B80003B80003B800031800071C00071C00071C00071C00071C000E0E000E0E
000FFE000FFE001FFF001C07001C07001C07007E0FC0FF1FE07E0FC013197F9816>65
D<7FF800FFFE007FFF001C07001C07801C03801C03801C03801C03801C07001FFF001FFE
001FFE001C1F001C03801C03C01C01C01C01C01C01C01C01C01C03C01C07807FFF80FFFF
007FFC0012197F9816>I<01F18007FB800FFF801F0F803C0780380380700380700380F0
0000E00000E00000E00000E00000E00000E00000E00000F000007003807003803803803C
07001F0F000FFE0007FC0001F00011197E9816>I<7FF800FFFE007FFF001C0F001C0780
1C03C01C01C01C01C01C01E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E0
1C01C01C01C01C03C01C07801C0F807FFF00FFFE007FF8001319809816>I<7FFFC0FFFF
C07FFFC01C01C01C01C01C01C01C01C01C00001C00001C1C001C1C001FFC001FFC001FFC
001C1C001C1C001C00001C00E01C00E01C00E01C00E01C00E07FFFE0FFFFE07FFFE01319
7F9816>I<7FFFE0FFFFE07FFFE01C00E01C00E01C00E01C00E01C00001C00001C1C001C
1C001FFC001FFC001FFC001C1C001C1C001C00001C00001C00001C00001C00001C00007F
8000FFC0007F800013197F9816>I<7FFCFFFE7FFC038003800380038003800380038003
80038003800380038003800380038003800380038003807FFCFFFE7FFC0F197D9816>73
D<FC07E0FE0FE0FE0FE03A0B803B1B803B1B803B1B803B1B803B1B803BBB8039B38039B3
8039B38039B38039F38038E38038E380380380380380380380380380380380FE0FE0FE0F
E0FE0FE013197F9816>77 D<1FFC003FFE007FFF00780F00F00780E00380E00380E00380
E00380E00380E00380E00380E00380E00380E00380E00380E00380E00380E00380F00780
F00780780F007FFF003FFE001FFC0011197E9816>79 D<7FF000FFFC007FFE001C0F001C
07801C03801C03801C03801C03801C07801C0F001FFE001FFC001FFE001C0E001C07001C
07001C07001C07001C07101C07381C07387F03F0FF83F07F01E01519809816>82
D<07E3001FFF003FFF00781F00F00700E00700E00700E00000F000007800003F80001FF0
0007FC0000FE00000F00000700000380000380600380E00380E00700F80F00FFFE00FFFC
00C7F00011197E9816>I<7FFFE0FFFFE0FFFFE0E0E0E0E0E0E0E0E0E0E0E0E000E00000
E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000
E00000E00007FC000FFE0007FC0013197F9816>I<FE0FE0FE0FE0FE0FE03803803C0780
1C07001C07001C07001E0F000E0E000E0E000E0E000E0E00071C00071C00071C00071C00
03180003B80003B80003B80001B00001F00001F00000E00013197F9816>86
D<7E03F0FF07F87E03F03800E03800E03800E03800E01C01C01C01C01C01C01C71C01CF9
C01CF9C01CD9C01CD9C00CD9800CD9800CD9800DDD800D8D800D8D800D8D80078F00078F
000707001519809816>I<7FFF80FFFF80FFFF80E00700E00F00E01E00E01C00003C0000
780000700000F00001E00001C00003C0000780000700000F00001E03801C03803C038078
0380700380FFFF80FFFF80FFFF8011197E9816>90 D<FFF0FFF0FFF0E000E000E000E000
E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000
E000E000E000E000FFF0FFF0FFF00C20789C16>I<C00000E00000E00000700000700000
3800003800001C00001C00000E00000E000007000007000003800003800001C00001C000
00E00000E000007000007000003800003800001C00001C00000E00000E00000700000700
00038000038000018011207E9C16>I<FFF0FFF0FFF00070007000700070007000700070
007000700070007000700070007000700070007000700070007000700070007000700070
0070FFF0FFF0FFF00C207F9C16>I<FFFF80FFFF80FFFF8011037E7E16>95
D<081C3C7870E0E0E0E0F0F87830060D789B16>I<1FE0003FF0007FF800783C00300E00
000E00000E0003FE001FFE003E0E00700E00E00E00E00E00E00E00783E007FFFE03FE7E0
0F83E013127E9116>I<FC0000FC0000FC00001C00001C00001C00001C00001C7C001DFE
001FFF001F07801E03C01C01C01C00E01C00E01C00E01C00E01C00E01C00E01C01C01E03
C01F07801FFF001DFE000C780013197F9816>I<03F80FFC1FFE3C1E780C7000E000E000
E000E000E000F000700778073E0E1FFC0FF803F010127D9116>I<003F00003F00003F00
00070000070000070000070003C7000FF7001FFF003C1F00780F00700700E00700E00700
E00700E00700E00700E00700700F00780F003C1F001FFFE00FF7E007C7E013197F9816>
I<03F0000FFC001FFE003C0F00780700700380E00380FFFF80FFFF80FFFF80E00000E000
007003807803803E07801FFF0007FE0001F80011127E9116>I<001E00007F0001FF8001
C7800383000380000380007FFF00FFFF00FFFF0003800003800003800003800003800003
80000380000380000380000380000380000380007FFC00FFFE007FFC0011197F9816>I<
03E3C007F7E00FFFE01C1CC0380E00380E00380E00380E00380E001C1C000FF8001FF000
1BE0003800001800001FFC001FFF003FFF807003C0E000E0E000E0E000E0E000E07001C0
7C07C03FFF800FFE0003F800131C7F9116>I<FC0000FC0000FC00001C00001C00001C00
001C00001C78001DFC001FFE001F0F001E07001C07001C07001C07001C07001C07001C07
001C07001C07001C07001C0700FF8FE0FF9FE0FF8FE013197F9816>I<03000780078003
000000000000000000FF80FF80FF80038003800380038003800380038003800380038003
800380FFFCFFFEFFFC0F1A7C9916>I<7E0000FE00007E00000E00000E00000E00000E00
000E7FE00E7FE00E7FE00E0F000E1E000E3C000E78000EF0000FF0000FF8000FBC000F1E
000E0E000E07000E07807F87F0FFCFF07F87F01419809816>107
D<7FC000FFC0007FC00001C00001C00001C00001C00001C00001C00001C00001C00001C0
0001C00001C00001C00001C00001C00001C00001C00001C00001C00001C0007FFF00FFFF
807FFF0011197E9816>I<F9C380FFEFC0FFFFE03C78E03C78E03870E03870E03870E038
70E03870E03870E03870E03870E03870E03870E0FE7CF8FE7CF8FE7CF81512809116>I<
FC7800FDFC00FFFE001F0F001E07001C07001C07001C07001C07001C07001C07001C0700
1C07001C07001C0700FF8FE0FF9FE0FF8FE013127F9116>I<03E0000FF8001FFC003C1E
00780F00700700E00380E00380E00380E00380E00380F00780700700780F003C1E001FFC
000FF80003E00011127E9116>I<FC7C00FDFE00FFFF001F07801E03C01C01C01C00E01C
00E01C00E01C00E01C00E01C00E01C01C01E03C01F07801FFF001DFE001C78001C00001C
00001C00001C00001C00001C0000FF8000FF8000FF8000131B7F9116>I<03E3800FF380
1FFB803E0F80780780700780E00380E00380E00380E00380E00380E00380700780780780
3C1F801FFB800FF38003E380000380000380000380000380000380000380001FF0003FF8
001FF0151B7F9116>I<7F0FC0FF3FE07F7FE007F04007C0000780000780000700000700
000700000700000700000700000700000700007FFC00FFFC007FFC0013127F9116>I<0F
EC3FFC7FFCF03CE01CE01C70007F801FF007F8003C600EE00EF00EF81EFFFCFFF8C7E00F
127D9116>I<0300000700000700000700000700007FFF00FFFF00FFFF00070000070000
07000007000007000007000007000007010007038007038007038007870003FE0001FC00
00F80011177F9616>I<FC3F00FC3F00FC3F001C07001C07001C07001C07001C07001C07
001C07001C07001C07001C07001C07001C1F001FFFE00FF7E007C7E013127F9116>I<7F
1FC0FF9FE07F1FC01C07001C07000E0E000E0E000E0E00071C00071C00071C00071C0003
B80003B80003B80001F00001F00000E00013127F9116>I<FF1FE0FF1FE0FF1FE0380380
38038038038038038039F38039F38019F30019B30019B30019B3001DB7001D17001F1F00
0F1E000E0E0013127F9116>I<7F1FC07F3FC07F1FC00F1E00073C0003B80003F00001F0
0000E00001E00001F00003B800073C00071C000E0E007F1FC0FF3FE07F1FC013127F9116
>I<7F1FC0FF9FE07F1FC01C07000E07000E0E000E0E00070E00071C00071C00039C0003
9C0003980001B80001B80000F00000F00000F00000E00000E00000E00001C00079C0007B
C0007F80007F00003C0000131B7F9116>I<3FFFC07FFFC07FFFC0700780700F00701E00
003C0000780001F00003E0000780000F00001E01C03C01C07801C0FFFFC0FFFFC0FFFFC0
12127F9116>I<E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0
E0E0E00320779C16>124 D E /Fm 43 122 df<003FC1FE0001F03F818003C03E01C007
C07E03E00F807C03E00F807C03E00F807C01C00F807C00000F807C00000F807C00000F80
7C0000FFFFFFFFE0FFFFFFFFE00F807C03E00F807C03E00F807C03E00F807C03E00F807C
03E00F807C03E00F807C03E00F807C03E00F807C03E00F807C03E00F807C03E00F807C03
E00F807C03E00F807C03E07FE1FF0FFC7FE1FF0FFC261D809C28>14
D<78FCFCFCFC7806067D850D>46 D<00600001E0000FE000FFE000F3E00003E00003E000
03E00003E00003E00003E00003E00003E00003E00003E00003E00003E00003E00003E000
03E00003E00003E00003E00003E00003E0007FFF807FFF80111B7D9A18>49
D<07F8001FFE00383F80780FC0FC07C0FC07E0FC03E0FC03E07803E00007E00007C00007
C0000F80001F00001E0000380000700000E0000180600300600600600800E01FFFC03FFF
C07FFFC0FFFFC0FFFFC0131B7E9A18>I<07F8001FFE003C1F003C0F807C07C07E07C07C
07C03807C0000F80000F80001E00003C0003F800001E00000F800007C00007C00007E030
07E07807E0FC07E0FC07E0FC07C0780F80781F001FFE0007F800131B7E9A18>I<000180
000380000780000F80001F80003F80006F8000CF80008F80018F80030F80060F800C0F80
180F80300F80600F80C00F80FFFFF8FFFFF8000F80000F80000F80000F80000F80000F80
00FFF800FFF8151B7F9A18>I<3801803FFF003FFE003FFC003FF8003FC0003000003000
0030000030000031F800361E00380F803007800007C00007E00007E00007E07807E0F807
E0F807E0F807C0F007C0600F80381F001FFE0007F000131B7E9A18>I<007E0003FF0007
81800F03C01E07C03C07C07C0380780000780000F80000F8F800FB0E00FA0780FC0380FC
03C0F803E0F803E0F803E0F803E07803E07803E07803C03C03C03C07801E0F0007FE0003
F800131B7E9A18>I<6000007FFFE07FFFE07FFFC07FFF807FFF80E00300C00600C00C00
C0180000300000300000600000E00000E00001E00001C00003C00003C00003C00003C000
07C00007C00007C00007C00007C00007C000038000131C7D9B18>I<0003800000038000
0007C0000007C0000007C000000FE000000FE000001FF000001BF000003BF8000031F800
0031F8000060FC000060FC0000E0FE0000C07E0000C07E0001803F0001FFFF0003FFFF80
03001F8007001FC006000FC006000FC00C0007E00C0007E0FF803FFEFF803FFE1F1C7E9B
24>65 D<001FE02000FFF8E003F80FE007C003E00F8001E01F0000E03E0000E03E000060
7E0000607C000060FC000000FC000000FC000000FC000000FC000000FC000000FC000000
FC0000007C0000607E0000603E0000603E0000C01F0000C00F80018007C0030003F80E00
00FFFC00001FE0001B1C7D9B22>67 D<FFFFF800FFFFFF000FC01FC00FC007E00FC001F0
0FC001F80FC000F80FC000FC0FC0007C0FC0007C0FC0007E0FC0007E0FC0007E0FC0007E
0FC0007E0FC0007E0FC0007E0FC0007E0FC0007C0FC0007C0FC0007C0FC000F80FC000F8
0FC001F00FC007E00FC01FC0FFFFFF00FFFFF8001F1C7E9B25>I<FFFFFF00FFFFFF000F
C01F000FC007000FC003000FC003800FC003800FC0C1800FC0C1800FC0C1800FC1C0000F
C3C0000FFFC0000FFFC0000FC3C0000FC1C0000FC0C0000FC0C0600FC0C0600FC000E00F
C000C00FC000C00FC001C00FC001C00FC003C00FC00F80FFFFFF80FFFFFF801B1C7E9B1F
>I<FFFC3FFFFFFC3FFF0FC003F00FC003F00FC003F00FC003F00FC003F00FC003F00FC0
03F00FC003F00FC003F00FC003F00FFFFFF00FFFFFF00FC003F00FC003F00FC003F00FC0
03F00FC003F00FC003F00FC003F00FC003F00FC003F00FC003F00FC003F00FC003F0FFFC
3FFFFFFC3FFF201C7E9B25>72 D<FFFCFFFC0FC00FC00FC00FC00FC00FC00FC00FC00FC0
0FC00FC00FC00FC00FC00FC00FC00FC00FC00FC00FC00FC00FC00FC00FC0FFFCFFFC0E1C
7E9B12>I<FFFE00FFFE000FC0000FC0000FC0000FC0000FC0000FC0000FC0000FC0000F
C0000FC0000FC0000FC0000FC0000FC0000FC0000FC0030FC0030FC0030FC0070FC0070F
C0060FC00E0FC01E0FC07EFFFFFEFFFFFE181C7E9B1D>76 D<003FE00001F07C0003C01E
000F800F801F0007C01E0003C03E0003E07E0003F07C0001F07C0001F0FC0001F8FC0001
F8FC0001F8FC0001F8FC0001F8FC0001F8FC0001F8FC0001F87C0001F07E0003F07E0003
F03E0003E03F0007E01F0007C00F800F8003C01E0001F07C00003FE0001D1C7D9B24>79
D<FFFFF00000FFFFFE00000FC03F00000FC00F80000FC007C0000FC007E0000FC007E000
0FC007E0000FC007E0000FC007E0000FC007C0000FC00F80000FC03E00000FFFF000000F
C07C00000FC03E00000FC03F00000FC01F80000FC01F80000FC01F80000FC01F80000FC0
1F80000FC01F80000FC01F81800FC01F81800FC00FC180FFFC07C300FFFC01FE00211C7E
9B24>82 D<07F8201FFEE03C07E07801E07000E0F000E0F00060F00060F80000FE0000FF
E0007FFE003FFF003FFF800FFFC007FFE0007FE00003F00001F00000F0C000F0C000F0C0
00E0E000E0F001C0FC03C0EFFF0083FC00141C7D9B1B>I<7FFFFFE07FFFFFE0781F81E0
701F80E0601F8060E01F8070C01F8030C01F8030C01F8030C01F8030001F8000001F8000
001F8000001F8000001F8000001F8000001F8000001F8000001F8000001F8000001F8000
001F8000001F8000001F8000001F8000001F800007FFFE0007FFFE001C1C7E9B21>I<FF
FC03FFFFFC03FF0FC000300FC000300FC000300FC000300FC000300FC000300FC000300F
C000300FC000300FC000300FC000300FC000300FC000300FC000300FC000300FC000300F
C000300FC000300FC0003007C0003007C0006003E000E001F001C000FC0780007FFE0000
0FF800201C7E9B25>I<0FF8001C1E003E0F803E07803E07C01C07C00007C0007FC007E7
C01F07C03C07C07C07C0F807C0F807C0F807C0780BC03E13F80FE1F815127F9117>97
D<03FC000E0E001C1F003C1F00781F00780E00F80000F80000F80000F80000F80000F800
007800007801803C01801C03000E0E0003F80011127E9115>99 D<000FF0000FF00001F0
0001F00001F00001F00001F00001F00001F00001F00001F001F9F00F07F01C03F03C01F0
7801F07801F0F801F0F801F0F801F0F801F0F801F0F801F07801F07801F03C01F01C03F0
0F0FFE03F9FE171D7E9C1B>I<03FC000F07001C03803C01C07801C07801E0F801E0F801
E0FFFFE0F80000F80000F800007800007800603C00601E00C00F038001FC0013127F9116
>I<007F0001E38003C7C00787C00F87C00F83800F80000F80000F80000F80000F8000FF
F800FFF8000F80000F80000F80000F80000F80000F80000F80000F80000F80000F80000F
80000F80000F80000F80007FF0007FF000121D809C0F>I<03F0F00E1F383C0F38380730
7807807807807807807807803807003C0F001E1C0033F0003000003000003000003FFF00
3FFFC01FFFE01FFFF07801F8F00078F00078F000787000707800F01E03C007FF00151B7F
9118>I<FF0000FF00001F00001F00001F00001F00001F00001F00001F00001F00001F00
001F0FC01F31E01F40F01F80F81F80F81F00F81F00F81F00F81F00F81F00F81F00F81F00
F81F00F81F00F81F00F81F00F8FFE7FFFFE7FF181D7F9C1B>I<1E003F003F003F003F00
1E000000000000000000000000007F007F001F001F001F001F001F001F001F001F001F00
1F001F001F001F001F00FFC0FFC00A1E7F9D0E>I<FF0000FF00001F00001F00001F0000
1F00001F00001F00001F00001F00001F00001F03FC1F03FC1F01C01F03001F0E001F1C00
1F38001F78001FFC001FBE001F1F001F0F001F0F801F07C01F03E01F01E0FFE7FEFFE7FE
171D7F9C19>107 D<FF00FF001F001F001F001F001F001F001F001F001F001F001F001F
001F001F001F001F001F001F001F001F001F001F001F001F001F00FFE0FFE00B1D7F9C0E
>I<FF0FC07E00FF31E18F001F40F207801F80FC07C01F80FC07C01F00F807C01F00F807
C01F00F807C01F00F807C01F00F807C01F00F807C01F00F807C01F00F807C01F00F807C0
1F00F807C01F00F807C0FFE7FF3FF8FFE7FF3FF825127F9128>I<FF0FC0FF31E01F40F0
1F80F81F80F81F00F81F00F81F00F81F00F81F00F81F00F81F00F81F00F81F00F81F00F8
1F00F8FFE7FFFFE7FF18127F911B>I<01FC000F07801C01C03C01E07800F07800F0F800
F8F800F8F800F8F800F8F800F8F800F87800F07800F03C01E01E03C00F078001FC001512
7F9118>I<FF3F80FFE1E01F80F01F00781F007C1F003C1F003E1F003E1F003E1F003E1F
003E1F003E1F003C1F007C1F00781F80F01FC1E01F3F001F00001F00001F00001F00001F
00001F0000FFE000FFE000171A7F911B>I<03F0600F0CE01E07E03C03E07C03E07803E0
F803E0F803E0F803E0F803E0F803E0F803E07803E07C03E03C03E01C07E00E0FE003F3E0
0003E00003E00003E00003E00003E00003E0001FFC001FFC161A7E9119>I<FE3E00FE47
001E8F801E8F801E8F801F07001F00001F00001F00001F00001F00001F00001F00001F00
001F00001F0000FFE000FFE00011127F9114>I<1FD830786018E018E018F000FF807FE0
7FF01FF807FC007CC01CC01CE01CE018F830CFC00E127E9113>I<030003000300030007
0007000F000F003FFCFFFC1F001F001F001F001F001F001F001F001F001F0C1F0C1F0C1F
0C0F08079803F00E1A7F9913>I<FF07F8FF07F81F00F81F00F81F00F81F00F81F00F81F
00F81F00F81F00F81F00F81F00F81F00F81F00F81F01F80F01F80786FF01F8FF18127F91
1B>I<FFC1FCFFC1FC1F00601F80600F80C00F80C007C18007C18003E30003E30003F700
01F60001FE0000FC0000FC0000780000780000300016127F9119>I<FF8FF8FEFF8FF8FE
1F03E0301F03E0301F03E0300F87F0600F86F0600FC6F8E007CC78C007CC78C003FC7D80
03F83D8003F83F8001F01F0001F01F0000F01E0000E00E0000E00E001F127F9122>I<FF
C1FCFFC1FC1F00601F80600F80C00F80C007C18007C18003E30003E30003F70001F60001
FE0000FC0000FC00007800007800003000003000006000706000F8E000F8C000F9800073
00003E0000161A7F9119>121 D E /Fn 26 107 df<FFFFFF80FFFFFF8019027D8A20>0
D<60F0F06004047C8B0C>I<400020C000606000C03001801803000C0600060C00031800
01B00000E00000E00001B000031800060C000C06001803003001806000C0C00060400020
13147A9320>I<003F800000C46000030418000404040008040200100401002004008020
0400804004004040040040800400208004002080040020FFFFFFE0800400208004002080
040020800400204004004040040040200400802004008010040100080402000404040003
04180000C46000003F80001B1C7E9720>8 D<03C00FF01C38300C60066006C003C003C0
03C00360066006300C1C380FF003C010107E9115>14 D<03C00FF01FF83FFC7FFE7FFEFF
FFFFFFFFFFFFFF7FFE7FFE3FFC1FF80FF003C010107E9115>I<00000030000000001800
000000180000000018000000000C000000000C0000000006000000000300000000038000
000000C0FFFFFFFFF8FFFFFFFFF800000000C00000000380000000030000000006000000
000C000000000C00000000180000000018000000001800000000300025167E942A>33
D<00C0006000018000300001800030000180003000030000180003000018000600000C00
0C000006001C000007003000000180FFFFFFFFF0FFFFFFFFF030000001801C000007000C
000006000600000C000300001800030000180001800030000180003000018000300000C0
00600024167D942A>36 D<007FF801FFF80780000E000018000030000030000060000060
0000C00000C00000C00000FFFFF8FFFFF8C00000C00000C0000060000060000030000030
00001800000E000007800001FFF8007FF8151A7D961C>50 D<0000600000600000C00000
C0000180000180000180000300000300000600000600000C00000C000018000018000018
0000300000300000600000600000C00000C0000180000180000300000300000300000600
000600000C00000C0000180000180000300000300000300000600000600000C000004000
0013287A9D00>54 D<C0C0C0C0C0C0E0E0C0C0C0C0C0C0030E7E9000>I<400004C0000C
6000186000186000183000303000303000301800601800601FFFE00FFFC00C00C00C00C0
06018006018003030003030003030001860001860001860000CC0000CC0000CC00007800
007800007800003000003000161E809C17>I<FFFFC0FFFFC00000C00000C00000C00000
C00000C00000C00000C00000C00000C00000C00000C03FFFC07FFFC00000C00000C00000
C00000C00000C00000C00000C00000C00000C00000C00000C00000C0FFFFC0FFFFC0121D
7E9C17>I<0004000C03CC0C381818301C303C703E603660666066E067E067E0C7E0C7E0
C7E187E187E187E307E307E307E607E607E60766066C067C0E3C0C380C18181C3033C030
00300010237E9F15>59 D<00040000000C0000000C0000000C0000000C0000000C000000
0C0000000C0000000C0000000C0000000C0000000C0000000C0000000C0000000C000000
0C0000000C0000000C0000000C0000000C0000000C0000000C0000000C0000000C000000
0C0000000C0000FFFFFFE0FFFFFFE01B1C7D9B21>63 D<00603F0001E1FF8007E30FC001
EC07C001D803C001F803C003F0038003E0038003E0070003E0040003C0180007C0600007
83C000078FF8000793FC0007007E000F003E000F001F000F001F000E000F000E000F001E
000F001C000E001C000E003C001C00398018003BC0200077E0C00063FF0000C1FC00001A
1E7F9C1B>66 D<003FFE0001FFFFC0071E1FE0081C03F0381C01F8703C00F8603C007CC0
3C007C003C003C0038003C0038003C0078003C0078003C00780038007000380070007800
F0007000E0006000E000E001E001C001C0018001C0020003C00400038018000380600007
0380000FFE00001FF000001E1C809B20>68 D<0003F8000FFC00307C00603C00C03C0180
3003802007800007800007800007C00007E00003F80001FE00007C0000C0000300000600
000C0000180000380000700000700020F00060F001C0F80180FC02007E0C003FF0001FC0
00161E7F9C16>I<003FFF8001FFFF000700C0000C01C0001C0380003003800020070000
00070000000F0000000F0000000E0000000E0000001E0000001E0000001C0000001C0000
003C0000003800000038000000780000007000000070000000E0000000E00C0001C01800
018030007FFFE000FFFF8000191C819B17>73 D<000000001E000000007C00000000FC00
020000FC00070001C0000F000100000F000200000F000200000F800200000F800400000B
800400001B8004000013C004000013C008000011C008000011E008000021E010000020E0
10000020F010000020F01000004070200000407820000040782000008038200000803C40
0000803C400001001E400001001E400001000FC00062000F80007E00078000FC00078000
FC0003000078000000002722809F22>78 D<000C1F8000107FE0002087F000C381F00187
00F0030600F8060E00F80E1C00781C1C00781C3800783820007838000078780000787000
007070000070F00000F0F00000E0F00000E0F00001E0F00001C0F0000180F8000380F800
0700780006007C000C007E0010003F0020001FC1C0000FFF000003F800001D1E7E9C21>
I<001000003800003800006C00006C00006C0000C60000C6000183000183000301800301
800600C00600C00600C00C00600C006018003018003030001830001830001860000C6000
0CC00006C00002171A7E981C>94 D<400000C00000C00000C00000C00000C00000C00000
C00000C00000C00000C00000C00000C00000FFFFE0FFFFF0C00000C00000C00000C00000
C00000C00000C00000C00000C00000C00000C00000C00000C00000400000141D7E9C19>
96 D<003C00E001C0018003800380038003800380038003800380038003800380038003
80030007001C00F0001C0007000300038003800380038003800380038003800380038003
8003800380018001C000E0003C0E297D9E15>102 D<F0001C0007000300038003800380
0380038003800380038003800380038003800380018001C000E0003C00E001C001800380
038003800380038003800380038003800380038003800380030007001C00F0000E297D9E
15>I<C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0
C0C0C0C0C0C0C0C002297B9E0C>106 D E /Fo 46 123 df<0001F03C00071C47000C1C
C7000C19C6001C0180001C0380001803800038038000380380003807000038070003FFFF
F000700700007007000070070000700E0000700E0000E00E0000E00E0000E00E0000E01C
0000E01C0001C01C0001C01C0001C01C0001C0380001C038000380380003803800038030
00030070000300700007006000C630E000E638C000CC318000781E00002025819C19>11
D<0000FE000003018000060180000C0380001C0180001C00000018000000380000003800
00003800000038000003FFFE0000700E0000700E0000700E0000701C0000701C0000E01C
0000E01C0000E0380000E0380000E0380001C0380001C0720001C0720001C0720001C072
00038034000380180003800000030000000300000007000000C6000000E6000000CC0000
00780000001925819C17>I<00030006000800180030006000C000C00180030003000600
06000C000C001C0018001800380030003000700070006000600060006000E000E000E000
E000E0006000600060006000600020003000100008000800102A7B9E11>40
D<001000100008000C000400060006000600060006000700070007000700070006000600
060006000E000E000C000C001C001800180038003000300060006000C000C00180030003
0006000C00180010006000C000102A809E11>I<183878380808101020404080050C7D83
0D>44 D<FFC0FFC0FFC00A037D890F>I<3078F06005047C830D>I<000002000006000006
00000C00000C0000180000300000300000600000600000C00000C0000180000180000300
000600000600000C00000C0000180000180000300000300000600000C00000C000018000
0180000300000300000600000C00000C0000180000180000300000300000600000600000
C0000080000017297F9E15>I<0004000C00180038007807B8007000700070007000E000
E000E000E001C001C001C001C0038003800380038007000700070007000F00FFF00E1C7B
9B15>49 D<0001800001C0000380000380000380000300000700000700000600000E0000
0C00001C0000180000180000300000300000600000400000C600018E00010E00020E0006
1C000C1C00181C003F1C0040F800803F8000380000380000700000700000700000700000
E00000600012247E9B15>52 D<003E0000E1000181800300C00600C00E00C00C00C01C00
C01C00C01C01C03801C03801C03801C03803C0180380180780080B800C330003C7000007
00000E00000C00001C00001800E03000E0600080C000C180003E0000121D7C9B15>57
D<0000180000001800000038000000380000007800000078000000B80000013800000138
0000023C0000021C0000041C00000C1C0000081C0000101C0000101C0000201C0000201C
00007FFC0000C01C0000801C0001001C0001001E0002000E0002000E0004000E000C000E
001C001E00FF00FFC01A1D7E9C1F>65 D<0003F020001E0C60003002E000E003C001C001
C0038001C0070000C00E0000801E0000801C0000803C0000803C00000078000000780000
0078000000F0000000F0000000F0000000F0000000F0000400F0000400F0000400F00008
00700008007000100038002000180040000C0180000706000001F800001B1E7A9C1E>67
D<01FFFF00003C03C0003800E0003800E000380070003800700070007800700038007000
380070007800E0007800E0007800E0007800E0007801C000F001C000F001C000F001C000
E0038001E0038001C0038003C0038003800700070007000E0007001C00070038000E00E0
00FFFF80001D1C7E9B1F>I<01FFFFF0003C00F000380030003800200038002000380020
0070002000700020007008200070080000E0100000E0100000E0300000FFF00001C02000
01C0200001C0200001C02000038040800380008003800080038001000700010007000300
07000200070006000E003C00FFFFFC001C1C7E9B1C>I<03FF0078007000700070007000
E000E000E000E001C001C001C001C0038003800380038007000700070007000E000E000E
000E001E00FFC0101C7D9B10>73 D<003FF80003C0000380000380000380000380000700
000700000700000700000E00000E00000E00000E00001C00001C00001C00001C00003800
003800003800003800607000E07000C0600080E00081C0004380003E0000151D7C9B16>
I<01FFC0003C0000380000380000380000380000700000700000700000700000E00000E0
0000E00000E00001C00001C00001C00001C0000380020380020380020380040700040700
0C0700180700380E00F0FFFFF0171C7E9B1A>76 D<01FE0001FE003E0001E0002E0003C0
002E0005C0002E0005C0002E0009C0004E000B80004E001380004E002380004700238000
870047000087004700008700870000870107000107010E000107020E000107040E000107
040E000207081C000203881C000203901C000203A01C000403A038000403C038000403C0
38000C038038001C03007800FF8307FF00271C7E9B25>I<0007F000001C1C0000700E00
00E0070001C0038003800380070003800E0003C01E0003C01C0003C03C0003C03C0003C0
780003C0780003C0780003C0F0000780F0000780F0000780F0000F00F0000F00F0000E00
F0001E00F0003C0070003800700070007800E0003801C0001C0380000E0E000003F80000
1A1E7A9C20>79 D<01FFFE00003C0380003801C0003800E0003800E0003800E0007001E0
007001E0007001E0007001C000E003C000E0038000E0070000E01C0001FFF00001C00000
01C0000001C0000003800000038000000380000003800000070000000700000007000000
070000000F000000FFE000001B1C7E9B1C>I<FF801FC03C0007001C0004001C0004001C
0008001C0010001C0010001C0020001C0020001C0040001C0080001C0080000E0100000E
0100000E0200000E0400000E0400000E0800000E0800000E1000000E2000000F20000007
4000000740000007800000070000000700000006000000060000001A1D779B1F>86
D<01E307170C0F180F380E300E700E700EE01CE01CE01CE01CE039E039E0396079319A1E
0C10127C9115>97 D<3F00070007000E000E000E000E001C001C001C001C0039E03A183C
0C380C700C700E700E700EE01CE01CE01CE018E038E030E06060C031801E000F1D7C9C13
>I<00F803040E041C0E181C300070007000E000E000E000E000E000E004600860103060
0F800F127C9113>I<0007E00000E00000E00001C00001C00001C00001C0000380000380
00038000038001E7000717000C0F00180F00380E00300E00700E00700E00E01C00E01C00
E01C00E01C00E03900E03900E03900607900319A001E0C00131D7C9C15>I<00F807040C
0418023804300470087FF0E000E000E000E000E00060046008301030600F800F127C9113
>I<0003C0000670000C70001C60001C00001C0000380000380000380000380000380003
FF8000700000700000700000700000700000E00000E00000E00000E00000E00001C00001
C00001C00001C00001C000038000038000038000030000030000070000C60000E60000CC
00007800001425819C0D>I<0078C001C5C00303C00603C00E03800C03801C03801C0380
380700380700380700380700380E00380E00380E00181E000C7C00079C00001C00001C00
003800003800C03000E07000C1C0007F0000121A7E9113>I<0FC00001C00001C0000380
000380000380000380000700000700000700000700000E3E000EC3000F03800E03801E03
801C03801C03801C0380380700380700380700380E00700E40700E40701C40701C80E00C
80600700121D7E9C15>I<01800380010000000000000000000000000000001C00260047
0047008E008E000E001C001C001C0038003800710071007100720072003C00091C7C9B0D
>I<0FC00001C00001C0000380000380000380000380000700000700000700000700000E
07800E08800E11C00E21C01C41801C80001D00001E00003FC00038E00038700038700070
7100707100707100707200E03200601C00121D7E9C13>107 D<1F800380038007000700
070007000E000E000E000E001C001C001C001C0038003800380038007000700070007000
E200E200E200E40064003800091D7D9C0B>I<1C1E0780266318C04683A0E04703C0E08E
0380E08E0380E00E0380E00E0380E01C0701C01C0701C01C0701C01C070380380E038838
0E0388380E0708380E0710701C0320300C01C01D127C9122>I<383E004CC3004D03804E
03809E03809C03801C03801C0380380700380700380700380E00700E40700E40701C4070
1C80E00C8060070012127C9117>I<00F800030C000E06001C0300180300300300700380
700380E00700E00700E00700E00E00E00E00E01C0060180060300030E0000F800011127C
9115>I<03878004C86004D03004E03009C03009C03801C03801C0380380700380700380
700380600700E00700C00701800783000E86000E78000E00000E00001C00001C00001C00
001C0000380000FF0000151A809115>I<1C3C2642468747078E068E000E000E001C001C
001C001C0038003800380038007000300010127C9112>114 D<01F006080C080C1C1818
1C001F001FC00FF007F0007800386030E030C030806060C01F000E127D9111>I<030007
00070007000E000E000E000E00FFE01C001C001C00380038003800380070007000700070
00E080E080E100E100660038000B1A7C990E>I<1C01802E03804E03804E03808E07008E
07001C07001C0700380E00380E00380E00380E00301C80301C80301C80383C80184D000F
860011127C9116>I<1C062E0E4E064E068E028E021C021C023804380438043808300830
083010382018400F800F127C9113>I<1E01832703874703874703838707018707010E07
010E07011C0E021C0E021C0E021C0E04180C04181C04181C081C1E080C263007C3C01812
7C911C>I<0387800CC8400870E01070E020E0C020E00000E00000E00001C00001C00001
C00001C000038100638100E38200C5820085840078780013127E9113>I<1C01802E0380
4E03804E03808E07008E07001C07001C0700380E00380E00380E00380E00301C00301C00
301C00383C001878000FB800003800003000007000E06000E0C0008180004300003C0000
111A7C9114>I<01C107E10FF6081C10080010002000400080010002000400080410042C
0C73F841F080E010127E9111>I E /Fp 85 125 df<FFFFF00F00F00F00300F00100F00
100F00180F00080F00080F00080F00000F00000F00000F00000F00000F00000F00000F00
000F00000F00000F00000F00000F00000F00000F00000F00000F00000F8000FFF800151C
7E9B1A>0 D<007E1F0001C1B1800303E3C00703C3C00E03C1800E01C0000E01C0000E01
C0000E01C0000E01C0000E01C000FFFFFC000E01C0000E01C0000E01C0000E01C0000E01
C0000E01C0000E01C0000E01C0000E01C0000E01C0000E01C0000E01C0000E01C0000E01
C0000E01C0000E01C0007F87FC001A1D809C18>11 D<007E0001C1800301800703C00E03
C00E01800E00000E00000E00000E00000E0000FFFFC00E01C00E01C00E01C00E01C00E01
C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C07F87
F8151D809C17>I<007FC001C1C00303C00703C00E01C00E01C00E01C00E01C00E01C00E
01C00E01C0FFFFC00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E
01C00E01C00E01C00E01C00E01C00E01C00E01C07FCFF8151D809C17>I<003F07E00001
C09C18000380F018000701F03C000E01E03C000E00E018000E00E000000E00E000000E00
E000000E00E000000E00E00000FFFFFFFC000E00E01C000E00E01C000E00E01C000E00E0
1C000E00E01C000E00E01C000E00E01C000E00E01C000E00E01C000E00E01C000E00E01C
000E00E01C000E00E01C000E00E01C000E00E01C000E00E01C007FC7FCFF80211D809C23
>I<60F0F0F0F0F0F0F060606060606060606060606060000000000060F0F060041E7C9D
0C>33 D<6060F0F0F8F86868080808080808101010102020404080800D0C7F9C15>I<00
E000000310000006080000060800000E0800000E0800000E0800000E0800000E1000000E
1000000E2000000740000007403FE007800F8007800600038004000780040009C0080011
C0100030E0100020F0200060702000E0384000E03C8000E01C8000E00F0020E007002070
0780403009C0401830E1800FC03F001B1F7E9D20>38 D<60F0F868080808101020408005
0C7C9C0C>I<00800100020006000C000C00180018003000300030006000600060006000
E000E000E000E000E000E000E000E000E000E000E000E000600060006000600030003000
3000180018000C000C000600020001000080092A7C9E10>I<8000400020003000180018
000C000C0006000600060003000300030003000380038003800380038003800380038003
8003800380038003000300030003000600060006000C000C001800180030002000400080
00092A7E9E10>I<00060000000600000006000000060000000600000006000000060000
000600000006000000060000000600000006000000060000FFFFFFE0FFFFFFE000060000
000600000006000000060000000600000006000000060000000600000006000000060000
0006000000060000000600001B1C7E9720>43 D<60F0F0701010101020204080040C7C83
0C>I<FFE0FFE00B0280890E>I<60F0F06004047C830C>I<00010003000600060006000C
000C000C0018001800180030003000300060006000C000C000C001800180018003000300
0300060006000C000C000C00180018001800300030003000600060006000C000C0001029
7E9E15>I<03C00C301818300C300C700E60066006E007E007E007E007E007E007E007E0
07E007E007E007E007E00760066006700E300C300C18180C3007E0101D7E9B15>I<0100
07003F00C700070007000700070007000700070007000700070007000700070007000700
07000700070007000700070007000700FFF80D1C7C9B15>I<07C01830201C400C400EF0
0FF80FF807F8077007000F000E000E001C001C00380070006000C00180030006010C0118
0110023FFE7FFEFFFE101C7E9B15>I<07E01830201C201C781E780E781E381E001C001C
00180030006007C00030001C001C000E000F000F700FF80FF80FF80FF00E401C201C1830
07C0101D7E9B15>I<000C00000C00001C00003C00003C00005C0000DC00009C00011C00
031C00021C00041C000C1C00081C00101C00301C00201C00401C00C01C00FFFFC0001C00
001C00001C00001C00001C00001C00001C0001FFC0121C7F9B15>I<300C3FF83FF03FC0
20002000200020002000200023E02C303018301C200E000E000F000F000F600FF00FF00F
F00F800E401E401C2038187007C0101D7E9B15>I<00F0030C04040C0E181E301E300C70
0070006000E3E0E430E818F00CF00EE006E007E007E007E007E007600760077006300E30
0C18180C3003E0101D7E9B15>I<4000007FFF807FFF007FFF0040020080040080040080
080000100000100000200000600000400000C00000C00001C00001800001800003800003
8000038000038000078000078000078000078000078000078000030000111D7E9B15>I<
03E00C301008200C200660066006700670067C0C3E183FB01FE007F007F818FC307E601E
600FC007C003C003C003C00360026004300C1C1007E0101D7E9B15>I<03C00C30181830
0C700C600EE006E006E007E007E007E007E0076007700F300F18170C2707C70006000600
0E300C780C78187018203010C00F80101D7E9B15>I<60F0F06000000000000000000000
60F0F06004127C910C>I<60F0F0600000000000000000000060F0F07010101010202040
80041A7C910C>I<7FFFFFC0FFFFFFE00000000000000000000000000000000000000000
000000000000000000000000FFFFFFE07FFFFFC01B0C7E8F20>61
D<0FE03038401CE00EF00EF00EF00E000C001C0030006000C00080018001000100010001
00010001000000000000000000000003000780078003000F1D7E9C14>63
D<000600000006000000060000000F0000000F0000000F000000178000001780000037C0
000023C0000023C0000043E0000041E0000041E0000080F0000080F0000080F000010078
000100780001FFF80002003C0002003C0002003C0004001E0004001E000C001F000C000F
001E001F00FF00FFF01C1D7F9C1F>65 D<FFFFC0000F0078000F003C000F001E000F000E
000F000F000F000F000F000F000F000F000F000E000F001E000F003C000F00F8000FFFF0
000F003C000F001E000F000F000F0007000F0007800F0007800F0007800F0007800F0007
800F000F000F000F000F001E000F007800FFFFE000191C7F9B1D>I<001F808000E06180
01801980070007800E0003801C0003801C00018038000180780000807800008070000080
F0000000F0000000F0000000F0000000F0000000F0000000F0000000F000000070000080
7800008078000080380000801C0001001C0001000E000200070004000180080000E03000
001FC000191E7E9C1E>I<FFFFC0000F00F0000F003C000F000E000F0007000F0007000F
0003800F0003C00F0001C00F0001C00F0001E00F0001E00F0001E00F0001E00F0001E00F
0001E00F0001E00F0001E00F0001C00F0001C00F0003C00F0003800F0007800F0007000F
000E000F001C000F007000FFFFC0001B1C7E9B20>I<FFFFFC0F003C0F000C0F00040F00
040F00060F00020F00020F01020F01000F01000F01000F03000FFF000F03000F01000F01
000F01000F01010F00010F00020F00020F00020F00060F00060F000C0F003CFFFFFC181C
7E9B1C>I<FFFFF80F00780F00180F00080F00080F000C0F00040F00040F01040F01000F
01000F01000F03000FFF000F03000F01000F01000F01000F01000F00000F00000F00000F
00000F00000F00000F00000F0000FFF800161C7E9B1B>I<001F808000E0618001801980
070007800E0003801C0003801C00018038000180780000807800008070000080F0000000
F0000000F0000000F0000000F0000000F0000000F000FFF0F0000F807000078078000780
78000780380007801C0007801C0007800E00078007000B800180118000E06080001F8000
1C1E7E9C21>I<FFF0FFF00F000F000F000F000F000F000F000F000F000F000F000F000F
000F000F000F000F000F000F000F000F000F000F000F000FFFFF000F000F000F000F000F
000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F
000F000F000F00FFF0FFF01C1C7F9B1F>I<FFF00F000F000F000F000F000F000F000F00
0F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F00
FFF00C1C7F9B0F>I<07FF80007C00003C00003C00003C00003C00003C00003C00003C00
003C00003C00003C00003C00003C00003C00003C00003C00003C00003C00003C00003C00
703C00F83C00F83C00F8380070780040700030E0000F8000111D7F9B15>I<FFF01FE00F
0007800F0006000F0004000F0008000F0010000F0020000F0040000F0080000F0100000F
0200000F0600000F0F00000F1780000F2780000F43C0000F81E0000F01E0000F00F0000F
0078000F0078000F003C000F003E000F001E000F000F000F000F800F000FC0FFF03FF01C
1C7F9B20>I<FFF8000F80000F00000F00000F00000F00000F00000F00000F00000F0000
0F00000F00000F00000F00000F00000F00000F00000F00000F00080F00080F00080F0018
0F00180F00100F00300F00700F01F0FFFFF0151C7E9B1A>I<FF8000FF800F8000F8000F
8000F8000BC00178000BC00178000BC001780009E002780009E002780008F004780008F0
04780008F0047800087808780008780878000878087800083C107800083C107800083C10
7800081E207800081E207800081E207800080F407800080F407800080780780008078078
00080780780008030078001C03007800FF8307FF80211C7E9B26>I<FF001FF00F800380
0FC001000BC0010009E0010008F0010008F0010008780100083C0100083E0100081E0100
080F0100080F8100080781000803C1000801E1000801F1000800F1000800790008007D00
08003D0008001F0008001F0008000F0008000700080003001C000300FF8001001C1C7F9B
1F>I<003F800000E0E0000380380007001C000E000E001C0007003C0007803800038078
0003C0780003C0700001C0F00001E0F00001E0F00001E0F00001E0F00001E0F00001E0F0
0001E0F00001E0700001C0780003C0780003C0380003803C0007801C0007000E000E0007
001C000380380000E0E000003F80001B1E7E9C20>I<FFFF800F00E00F00780F003C0F00
1C0F001E0F001E0F001E0F001E0F001E0F001C0F003C0F00780F00E00FFF800F00000F00
000F00000F00000F00000F00000F00000F00000F00000F00000F00000F0000FFF000171C
7E9B1C>I<FFFF00000F01E0000F0078000F003C000F001C000F001E000F001E000F001E
000F001E000F001C000F003C000F0078000F01E0000FFF00000F01E0000F0070000F0078
000F003C000F003C000F003C000F003C000F003C000F003C000F003C100F003C100F001C
100F001C10FFF00E20000003C01C1D7E9B1F>82 D<07E0801C1980300580300380600180
E00180E00080E00080E00080F00000F800007C00007FC0003FF8001FFE0007FF0000FF80
000F800007C00003C00001C08001C08001C08001C0C00180C00180E00300D00200CC0C00
83F800121E7E9C17>I<7FFFFFC0700F01C0600F00C0400F0040400F0040C00F0020800F
0020800F0020800F0020000F0000000F0000000F0000000F0000000F0000000F0000000F
0000000F0000000F0000000F0000000F0000000F0000000F0000000F0000000F0000000F
0000000F0000001F800003FFFC001B1C7F9B1E>I<FFF01FF00F0003800F0001000F0001
000F0001000F0001000F0001000F0001000F0001000F0001000F0001000F0001000F0001
000F0001000F0001000F0001000F0001000F0001000F0001000F0001000F0001000F0001
0007000200078002000380040001C0040000E0180000706000000F80001C1D7F9B1F>I<
FFE00FF01F0003C01F0001800F0001000F000100078002000780020007C0020003C00400
03C0040003E00C0001E0080001E0080000F0100000F0100000F810000078200000782000
003C4000003C4000003C4000001E8000001E8000001F8000000F0000000F000000060000
00060000000600001C1D7F9B1F>I<FFE1FFC0FF1F003E003C1E003C00180F001E00100F
001E00100F001E001007801F002007801F002007801F002003C027804003C027804003C0
27804001E043C08001E043C08001E043C08000F081E10000F081E10000F081E10000F900
F300007900F200007900F200007E007E00003E007C00003E007C00003C003C00001C0038
00001C00380000180018000008001000281D7F9B2B>I<FFF07FC00FC01E0007800C0007
C0080003C0100001E0200001F0200000F0400000788000007C8000003D0000003E000000
1F0000000F0000000F8000000F80000013C0000023E0000021E0000040F0000080F80000
80780001007C0002003E0002001E0006001F001F001F80FF807FF01C1C7F9B1F>I<FFF0
03FC0F8001E0078000C007C0008003C0010003E0030001E0020000F0040000F804000078
0800007C1800003C1000003E2000001F2000000F4000000FC00000078000000780000007
80000007800000078000000780000007800000078000000780000007800000078000007F
F8001E1C809B1F>I<FEFEC0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0
C0C0C0C0C0C0C0C0C0C0C0C0FEFE07297C9E0C>91 D<0808101020204040404080808080
8080B0B0F8F8787830300D0C7A9C15>I<FEFE0606060606060606060606060606060606
0606060606060606060606060606060606060606FEFE0729809E0C>I<1FC00030700078
3800781C00301C00001C00001C0001FC000F1C00381C00701C00601C00E01C40E01C40E0
1C40603C40304E801F870012127E9115>97 D<FC00001C00001C00001C00001C00001C00
001C00001C00001C00001C00001C00001C7C001D87001E01801C00C01C00E01C00601C00
701C00701C00701C00701C00701C00701C00601C00E01C00C01E018019070010FC00141D
7F9C17>I<03F80C0C181E301E700C6000E000E000E000E000E000E00060007002300218
040C1803E00F127F9112>I<001F80000380000380000380000380000380000380000380
00038000038000038003F3800E0B80180780300380700380600380E00380E00380E00380
E00380E00380E003806003807003803003801807800E1B8003E3F0141D7F9C17>I<07E0
0C301818300C700E6006E006FFFEE000E000E000E00060007002300218040C1803E00F12
7F9112>I<00F8018C071E061E0E0C0E000E000E000E000E000E00FFE00E000E000E000E
000E000E000E000E000E000E000E000E000E000E000E000E007FE00F1D809C0D>I<0003
8007C4C01C78C0383880301800701C00701C00701C00701C003018003838001C700027C0
002000002000003000003FF8001FFF001FFF802003806001C0C000C0C000C0C000C06001
803003001C0E0007F800121C7F9215>I<FC00001C00001C00001C00001C00001C00001C
00001C00001C00001C00001C00001C7C001C87001D03001E03801C03801C03801C03801C
03801C03801C03801C03801C03801C03801C03801C03801C03801C0380FF9FF0141D7F9C
17>I<18003C003C0018000000000000000000000000000000FC001C001C001C001C001C
001C001C001C001C001C001C001C001C001C001C001C00FF80091D7F9C0C>I<00C001E0
01E000C0000000000000000000000000000007E000E000E000E000E000E000E000E000E0
00E000E000E000E000E000E000E000E000E000E000E000E060E0F0C0F1C061803E000B25
839C0D>I<FC00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C
00001C0FE01C07801C06001C0C001C10001C20001C40001CE0001DE0001E70001C78001C
38001C3C001C1C001C0E001C0F001C0F80FF9FE0131D7F9C16>I<FC001C001C001C001C
001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C
001C001C001C001C001C00FF80091D7F9C0C>I<FC7E07E0001C838838001D019018001E
01E01C001C01C01C001C01C01C001C01C01C001C01C01C001C01C01C001C01C01C001C01
C01C001C01C01C001C01C01C001C01C01C001C01C01C001C01C01C001C01C01C00FF8FF8
FF8021127F9124>I<FC7C001C87001D03001E03801C03801C03801C03801C03801C0380
1C03801C03801C03801C03801C03801C03801C03801C0380FF9FF014127F9117>I<03F0
000E1C00180600300300700380600180E001C0E001C0E001C0E001C0E001C0E001C06001
807003803003001806000E1C0003F00012127F9115>I<FC7C001D87001E01801C01C01C
00E01C00E01C00701C00701C00701C00701C00701C00701C00E01C00E01C01C01E01801D
07001CFC001C00001C00001C00001C00001C00001C00001C0000FF8000141A7F9117>I<
03E0800E1980180580380780700380700380E00380E00380E00380E00380E00380E00380
7003807003803807801807800E1B8003E380000380000380000380000380000380000380
000380001FF0141A7F9116>I<FCE01D381E781E781C301C001C001C001C001C001C001C
001C001C001C001C001C00FFC00D127F9110>I<1F9020704030C010C010E010F8007F80
3FE00FF000F880388018C018C018E010D0608FC00D127F9110>I<04000400040004000C
000C001C003C00FFE01C001C001C001C001C001C001C001C001C001C101C101C101C101C
100C100E2003C00C1A7F9910>I<FC1F801C03801C03801C03801C03801C03801C03801C
03801C03801C03801C03801C03801C03801C03801C07800C07800E1B8003E3F014127F91
17>I<FF07E03C03801C01001C01000E02000E02000F0600070400070400038800038800
03C80001D00001D00000E00000E00000E00000400013127F9116>I<FF3FC7E03C0703C0
1C0701801C0701001C0B01000E0B82000E0B82000E1182000711C4000711C4000720C400
03A0E80003A0E80003C0680001C0700001C0700001803000008020001B127F911E>I<FF
0FE01E07001C06000E040007080003900003B00001E00000E00000F00001F00001380002
1C00041C000C0E001807003C0780FE1FF014127F9116>I<FF07E03C03801C01001C0100
0E02000E02000F060007040007040003880003880003C80001D00001D00000E00000E000
00E000004000004000008000008000F08000F10000F30000660000380000131A7F9116>
I<7FFC70386038407040F040E041C003C0038007000F040E041C043C0C380870087038FF
F80E127F9112>I<FFFFF01401808B15>I<FFFFFFFFFF802901808B2A>I
E /Fq 37 122 df<0000180000380000380000700000700000E00000E00000E00001C000
01C0000380000380000380000700000700000700000E00000E00001C00001C00001C0000
380000380000700000700000700000E00000E00001C00001C00001C00003800003800007
00000700000700000E00000E00000E00001C00001C000038000038000038000070000070
0000E00000E00000C0000015317DA41C>47 D<00180000780001F800FFF800FFF80001F8
0001F80001F80001F80001F80001F80001F80001F80001F80001F80001F80001F80001F8
0001F80001F80001F80001F80001F80001F80001F80001F80001F80001F80001F80001F8
007FFFE07FFFE013207C9F1C>49 D<03FC000FFF003C1FC07007E07C07F0FE03F0FE03F8
FE03F8FE01F87C01F83803F80003F80003F00003F00007E00007C0000F80001F00003E00
00380000700000E01801C0180380180700180E00380FFFF01FFFF03FFFF07FFFF0FFFFF0
FFFFF015207D9F1C>I<00FE0007FFC00F07E01E03F03F03F03F81F83F81F83F81F81F03
F81F03F00003F00003E00007C0001F8001FE0001FF000007C00001F00001F80000FC0000
FC3C00FE7E00FEFF00FEFF00FEFF00FEFF00FC7E01FC7801F81E07F00FFFC001FE001720
7E9F1C>I<0000E00001E00003E00003E00007E0000FE0001FE0001FE00037E00077E000
E7E001C7E00187E00307E00707E00E07E00C07E01807E03807E07007E0E007E0FFFFFFFF
FFFF0007E00007E00007E00007E00007E00007E00007E000FFFF00FFFF18207E9F1C>I<
3000203E01E03FFFC03FFF803FFF003FFE003FF80033C000300000300000300000300000
31FC0037FF003E0FC03807E03003E00003F00003F00003F80003F83803F87C03F8FE03F8
FE03F8FC03F0FC03F07007E03007C03C1F800FFF0003F80015207D9F1C>I<001F8000FF
E003E07007C0F00F01F81F01F83E01F83E01F87E00F07C00007C0000FC0800FC7FC0FCFF
E0FD80F0FF00F8FE007CFE007CFC007EFC007EFC007EFC007E7C007E7C007E7C007E3C00
7C3E007C1E00F80F00F00783E003FFC000FF0017207E9F1C>I<6000007800007FFFFE7F
FFFE7FFFFC7FFFF87FFFF87FFFF0E00060E000C0C00180C00300C00300000600000C0000
1C0000180000380000780000780000F00000F00000F00001F00001F00001F00003F00003
F00003F00003F00003F00003F00003F00001E00017227DA11C>I<00FE0003FFC00703E0
0E00F01C00F01C00783C00783E00783F00783F80783FE0F01FF9E01FFFC00FFF8007FFC0
03FFE007FFF01E7FF83C1FFC7807FC7801FEF000FEF0003EF0001EF0001EF0001EF8001C
7800383C00381F00F00FFFC001FF0017207E9F1C>I<000070000000007000000000F800
000000F800000000F800000001FC00000001FC00000003FE00000003FE00000003FE0000
00067F000000067F0000000C7F8000000C3F8000000C3F800000181FC00000181FC00000
301FE00000300FE00000700FF000006007F000006007F00000C007F80000FFFFF80001FF
FFFC00018001FC00018001FC00030001FE00030000FE00070000FF000600007F00060000
7F00FFE007FFF8FFE007FFF825227EA12A>65 D<FFFFFFF8FFFFFFF807F001F807F00078
07F0003807F0001807F0001C07F0001C07F0000C07F0000C07F0180C07F0180C07F01800
07F0180007F0380007F0780007FFF80007FFF80007F0780007F0380007F0180007F01800
07F0180007F0180007F0000007F0000007F0000007F0000007F0000007F0000007F00000
07F00000FFFFC000FFFFC0001E227EA123>70 D<FFFF80FFFF8007F00007F00007F00007
F00007F00007F00007F00007F00007F00007F00007F00007F00007F00007F00007F00007
F00007F00007F00007F00007F00007F00007F00007F00007F00007F00007F00007F00007
F00007F00007F000FFFF80FFFF8011227EA115>73 D<0007FC0000003FFF800000FC07E0
0003F001F80007E000FC000FC0007E001F80003F001F80003F003F00001F803F00001F80
7F00001FC07E00000FC07E00000FC0FE00000FE0FE00000FE0FE00000FE0FE00000FE0FE
00000FE0FE00000FE0FE00000FE0FE00000FE0FE00000FE07E00000FC07F00001FC07F00
001FC03F00001F803F80003F801F80003F000FC0007E0007E000FC0003F001F80000FC07
E000003FFF80000007FC000023227DA12A>79 D<FFFFFE0000FFFFFFC00007F007F00007
F001F80007F000FC0007F0007E0007F0007F0007F0007F0007F0007F0007F0007F0007F0
007F0007F0007F0007F0007E0007F000FC0007F001F80007F007F00007FFFFC00007FFFF
800007F00FE00007F007F00007F003F80007F001FC0007F001FC0007F001FC0007F001FC
0007F001FC0007F001FC0007F001FC0007F001FC0007F001FC0607F000FE0607F000FF0C
FFFF803FF8FFFF800FF027227EA12A>82 D<0FFC003FFF807E07C07E03E07E01E07E01F0
3C01F00001F00001F0003FF003FDF01FC1F03F01F07E01F0FC01F0FC01F0FC01F0FC01F0
7E02F07E0CF81FF87F07E03F18167E951B>97 D<FF000000FF0000001F0000001F000000
1F0000001F0000001F0000001F0000001F0000001F0000001F0000001F0000001F000000
1F0FE0001F3FF8001FE07C001F803E001F001F001F000F801F000F801F000FC01F000FC0
1F000FC01F000FC01F000FC01F000FC01F000FC01F000FC01F000F801F001F801F801F00
1FC03E001EE07C001C3FF800180FC0001A237EA21F>I<00FF8007FFE00F83F01F03F03E
03F07E03F07C01E07C0000FC0000FC0000FC0000FC0000FC0000FC00007C00007E00007E
00003E00181F00300FC06007FFC000FF0015167E9519>I<0001FE000001FE0000003E00
00003E0000003E0000003E0000003E0000003E0000003E0000003E0000003E0000003E00
00003E0001FC3E0007FFBE000F81FE001F007E003E003E007E003E007C003E00FC003E00
FC003E00FC003E00FC003E00FC003E00FC003E00FC003E00FC003E007C003E007C003E00
3E007E001F00FE000F83BE0007FF3FC001FC3FC01A237EA21F>I<00FE0007FF800F87C0
1E01E03E01F07C00F07C00F8FC00F8FC00F8FFFFF8FFFFF8FC0000FC0000FC00007C0000
7C00007E00003E00181F00300FC07003FFC000FF0015167E951A>I<001FC0007FE000F1
F001E3F003E3F007C3F007C1E007C00007C00007C00007C00007C00007C000FFFE00FFFE
0007C00007C00007C00007C00007C00007C00007C00007C00007C00007C00007C00007C0
0007C00007C00007C00007C00007C00007C0003FFC003FFC00142380A211>I<01FE0F00
07FFBF800F87C7801F03E7801E01E0003E01F0003E01F0003E01F0003E01F0003E01F000
1E01E0001F03E0000F87C0000FFF800009FE000018000000180000001C0000001FFFE000
0FFFF80007FFFE001FFFFF003C003F0078000F80F0000780F0000780F0000780F0000780
78000F003C001E001F007C000FFFF80001FFC00019217F951C>I<FF000000FF0000001F
0000001F0000001F0000001F0000001F0000001F0000001F0000001F0000001F0000001F
0000001F0000001F07E0001F1FF8001F307C001F403C001F803E001F803E001F003E001F
003E001F003E001F003E001F003E001F003E001F003E001F003E001F003E001F003E001F
003E001F003E001F003E001F003E00FFE1FFC0FFE1FFC01A237EA21F>I<1C003E007F00
7F007F003E001C000000000000000000000000000000FF00FF001F001F001F001F001F00
1F001F001F001F001F001F001F001F001F001F001F001F001F00FFE0FFE00B247EA310>
I<FF000000FF0000001F0000001F0000001F0000001F0000001F0000001F0000001F0000
001F0000001F0000001F0000001F0000001F00FF801F00FF801F0038001F0060001F01C0
001F0380001F0700001F0E00001F1C00001F7E00001FFF00001FCF00001F0F80001F07C0
001F03E0001F01E0001F01F0001F00F8001F007C001F003C00FFE0FFC0FFE0FFC01A237E
A21E>107 D<FF00FF001F001F001F001F001F001F001F001F001F001F001F001F001F00
1F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F00
FFE0FFE00B237EA210>I<FF07F007F000FF1FFC1FFC001F303E303E001F403E403E001F
801F801F001F801F801F001F001F001F001F001F001F001F001F001F001F001F001F001F
001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F
001F001F001F001F001F001F001F001F001F001F001F00FFE0FFE0FFE0FFE0FFE0FFE02B
167E9530>I<FF07E000FF1FF8001F307C001F403C001F803E001F803E001F003E001F00
3E001F003E001F003E001F003E001F003E001F003E001F003E001F003E001F003E001F00
3E001F003E001F003E001F003E00FFE1FFC0FFE1FFC01A167E951F>I<00FE0007FFC00F
83E01E00F03E00F87C007C7C007C7C007CFC007EFC007EFC007EFC007EFC007EFC007EFC
007E7C007C7C007C3E00F81F01F00F83E007FFC000FE0017167E951C>I<FF0FE000FF3F
F8001FE07C001F803E001F001F001F001F801F001F801F000FC01F000FC01F000FC01F00
0FC01F000FC01F000FC01F000FC01F000FC01F001F801F001F801F803F001FC03E001FE0
FC001F3FF8001F0FC0001F0000001F0000001F0000001F0000001F0000001F0000001F00
00001F000000FFE00000FFE000001A207E951F>I<FE1F00FE3FC01E67E01EC7E01E87E0
1E87E01F83C01F00001F00001F00001F00001F00001F00001F00001F00001F00001F0000
1F00001F00001F0000FFF000FFF00013167E9517>114 D<0FF3003FFF00781F00600700
E00300E00300F00300FC00007FE0007FF8003FFE000FFF0001FF00000F80C00780C00380
E00380E00380F00700FC0E00EFFC00C7F00011167E9516>I<0180000180000180000180
000380000380000780000780000F80003F8000FFFF00FFFF000F80000F80000F80000F80
000F80000F80000F80000F80000F80000F80000F80000F81800F81800F81800F81800F81
800F830007C30003FE0000F80011207F9F16>I<FF01FE00FF01FE001F003E001F003E00
1F003E001F003E001F003E001F003E001F003E001F003E001F003E001F003E001F003E00
1F003E001F003E001F003E001F003E001F007E001F00FE000F81BE0007FF3FC001FC3FC0
1A167E951F>I<FFE01FE0FFE01FE01F8007000F8006000FC00E0007C00C0007E00C0003
E0180003E0180001F0300001F0300000F8600000F86000007CC000007CC000007FC00000
3F8000003F8000001F0000001F0000000E0000000E00001B167F951E>I<FFE3FF07F8FF
E3FF07F81F007800C01F807C01C00F807C01800F807C018007C07E030007C0DE030007C0
DE070003E1DF060003E18F060001F18F8C0001F3078C0001F3078C0000FF07D80000FE03
D80000FE03F800007C01F000007C01F000003C01E000003800E000003800E00025167F95
28>I<FFE07FC0FFE07FC00F801C0007C0380003E0700003F0600001F8C00000F9800000
7F8000003F0000001F0000001F8000003FC0000037C0000063E00000C1F00001C0F80003
80FC0007007E000E003E00FF80FFE0FF80FFE01B167F951E>I<FFE01FE0FFE01FE01F80
07000F8006000FC00E0007C00C0007E00C0003E0180003E0180001F0300001F0300000F8
600000F86000007CC000007CC000007FC000003F8000003F8000001F0000001F0000000E
0000000E0000000C0000000C00000018000078180000FC380000FC300000FC60000069C0
00007F8000001F0000001B207F951E>I E /Fr 20 126 df<183E7E7F3F1F070E0E1CFC
F860080D77851A>44 D<3078FCFC7830060676851A>46 D<003E0001FF8003FFC007C1E0
0F00E01E0F703C3FF0387FF07070F870E07870E078E1C038E1C038E1C038E1C038E1C038
E1C038E1C038E1C03870E07070E0707070E0387FE03C3FC01E0F000F003807C0F803FFF0
01FFE0003F00151E7E9D1A>64 D<1FF0003FFC007FFE00780F0030070000038000038000
7F8007FF801FFF803F8380780380700380E00380E00380E00380700780780F803FFFFC1F
FDFC07F0FC16157D941A>97 D<00FF8003FFC00FFFE01F01E03C00C07800007000007000
00E00000E00000E00000E00000E000007000007000007800703C00701F01F00FFFE003FF
C000FE0014157D941A>99 D<000FC0001FC0000FC00001C00001C00001C00001C00001C0
0001C001F1C007FDC00FFFC01E0FC03C07C07803C07001C0E001C0E001C0E001C0E001C0
E001C0E001C0E001C07003C07003C03807C03E0FC01FFFF807FDFC01F1F8161E7E9D1A>
I<01F87C07FFFE0FFFFE1E078C1C03803801C03801C03801C03801C03801C01C03801E07
801FFF001FFE0039F8003800003800001C00001FFF801FFFE03FFFF878007C70001CE000
0EE0000EE0000EE0000E70001C78003C3E00F81FFFF007FFC001FF0017217F941A>103
D<00C00001E00001E00000C0000000000000000000000000000000000000007FE0007FE0
007FE00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E0
0000E00000E00000E00000E0007FFF80FFFFC07FFF80121F7C9E1A>105
D<000C001E001E000C00000000000000000000000007FE0FFE07FE000E000E000E000E00
0E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E00
0E001C601CF038FFF87FF01FC00F2A7E9E1A>I<FE0000FE0000FE00000E00000E00000E
00000E00000E00000E00000E0FFC0E1FFC0E0FFC0E03C00E07800E0F000E1E000E3C000E
78000EFC000FFC000FDE000F8F000E07800E03800E01C00E01E00E00F0FFE3FEFFE3FEFF
E3FE171E7F9D1A>I<7FE000FFE0007FE00000E00000E00000E00000E00000E00000E000
00E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E000
00E00000E00000E00000E00000E00000E0007FFFC0FFFFE07FFFC0131E7D9D1A>I<7CE0
E000FFFBF8007FFFF8001F1F1C001E1E1C001E1E1C001C1C1C001C1C1C001C1C1C001C1C
1C001C1C1C001C1C1C001C1C1C001C1C1C001C1C1C001C1C1C001C1C1C001C1C1C007F1F
1F00FFBFBF807F1F1F00191580941A>I<7E3E00FEFF807FFFC00FC1C00F80E00F00E00E
00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E07F
C3FCFFE7FE7FC3FC17157F941A>I<01F00007FC001FFF003E0F803C07807803C07001C0
E000E0E000E0E000E0E000E0E000E0E000E0F001E07001C07803C03C07803E0F801FFF00
07FC0001F00013157D941A>I<7E3E00FEFF807FFFE00FC1F00F80700F00380E00380E00
1C0E001C0E001C0E001C0E001C0E001C0E001C0F00380F00780F80F00FC1E00FFFC00EFF
800E3E000E00000E00000E00000E00000E00000E00000E00000E00007FC000FFE0007FC0
0016207F941A>I<07FB801FFF807FFF80780780E00380E00380E003807800007FC0001F
FC0007FE00003F800007806001C0E001C0E001C0F003C0FC0780FFFF00EFFE00E3F80012
157C941A>115 D<7E07E0FE0FE07E07E00E00E00E00E00E00E00E00E00E00E00E00E00E
00E00E00E00E00E00E00E00E00E00E00E00E00E00E01E00F03E007FFFC03FFFE00FCFC17
157F941A>117 D<FF83FEFF83FEFF83FE3800383800381C00701C00701C00701C38701C
7C701C7C700C6C600EEEE00EEEE00EEEE00EEEE00EC6E006C6C007C7C00783C00783C017
157F941A>119 D<0007E0001FE0003FE000780000F00000E00000E00000E00000E00000
E00000E00000E00000E00000E00000E00000E00001E00003C000FF8000FF0000FF800003
C00001E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000
E00000F000007800003FE0001FE00007E013277DA21A>123 D<7C0000FF0000FF800003
C00001E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000
E00000F000007800003FE0001FE0003FE000780000F00000E00000E00000E00000E00000
E00000E00000E00000E00000E00000E00000E00001E00003C000FF8000FF00007C000013
277DA21A>125 D E /Fs 39 122 df<0001800000018000000180000001800000018000
000180000001800000018000000180000001800000018000000180000001800000018000
0001800000018000FFFFFFFEFFFFFFFE0001800000018000000180000001800000018000
000180000001800000018000000180000001800000018000000180000001800000018000
00018000000180001F227D9C26>43 D<70F8FCFC7404040404080810102040060F7C840E
>I<FFF8FFF80D02808B10>I<70F8F8F87005057C840E>I<01F000071C000C0600180300
3803803803807001C07001C07001C07001C0F001E0F001E0F001E0F001E0F001E0F001E0
F001E0F001E0F001E0F001E0F001E0F001E0F001E0F001E07001C07001C07001C07803C0
3803803803801C07000C0600071C0001F00013227EA018>48 D<008003800F80F3800380
038003800380038003800380038003800380038003800380038003800380038003800380
0380038003800380038003800380038007C0FFFE0F217CA018>I<03F8000C1E00100F00
2007804007C07807C07803C07807C03807C0000780000780000700000F00000C00003800
03F000001C00000F000007800007800003C00003C00003E02003E07003E0F803E0F803E0
F003C04003C0400780200780100F000C1C0003F00013227EA018>51
D<000300000300000700000700000F000017000017000027000067000047000087000187
00010700020700060700040700080700080700100700200700200700400700C00700FFFF
F8000700000700000700000700000700000700000700000F80007FF015217FA018>I<10
00801E07001FFF001FFE001FF80017E00010000010000010000010000010000010000011
F800120C001C07001803801003800001C00001C00001E00001E00001E00001E07001E0F0
01E0F001E0E001C08001C04003C04003802007001006000C1C0003F00013227EA018>I<
01F000060C000C0600180700380380700380700380F001C0F001C0F001C0F001E0F001E0
F001E0F001E0F001E07001E07003E03803E01805E00C05E00619E003E1E00001C00001C0
0001C0000380000380300380780700780600700C002018001030000FC00013227EA018>
57 D<70F8F8F870000000000000000000000070F8F8F87005157C940E>I<FFFFFFC00F80
07C0078001C0078000C00780004007800040078000600780002007800020078000200780
2020078020000780200007802000078060000780E00007FFE0000780E000078060000780
200007802000078020000780200807800008078000080780001007800010078000100780
00300780003007800070078000E00F8003E0FFFFFFE01D227EA121>69
D<0007F008003C0C1800E0021801C001B8038000F8070000780F0000381E0000381E0000
183C0000183C0000187C0000087800000878000008F8000000F8000000F8000000F80000
00F8000000F8000000F8000000F8001FFF780000F8780000787C0000783C0000783C0000
781E0000781E0000780F00007807000078038000B801C000B800E00318003C0C080007F0
0020247DA226>71 D<03FFE0001F00000F00000F00000F00000F00000F00000F00000F00
000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00
000F00000F00000F00000F00000F00700F00F80F00F80F00F80E00F01E00401C00203800
18700007C00013237EA119>74 D<FFFC001F80000F00000F00000F00000F00000F00000F
00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F
00000F00000F00000F00010F00010F00010F00010F00030F00030F00020F00060F00060F
001E1F007EFFFFFE18227DA11E>76 D<FFC00003FF0FC00003F007C00003E005E00005E0
05E00005E004F00009E004F00009E004F00009E004780011E004780011E004780011E004
3C0021E0043C0021E0043C0021E0041E0041E0041E0041E0040F0081E0040F0081E0040F
0081E004078101E004078101E004078101E00403C201E00403C201E00401E401E00401E4
01E00401E401E00400F801E00400F801E00400F801E004007001E00E007001E01F007003
F0FFE0203FFF28227EA12D>I<FFFFF0000F803C0007800F0007800780078007C0078003
C0078003E0078003E0078003E0078003E0078003E0078003E0078003C0078007C0078007
8007800F0007803C0007FFF0000780000007800000078000000780000007800000078000
0007800000078000000780000007800000078000000780000007800000078000000FC000
00FFFC00001B227EA121>80 D<03F0200C0C601802603001E07000E0600060E00060E000
60E00020E00020E00020F00000F000007800007F00003FF0001FFE000FFF0003FF80003F
C00007E00001E00000F00000F0000070800070800070800070800070C00060C00060E000
C0F000C0C80180C6070081FC0014247DA21B>83 D<FFFC07FF0FC000F807800070078000
200780002007800020078000200780002007800020078000200780002007800020078000
200780002007800020078000200780002007800020078000200780002007800020078000
20078000200780002007800020078000200380004003C0004003C0004001C0008000E000
800060010000300600001C08000003F00020237EA125>85 D<1FE000303800780C00780E
0030070000070000070000070000FF0007C7001E07003C0700780700700700F00708F007
08F00708F00F087817083C23900FC1E015157E9418>97 D<0E0000FE00001E00000E0000
0E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E1F000E61C0
0E80600F00300E00380E003C0E001C0E001E0E001E0E001E0E001E0E001E0E001E0E001E
0E001C0E003C0E00380F00700C80600C41C0083F0017237FA21B>I<01FE000703000C07
801C0780380300780000700000F00000F00000F00000F00000F00000F00000F000007000
007800403800401C00800C010007060001F80012157E9416>I<0000E0000FE00001E000
00E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E001F8E007
04E00C02E01C01E03800E07800E07000E0F000E0F000E0F000E0F000E0F000E0F000E0F0
00E07000E07800E03800E01801E00C02E0070CF001F0FE17237EA21B>I<01FC00070700
0C03801C01C03801C07801E07000E0F000E0FFFFE0F00000F00000F00000F00000F00000
7000007800203800201C00400E008007030000FC0013157F9416>I<003E0000E30001C7
80038780030780070000070000070000070000070000070000070000070000070000FFF8
000700000700000700000700000700000700000700000700000700000700000700000700
000700000700000700000700000700000700000780007FF000112380A20F>I<00007003
F1980E1E181C0E183807003807007807807807807807807807803807003807001C0E001E
1C0033F0002000002000003000003800003FFE001FFFC00FFFE03000F0600030C00018C0
0018C00018C000186000306000303800E00E038003FE0015217F9518>I<0E0000FE0000
1E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E0000
0E1F800E60C00E80E00F00700F00700E00700E00700E00700E00700E00700E00700E0070
0E00700E00700E00700E00700E00700E00700E00700E0070FFE7FF18237FA21B>I<1C00
3E003E003E001C00000000000000000000000000000000000E007E001E000E000E000E00
0E000E000E000E000E000E000E000E000E000E000E000E000E000E00FFC00A227FA10E>
I<0E00FE001E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E
000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E00FFE00B
237FA20E>108 D<0E1FC07F00FE60E183801E807201C00F003C00E00F003C00E00E0038
00E00E003800E00E003800E00E003800E00E003800E00E003800E00E003800E00E003800
E00E003800E00E003800E00E003800E00E003800E00E003800E00E003800E00E003800E0
FFE3FF8FFE27157F942A>I<0E1F80FE60C01E80E00F00700F00700E00700E00700E0070
0E00700E00700E00700E00700E00700E00700E00700E00700E00700E00700E00700E0070
FFE7FF18157F941B>I<01FC000707000C01801800C03800E0700070700070F00078F000
78F00078F00078F00078F00078F000787000707800F03800E01C01C00E038007070001FC
0015157F9418>I<0E3CFE461E8F0F0F0F060F000E000E000E000E000E000E000E000E00
0E000E000E000E000E000F00FFF010157F9413>114 D<0F8830786018C018C008C008E0
08F0007F003FE00FF001F8003C801C800C800CC00CC008E018D0308FC00E157E9413>I<
02000200020002000600060006000E001E003E00FFFC0E000E000E000E000E000E000E00
0E000E000E000E000E040E040E040E040E040E040708030801F00E1F7F9E13>I<0E0070
FE07F01E00F00E00700E00700E00700E00700E00700E00700E00700E00700E00700E0070
0E00700E00700E00700E00F00E00F006017003827800FC7F18157F941B>I<FF80FE1E00
781E00300E00200E00200700400700400780C003808003808001C10001C10000E20000E2
0000E20000740000740000380000380000380000100017157F941A>I<FF8FF87F3E01E0
3C1C01C0181C01E0180E01E0100E0260100E027010070270200704302007043820038438
400388184003881C4001C81C8001D00C8001D00E8000F00F0000E0070000E00700006006
000040020020157F9423>I<FF80FE1E00781E00300E00200E00200700400700400780C0
03808003808001C10001C10000E20000E20000E200007400007400003800003800003800
001000001000002000002000002000004000F04000F08000F180004300003C0000171F7F
941A>121 D E /Ft 19 123 df<FFFFFFFFE0FFFFFFFFE007E0000FE003E00001E003E0
0000F003E000007003E000003003E000003003E000001003E000001003E000001003E000
001003E000000803E000000803E000000803E000400803E000400003E000400003E00040
0003E000400003E000C00003E000C00003E003C00003FFFFC00003FFFFC00003E003C000
03E000C00003E000C00003E000400003E000400003E000400003E000400003E000400003
E000000003E000000003E000000003E000000003E000000003E000000003E000000003E0
00000003E000000003E000000003E000000003E000000003E000000007F0000000FFFFC0
0000FFFFC0000025317DB02B>70 D<FFFFC00000FFFFC0000007F000000003E000000003
E000000003E000000003E000000003E000000003E000000003E000000003E000000003E0
00000003E000000003E000000003E000000003E000000003E000000003E000000003E000
000003E000000003E000000003E000000003E000000003E000000003E000000003E00000
0003E000000003E000000003E000000003E000000003E000000003E000002003E0000020
03E000002003E000002003E000004003E000004003E000004003E000004003E00000C003
E00000C003E00001C003E00001C003E00003C003E000078003E0001F8007E0007F80FFFF
FFFF80FFFFFFFF8023317DB029>76 D<007F802001FFE02007C078600F001C601E0006E0
3C0003E0380001E0780000E0700000E070000060F0000060F0000060F0000020F0000020
F0000020F8000020F80000007C0000007E0000003F0000003FC000001FF800000FFF8000
07FFF00003FFFC0000FFFF00000FFF800000FFC000001FE0000007E0000003F0000001F0
000000F0000000F8000000F88000007880000078800000788000007880000078C0000078
C0000070E00000F0E00000E0F00000E0F80001C0EC000380C7000700C1F01E00807FFC00
800FF0001D337CB125>83 D<7FFFFFFFFFE07FFFFFFFFFE07E000F8007E078000F8001E0
70000F8000E060000F80006040000F80002040000F800020C0000F800030C0000F800030
80000F80001080000F80001080000F80001080000F80001080000F80001080000F800010
00000F80000000000F80000000000F80000000000F80000000000F80000000000F800000
00000F80000000000F80000000000F80000000000F80000000000F80000000000F800000
00000F80000000000F80000000000F80000000000F80000000000F80000000000F800000
00000F80000000000F80000000000F80000000000F80000000000F80000000000F800000
00000F80000000000F80000000000F80000000000F80000000000F80000000000F800000
00001FC00000000FFFFF8000000FFFFF80002C317EB030>I<00FE00000303C0000C00E0
0010007000100038003C003C003E001C003E001E003E001E0008001E0000001E0000001E
0000001E00000FFE0000FC1E0003E01E000F801E001F001E003E001E003C001E007C001E
00F8001E04F8001E04F8001E04F8003E04F8003E0478003E047C005E043E008F080F0307
F003FC03E01E1F7D9E21>97 D<001FC00000F0300001C00C00078002000F0002000E000F
001E001F003C001F003C001F007C00040078000000F8000000F8000000F8000000F80000
00F8000000F8000000F8000000F8000000F8000000780000007C0000003C0000003C0000
801E0000800E0001000F0001000780020001C00C0000F03000001FC000191F7E9E1D>99
D<000000F00000001FF00000001FF000000001F000000000F000000000F000000000F000
000000F000000000F000000000F000000000F000000000F000000000F000000000F00000
0000F000000000F000000000F000000000F000000000F000000FC0F000007030F00001C0
0CF000038002F000070001F0000E0001F0001E0000F0003C0000F0003C0000F0007C0000
F000780000F000780000F000F80000F000F80000F000F80000F000F80000F000F80000F0
00F80000F000F80000F000780000F000780000F0007C0000F0003C0000F0003C0000F000
1E0000F0000E0001F000070002F000038004F00001C008F80000F030FF80001FC0FF8021
327EB125>I<003F800000E0E0000380380007003C000E001E001E001E001C000F003C00
0F007C000F0078000F8078000780F8000780F8000780FFFFFF80F8000000F8000000F800
0000F8000000F8000000F8000000780000007C0000003C0000003C0000801E0000800E00
01000F0002000700020001C00C0000F03000001FC000191F7E9E1D>I<0780000000FF80
000000FF800000000F800000000780000000078000000007800000000780000000078000
000007800000000780000000078000000007800000000780000000078000000007800000
000780000000078000000007800000000780FE00000783078000078C03C000079001E000
07A001E00007A000F00007C000F00007C000F000078000F000078000F000078000F00007
8000F000078000F000078000F000078000F000078000F000078000F000078000F0000780
00F000078000F000078000F000078000F000078000F000078000F000078000F000078000
F000078000F000078000F0000FC001F800FFFC1FFF80FFFC1FFF8021327EB125>104
D<0F001F801F801F801F800F000000000000000000000000000000000000000000000007
807F807F800F800780078007800780078007800780078007800780078007800780078007
800780078007800780078007800780078007800FC0FFF8FFF80D307EAF12>I<0780FF80
FF800F800780078007800780078007800780078007800780078007800780078007800780
078007800780078007800780078007800780078007800780078007800780078007800780
0780078007800780078007800780078007800FC0FFFCFFFC0E327EB112>108
D<0780FE0000FF83078000FF8C03C0000F9001E00007A001E00007A000F00007C000F000
07C000F000078000F000078000F000078000F000078000F000078000F000078000F00007
8000F000078000F000078000F000078000F000078000F000078000F000078000F0000780
00F000078000F000078000F000078000F000078000F000078000F000078000F0000FC001
F800FFFC1FFF80FFFC1FFF80211F7E9E25>110 D<001FC00000F0780001C01C00070007
000F0007801E0003C01C0001C03C0001E03C0001E0780000F0780000F0780000F0F80000
F8F80000F8F80000F8F80000F8F80000F8F80000F8F80000F8F80000F8780000F07C0001
F03C0001E03C0001E01E0003C01E0003C00F00078007800F0001C01C0000F07800001FC0
001D1F7E9E21>I<0783E0FF8418FF887C0F907C07A07C07A03807C00007C00007C00007
800007800007800007800007800007800007800007800007800007800007800007800007
80000780000780000780000780000780000780000FC000FFFE00FFFE00161F7E9E19>
114 D<01FC100E03301800F0300070600030E00030E00010E00010E00010F00010F80000
7E00003FF0001FFF000FFFC003FFE0003FF00001F80000F880003C80003C80001CC0001C
C0001CE0001CE00018F00038F00030CC0060C301C080FE00161F7E9E1A>I<0040000040
0000400000400000400000C00000C00000C00001C00001C00003C00007C0000FC0001FFF
E0FFFFE003C00003C00003C00003C00003C00003C00003C00003C00003C00003C00003C0
0003C00003C00003C00003C00003C00003C01003C01003C01003C01003C01003C01003C0
1003C01001C02001E02000E0400078C0001F00142C7FAB19>I<078000F000FF801FF000
FF801FF0000F8001F000078000F000078000F000078000F000078000F000078000F00007
8000F000078000F000078000F000078000F000078000F000078000F000078000F0000780
00F000078000F000078000F000078000F000078000F000078000F000078000F000078001
F000078001F000078001F000038002F00003C004F00001C008F800007030FF80001FC0FF
80211F7E9E25>I<FFF800FF80FFF800FF800FC0007C000780003800078000300003C000
200003C000200001E000400001E000400001F000400000F000800000F000800000780100
000078010000007C010000003C020000003C020000001E040000001E040000001F040000
000F080000000F080000000790000000079000000007D000000003E000000003E0000000
01C000000001C000000001C0000000008000000000800000000100000000010000000001
0000000002000000000200000000040000007004000000F80C000000F808000000F81000
0000702000000030400000001F80000000212D7F9E23>121 D<3FFFFF3E001E38001E30
003C2000782000786000F04001E04001E04003C0400780000780000F00001E00001E0000
3C0000780000780000F00101E00101E00103C0010780010780030F00021E00021E00063C
000678000E78007EFFFFFE181F7E9E1D>I E end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 300dpi
TeXDict begin
%%PaperSize: A4

%%EndSetup
%%Page: 1 1
1 0 bop 485 328 a Ft(Lazy)21 b(F)-6 b(unctional)22 b(State)g(Threads)
448 448 y Fs(John)17 b(Launc)o(h)o(bury)f(and)h(Simon)e(L)i(P)o(eyton)f
(Jones)696 506 y(Univ)o(ersit)o(y)e(of)i(Glasgo)o(w)186
565 y(Email:)j Fr({simonpj,jl)o(}@d)o(cs)o(.gl)o(asg)o(ow.)o(ac)o(.uk)l
Fs(.)j(Phone:)f(+44-41-330-)q(450)q(0)766 662 y(Marc)o(h)16
b(10,)g(1994)-120 776 y Fq(Abstract)-120 869 y Fp(Some)e(algorithms)g
(mak)o(e)g(critical)h(in)o(ternal)h(use)g(of)f(up)q(datable)-120
919 y(state,)k(ev)o(en)g(though)e(their)h(external)h(sp)q
(eci\014cation)f(is)g(purely)-120 969 y(functional.)f(Based)d(on)f
(earlier)h(w)o(ork)f(on)g(monads,)f(w)o(e)i(presen)o(t)-120
1019 y(a)22 b(w)o(a)o(y)g(of)f(securely)j(encapsulating)e(stateful)h
(computations)-120 1069 y(that)11 b(manipulate)e(m)o(ultiple,)g(named,)
i(m)o(utable)e(ob)r(jects,)k(in)e(the)-120 1119 y(con)o(text)k(of)e(a)g
(non-strict,)h(purely-functional)f(language.)-120 1198
y(The)j(securit)o(y)g(of)e(the)i(encapsulation)f(is)g(assured)h(b)o(y)f
(the)h(t)o(yp)q(e)-120 1248 y(system,)28 b(using)e(parametricit)o(y)m
(.)52 b(In)o(triguingly)m(,)26 b(this)g(para-)-120 1298
y(metricit)o(y)9 b(requires)i(the)f(pro)o(vision)f(of)h(a)f(\(single\))
h(constan)o(t)h(with)-120 1347 y(a)j(rank-2)f(p)q(olymorphic)f(t)o(yp)q
(e.)-120 1427 y Fo(A)h(shorter)f(version)h(of)f(this)h(p)n(ap)n(er)g
(app)n(e)n(ars)g(in)f(the)h(Pr)n(o)n(c)n(e)n(e)n(dings)-120
1476 y(of)i(the)h(A)o(CM)f(Confer)n(enc)n(e)g(on)h(Pr)n(o)n(gr)n
(amming)e(L)n(anguages)j(De-)-120 1526 y(sign)e(and)h(Implementation)f
(\(PLDI\),)g(Orlando,)f(June)i(1994.)-120 1686 y Fq(1)56
b(In)n(tro)r(duction)-120 1780 y Fp(Purely)12 b(functional)g(programmi)
o(ng)d(languages)i(allo)o(w)g(man)o(y)f(al-)-120 1830
y(gorithms)k(to)i(b)q(e)g(expressed)i(v)o(ery)e(concisely)m(,)g(but)f
(there)i(are)f(a)-120 1880 y(few)i(algorithms)d(in)i(whic)o(h)h
(in-place)f(up)q(datable)h(state)g(seems)-120 1929 y(to)23
b(pla)o(y)g(a)g(crucial)g(role.)46 b(F)m(or)23 b(these)i(algorithms,)e
(purely-)-120 1979 y(functional)12 b(languages,)h(whic)o(h)g(lac)o(k)g
(up)q(datable)h(state,)g(app)q(ear)-120 2029 y(to)9 b(b)q(e)i(inheren)o
(tly)e(ine\016cien)o(t)h(\(P)o(onder,)h(McGeer)f(&)g(Ng)f([1988]\).)
-120 2108 y(T)m(ak)o(e,)31 b(for)d(example,)j(algorithms)26
b(based)j(on)f(the)h(use)h(of)-120 2158 y(incremen)o(tally-mo)q
(di\014ed)8 b(hash)j(tables,)g(where)h(lo)q(okups)f(are)g(in-)-120
2208 y(terlea)o(v)o(ed)16 b(with)f(the)h(insertion)f(of)g(new)g(items.)
21 b(Similarly)m(,)12 b(the)-120 2258 y(union/\014nd)19
b(algorithm)e(relies)k(for)e(its)h(e\016ciency)h(on)f(the)g(set)-120
2308 y(represen)o(tations)f(b)q(eing)e(simpli\014ed)e(eac)o(h)j(time)d
(the)j(structure)-120 2357 y(is)d(examined.)20 b(Lik)o(ewise,)15
b(man)o(y)e(graph)i(algorithms)e(require)i(a)-120 2407
y(dynamically)h(c)o(hanging)i(structure)j(in)e(whic)o(h)g(sharing)f(is)
h(ex-)-120 2457 y(plicit,)13 b(so)h(that)g(c)o(hanges)g(are)g(visible)g
(non-lo)q(cally)m(.)-120 2536 y(There)i(is,)e(furthermore,)h(one)g
(absolutely)f(una)o(v)o(oidable)f(use)j(of)-120 2586
y(state)k(in)f(ev)o(ery)i(functional)d(program:)28 b(input/output.)35
b(The)-120 2636 y(plain)12 b(fact)h(of)f(the)h(matter)f(is)h(that)g
(the)g(whole)g(purp)q(ose)h(of)e(run-)-120 2686 y(ning)g(a)h(program,)e
(functional)h(or)h(otherwise,)g(is)g(to)g(mak)o(e)e(some)-120
2736 y(side)22 b(e\013ect)h(on)f(the)g(w)o(orld)f(|)g(an)h(up)q
(date-in-place,)h(if)e(y)o(ou)-120 2785 y(please.)33
b(In)19 b(man)o(y)e(programs)g(these)k(I/O)d(e\013ects)j(are)e(rather)
-120 2835 y(complex,)d(in)o(v)o(olving)e(in)o(terlea)o(v)o(ed)j(reads)g
(from)e(and)i(writes)g(to)951 776 y(the)d(w)o(orld)g(state.)951
855 y(W)m(e)h(use)i(the)g(term)f(\\stateful")f(to)h(describ)q(e)i
(computations)d(or)951 905 y(algorithms)d(in)i(whic)o(h)g(the)h
(programmer)d(really)h(do)q(es)i(w)o(an)o(t)f(to)951
955 y(manipulate)k(\(up)q(datable\))j(state.)38 b(What)20
b(has)h(b)q(een)g(lac)o(king)951 1004 y(un)o(til)d(no)o(w)h(is)g(a)g
(clean)h(w)o(a)o(y)f(of)f(describing)i(suc)o(h)g(algorithms)951
1054 y(in)13 b(a)g(functional)f(language)g(|)h(esp)q(ecially)g(a)g
(non-strict)h(one)f(|)951 1104 y(without)d(thro)o(wing)g(a)o(w)o(a)o(y)
f(the)i(main)d(virtues)k(of)d(functional)h(lan-)951 1154
y(guages:)17 b(indep)q(endence)d(of)d(order)i(of)e(ev)n(aluation)f
(\(the)j(Ch)o(urc)o(h-)951 1204 y(Rosser)j(prop)q(ert)o(y\),)g(referen)
o(tial)g(transparency)m(,)g(non-strict)g(se-)951 1254
y(man)o(tics,)c(and)i(so)g(on.)951 1333 y(In)19 b(this)f(pap)q(er)i(w)o
(e)f(describ)q(e)h(a)f(w)o(a)o(y)f(to)g(express)j(stateful)e(al-)951
1383 y(gorithms)13 b(in)h(non-strict,)h(purely-functional)f(languages.)
21 b(The)951 1433 y(approac)o(h)11 b(is)f(a)h(dev)o(elopmen)o(t)f(of)g
(our)h(earlier)g(w)o(ork)g(on)g(monadic)951 1482 y(I/O)21
b(and)f(state)i(encapsulation)f(\(Launc)o(h)o(bury)g([1993];)h(P)o(ey-)
951 1532 y(ton)13 b(Jones)g(&)h(W)m(adler)e([1993]\),)f(but)i(with)f
(an)h(imp)q(ortan)o(t)e(tec)o(h-)951 1582 y(nical)21
b(inno)o(v)n(ation:)33 b(w)o(e)23 b(use)g(parametric)e(p)q(olymorphism)
e(to)951 1632 y(ac)o(hiev)o(e)13 b(safe)g(encapsulation)g(of)f(state.)
19 b(It)13 b(turns)h(out)f(that)g(this)951 1682 y(allo)o(ws)c(m)o
(utable)h(ob)r(jects)i(to)f(b)q(e)g(named)f(without)h(losing)f(safet)o
(y)m(,)951 1731 y(and)g(it)h(also)f(allo)o(ws)g(input/output)g(to)h(b)q
(e)g(smo)q(othly)f(in)o(tegrated)951 1781 y(with)j(other)i(state)g
(mainpulatio)o(n.)951 1861 y(The)i(other)g(imp)q(ortan)o(t)e(feature)i
(of)f(this)g(pap)q(er)i(is)e(that)h(it)f(de-)951 1910
y(scrib)q(es)h(a)e(complete)g(system,)h(and)f(one)h(that)g(is)f
(implemen)o(ted)951 1960 y(in)10 b(the)i(Glasgo)o(w)d(Hask)o(ell)i
(compiler)f(and)g(freely)i(a)o(v)n(ailable.)j(The)951
2010 y(system)e(has)h(the)h(follo)o(wing)c(prop)q(erties:)992
2121 y Fn(\017)21 b Fp(Complete)11 b(referen)o(tial)j(transparency)g
(is)e(main)o(tained.)k(A)o(t)1034 2171 y(\014rst)g(it)e(is)h(not)g
(clear)g(what)g(this)g(statemen)o(t)g(means:)k(ho)o(w)1034
2221 y(can)11 b(a)g(stateful)h(computation)d(b)q(e)j(said)f(to)g(b)q(e)
h(referen)o(tially)1034 2271 y(transparen)o(t?)23 b(T)m(o)14
b(b)q(e)i(more)e(precise,)j(a)e(stateful)g(compu-)1034
2321 y(tation)c(is)h(a)g Fo(state)h(tr)n(ansformer)p
Fp(,)e(that)h(is,)g(a)g(function)g(from)1034 2371 y(an)j(initial)e
(state)k(to)e(a)g(\014nal)g(state.)23 b(It)15 b(is)g(lik)o(e)g(a)g
(\\script",)1034 2420 y(detailing)j(the)i(actions)g(to)f(b)q(e)h(p)q
(erformed)f(on)h(its)f(input)1034 2470 y(state.)f(Lik)o(e)13
b(an)o(y)g(other)h(function,)f(it)g(is)g(quite)h(p)q(ossible)f(to)1034
2520 y(apply)d(a)h(single)f(stateful)i(computation)d(to)i(more)f(than)h
(one)1034 2570 y(input)i(state.)1034 2636 y(So,)i(a)g(state)h
(transformer)e(is)h(a)g(pure)h(function.)22 b(But,)16
b(b)q(e-)1034 2686 y(cause)d(w)o(e)g(guaran)o(tee)g(that)f(the)h(state)
h(is)e(used)h(in)f(a)g(single-)1034 2736 y(threaded)17
b(w)o(a)o(y)m(,)d(the)j(\014nal)e(state)h(can)g(b)q(e)g(constructed)i
(b)o(y)1034 2785 y(mo)q(difying)9 b(the)k(input)f(state)h
Fo(in-plac)n(e)p Fp(.)k(This)12 b(e\016cien)o(t)h(im-)1034
2835 y(plemen)o(tation)j(resp)q(ects)21 b(the)d(purely-functional)f
(seman-)920 2960 y(1)p eop
%%Page: 2 2
2 1 bop -37 195 a Fp(tics)11 b(of)f(the)i(state-transformer)e
(function,)h(so)g(all)e(the)i(usual)-37 245 y(tec)o(hniques)18
b(for)e(reasoning)g(ab)q(out)g(functional)f(programs)-37
295 y(con)o(tin)o(ue)j(to)g(w)o(ork.)30 b(Similarl)o(y)m(,)15
b(stateful)j(programs)f(can)-37 345 y(b)q(e)d(exp)q(osed)h(to)f(the)h
(full)d(range)i(of)g(program)e(transforma-)-37 394 y(tions)i(applied)f
(b)o(y)g(a)h(compiler,)d(with)j(no)f(sp)q(ecial)h(cases)h(or)-37
444 y(side)f(conditions.)-78 535 y Fn(\017)20 b Fp(The)11
b(programmer)e(has)i(complete)f(con)o(trol)h(o)o(v)o(er)g(where)h(in-)
-37 584 y(place)j(up)q(dates)g(are)g(used)g(and)g(where)g(they)g(are)g
(not.)20 b(F)m(or)-37 634 y(example,)15 b(there)j(is)e(no)g(complex)f
(analysis)g(to)h(determine)-37 684 y(when)11 b(an)f(arra)o(y)h(is)f
(used)h(in)f(a)h(single-threaded)g(w)o(a)o(y)m(.)16 b(Since)-37
734 y(the)11 b(viabilit)o(y)e(of)h(the)h(en)o(tire)h(program)d(ma)o(y)g
(b)q(e)i(predicated)-37 784 y(on)g(the)h(use)g(of)f(in-place)g(up)q
(dates,)h(the)g(programmer)d(m)o(ust)-37 833 y(b)q(e)21
b(con\014den)o(t)f(in,)h(and)f(b)q(e)g(able)g(to)g(reason)h(ab)q(out,)g
(the)-37 883 y(outcome.)-78 974 y Fn(\017)f Fp(Mutable)15
b(ob)r(jects)i(can)f(b)q(e)g Fo(name)n(d)p Fp(.)23 b(This)15
b(abilit)o(y)f(sounds)-37 1023 y(inno)q(cuous)f(enough,)f(but)h(once)g
(an)g(ob)r(ject)g(can)g(b)q(e)g(named)-37 1073 y(its)j(use)h(cannot)f
(b)q(e)g(con)o(trolled)g(as)g(readily)m(.)23 b(Y)m(et)16
b(naming)-37 1123 y(is)f(imp)q(ortan)o(t.)j(F)m(or)d(example,)e(it)h
(giv)o(es)h(us)g(the)g(abilit)o(y)e(to)-37 1173 y(manipulate)c(m)o
(ultiple)g(m)o(utable)g(ob)r(jects)j(sim)o(ultaneously)m(.)-78
1263 y Fn(\017)20 b Fp(Input/output)h(tak)o(es)f(its)g(place)h(as)f(a)g
(sp)q(ecialised)h(form)-37 1313 y(of)e(stateful)g(computation.)33
b(Indeed,)22 b(the)e(t)o(yp)q(e)g(of)e(I/O-)-37 1363
y(p)q(erforming)11 b(computations)g(is)h(an)g(instance)h(of)f(the)h
(\(more)-37 1413 y(p)q(olymorphic\))i(t)o(yp)q(e)i(of)f(stateful)g
(computations.)25 b(Along)-37 1462 y(with)14 b(I/O)g(comes)f(the)i
(abilit)o(y)d(to)i(call)g(imp)q(erativ)o(e)e(pro)q(ce-)-37
1512 y(dures)j(written)f(in)g(other)g(languages.)-78
1603 y Fn(\017)20 b Fp(It)12 b(is)g(p)q(ossible)h(to)f
Fo(enc)n(apsulate)h Fp(stateful)f(computations)f(so)-37
1652 y(that)k(they)f(app)q(ear)h(to)g(the)g(rest)g(of)f(the)h(program)e
(as)h(pure)-37 1702 y(\(stateless\))d(functions)f(whic)o(h)f(are)h
Fo(guar)n(ante)n(e)n(d)g Fp(b)o(y)f(the)h(t)o(yp)q(e)-37
1752 y(system)15 b(to)h(ha)o(v)o(e)f(no)h(in)o(teractions)g(whatev)o
(er)g(with)g(other)-37 1802 y(computations,)c(whether)j(stateful)f(or)g
(otherwise)h(\(except)-37 1852 y(via)e(the)i(v)n(alues)e(of)g(argumen)o
(ts)h(and)f(results,)i(of)e(course\).)-37 1922 y(Complete)22
b(safet)o(y)h(is)g(main)o(tained)e(b)o(y)i(this)g(encapsula-)-37
1972 y(tion.)16 b(A)11 b(program)f(ma)o(y)f(con)o(tain)h(an)h
(arbitrary)g(n)o(um)o(b)q(er)f(of)-37 2021 y(stateful)19
b(sub-computations,)g(eac)o(h)h(sim)o(ultaneously)d(ac-)-37
2071 y(tiv)o(e,)11 b(without)f(concern)j(that)d(a)h(m)o(utable)e(ob)r
(ject)j(from)d(one)-37 2121 y(migh)o(t)j(b)q(e)i(m)o(utated)f(b)o(y)h
(another.)-78 2211 y Fn(\017)20 b Fp(Stateful)c(computations)f(can)h
(ev)o(en)h(b)q(e)g(p)q(erformed)f Fo(lazily)-37 2261
y Fp(without)21 b(losing)f(safet)o(y)m(.)40 b(F)m(or)21
b(example,)h(supp)q(ose)g(that)-37 2311 y(stateful)c(depth-\014rst)i
(searc)o(h)f(of)f(a)g(graph)g(returns)i(a)e(list)-37
2361 y(of)f(v)o(ertices)j(in)d(depth-\014rst)j(order.)31
b(If)17 b(the)i(consumer)f(of)-37 2411 y(this)e(list)g(only)f(ev)n
(aluates)h(the)h(\014rst)f(few)g(elemen)o(ts)g(of)g(the)-37
2460 y(list,)d(then)h(only)f(enough)h(of)f(the)i(stateful)e
(computation)f(is)-37 2510 y(executed)k(to)e(pro)q(duce)h(those)f
(elemen)o(ts.)-120 2647 y Fq(2)56 b(Ov)n(erview)-120
2736 y Fp(This)15 b(section)g(in)o(tro)q(duces)h(the)f(k)o(ey)g(ideas)g
(of)f(our)h(approac)o(h)f(to)-120 2785 y(stateful)h(computation.)20
b(W)m(e)14 b(b)q(egin)h(with)g(the)h(programmer's-)-120
2835 y(ey)o(e-view.)951 195 y Fm(2.1)47 b(State)15 b(transformers)951
278 y Fp(A)f(v)n(alue)g(of)g(t)o(yp)q(e)h Fl(\(ST)21
b(s)g(a\))14 b Fp(is)h(a)f(computation)e(whic)o(h)j(trans-)951
328 y(forms)f(a)i(state)g(indexed)g(b)o(y)g(t)o(yp)q(e)g
Fl(s)p Fp(,)f(and)h(deliv)o(ers)g(a)f(v)n(alue)h(of)951
378 y(t)o(yp)q(e)e Fl(a)p Fp(.)k(Y)m(ou)13 b(can)h(think)g(of)f(it)h
(as)g(a)f(b)q(o)o(x,)g(lik)o(e)g(this:)1119 686 y @beginspecial
@setspecial
%%BeginDocument: basic-st.ps
/$F2psDict 32 dict def 
$F2psDict begin
	$F2psDict /mtrx matrix put

	end
	/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
	/$F2psEnd {$F2psEnteredState restore end} def
	%%EndProlog

$F2psBegin
1 setlinecap 1 setlinejoin
-9 -1 translate
0.000000 64.000000 translate 0.900 -0.900 scale
1.000 setlinewidth
newpath 149 57 moveto 189 57 lineto stroke
stroke
newpath 181.000 55.000 moveto 189.000 57.000 lineto 181.000 59.000 lineto stroke
newpath 149 67 moveto 149 27 lineto 69 27 lineto 69 67 lineto closepath stroke
newpath 29 57 moveto 69 57 lineto stroke
stroke
newpath 61.000 55.000 moveto 69.000 57.000 lineto 61.000 59.000 lineto stroke
newpath 149 37 moveto 169 37 lineto 169 17 lineto stroke
stroke
newpath 167.000 25.000 moveto 169.000 17.000 lineto 171.000 25.000 lineto stroke
/Times-Roman findfont 12.000 scalefont setfont
156 69 moveto 
1 -1 scale
(State out) gsave  0.000 rotate show grestore 1 -1 scale
/Times-Roman findfont 12.000 scalefont setfont
9 70 moveto 
1 -1 scale
(State in) gsave  0.000 rotate show grestore 1 -1 scale
/Times-Roman findfont 12.000 scalefont setfont
150 13 moveto 
1 -1 scale
(Result) gsave  0.000 rotate show grestore 1 -1 scale
$F2psEnd
%%EndDocument
 @endspecial 951 766 a(Notice)18 b(that)f(this)h(is)f(a)g
(purely-functional)g(accoun)o(t)h(of)f(state.)951 815
y(The)12 b(\\)p Fl(ST)o Fp(")g(stands)g(for)g(\\a)f(state)h
(transformer",)f(whic)o(h)h(w)o(e)g(tak)o(e)951 865 y(to)20
b(b)q(e)h(synon)o(ymous)e(with)h(\\a)g(stateful)g(computation":)29
b(the)951 915 y(computation)17 b(is)h(seen)i(as)f(transforming)e(one)i
(state)g(in)o(to)f(an-)951 965 y(other.)24 b(\(Of)16
b(course,)h(it)f(is)f(our)h(in)o(ten)o(tion)g(that)f(the)i(new)f(state)
951 1015 y(will)d(actually)h(b)q(e)h(constructed)i(b)o(y)e(mo)q
(difying)d(the)j(old)f(one)h(in)951 1064 y(place,)e(a)f(matter)g(to)h
(whic)o(h)g(w)o(e)g(return)h(in)e(Section)i(6.\))j(A)c(state)951
1114 y(transformer)k(is)h(a)f(\014rst-class)i(v)n(alue:)26
b(it)17 b(can)h(b)q(e)h(passed)g(to)e(a)951 1164 y(function,)12
b(returned)k(as)d(a)g(result,)h(stored)g(in)f(a)g(data)g(structure,)951
1214 y(duplicated)h(freely)m(,)f(and)h(so)g(on.)951 1289
y(A)20 b(state)h(transformer)f(can)g(ha)o(v)o(e)g(other)h(inputs)f(b)q
(esides)h(the)951 1335 y(state;)12 b(if)f(so,)h(it)f(will)f(ha)o(v)o(e)
h(a)h(functional)e(t)o(yp)q(e.)18 b(It)11 b(can)h(also)f(ha)o(v)o(e)951
1380 y(man)o(y)f(results,)j(b)o(y)f(returning)h(them)f(in)f(a)h(tuple.)
18 b(F)m(or)12 b(example,)951 1426 y(a)g(state)i(transformer)f(with)f
(t)o(w)o(o)h(inputs)g(of)f(t)o(yp)q(e)i Fl(Int)o Fp(,)f(and)f(t)o(w)o
(o)951 1472 y(results)j(of)e(t)o(yp)q(e)h Fl(Int)g Fp(and)f
Fl(Bool)p Fp(,)g(w)o(ould)g(ha)o(v)o(e)h(the)g(t)o(yp)q(e:)990
1547 y Fk(Int)k(->)h(Int)g(->)g(ST)f(s)i(\(Int,Bool)o(\))951
1626 y Fp(Its)14 b(picture)h(migh)o(t)d(lo)q(ok)h(lik)o(e)g(this:)1125
1951 y @beginspecial @setspecial
%%BeginDocument: multi-input-st.ps
/$F2psDict 32 dict def 
$F2psDict begin
	$F2psDict /mtrx matrix put

	end
	/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
	/$F2psEnd {$F2psEnteredState restore end} def
	%%EndProlog

$F2psBegin
1 setlinecap 1 setlinejoin
-9 0 translate
0.000000 68.000000 translate 0.900 -0.900 scale
1.000 setlinewidth
newpath 144 63 moveto 184 63 lineto stroke
stroke
newpath 176.000 61.000 moveto 184.000 63.000 lineto 176.000 65.000 lineto stroke
newpath 144 73 moveto 144 33 lineto 64 33 lineto 64 73 lineto closepath stroke
newpath 24 63 moveto 64 63 lineto stroke
stroke
newpath 56.000 61.000 moveto 64.000 63.000 lineto 56.000 65.000 lineto stroke
newpath 43 23 moveto 43 41 lineto 64 41 lineto stroke
stroke
newpath 56.000 39.000 moveto 64.000 41.000 lineto 56.000 43.000 lineto stroke
newpath 24 23 moveto 24 48 lineto 64 48 lineto stroke
stroke
newpath 56.000 46.000 moveto 64.000 48.000 lineto 56.000 50.000 lineto stroke
newpath 144 48 moveto 184 48 lineto 184 22 lineto stroke
stroke
newpath 182.000 30.000 moveto 184.000 22.000 lineto 186.000 30.000 lineto stroke
newpath 144 41 moveto 164 41 lineto 164 21 lineto stroke
stroke
newpath 162.000 29.000 moveto 164.000 21.000 lineto 166.000 29.000 lineto stroke
/Times-Roman findfont 12.000 scalefont setfont
152 75 moveto 
1 -1 scale
(State out) gsave  0.000 rotate show grestore 1 -1 scale
/Times-Roman findfont 12.000 scalefont setfont
9 75 moveto 
1 -1 scale
(State in) gsave  0.000 rotate show grestore 1 -1 scale
/Times-Roman findfont 12.000 scalefont setfont
18 16 moveto 
1 -1 scale
(Inputs) gsave  0.000 rotate show grestore 1 -1 scale
/Times-Roman findfont 12.000 scalefont setfont
158 15 moveto 
1 -1 scale
(Results) gsave  0.000 rotate show grestore 1 -1 scale
$F2psEnd
%%EndDocument
 @endspecial 951 2026 a(The)d(simplest)e(state)i(transformer,)f
Fl(returnST)o Fp(,)g(simply)f(deliv)o(ers)951 2072 y(a)13
b(v)n(alue)h(without)f(a\013ecting)h(the)h(state)f(at)g(all:)990
2147 y Fk(returnST)j(::)h(a)i(->)e(ST)h(s)g(a)951 2227
y Fp(The)14 b(picture)h(for)e Fl(returnST)g Fp(is)g(lik)o(e)g(this:)
1119 2481 y @beginspecial @setspecial
%%BeginDocument: return-st.ps
/$F2psDict 32 dict def 
$F2psDict begin
	$F2psDict /mtrx matrix put

	end
	/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
	/$F2psEnd {$F2psEnteredState restore end} def
	%%EndProlog

$F2psBegin
1 setlinecap 1 setlinejoin
-5 2 translate
0.000000 51.000000 translate 0.900 -0.900 scale
1.000 setlinewidth
newpath 142 44 moveto 182 44 lineto stroke
stroke
newpath 174.000 42.000 moveto 182.000 44.000 lineto 174.000 46.000 lineto stroke
newpath 142 54 moveto 142 14 lineto 62 14 lineto 62 54 lineto closepath stroke
newpath 22 44 moveto 62 44 lineto stroke
stroke
newpath 54.000 42.000 moveto 62.000 44.000 lineto 54.000 46.000 lineto stroke
newpath 41 4 moveto 41 22 lineto 62 22 lineto stroke
stroke
newpath 54.000 20.000 moveto 62.000 22.000 lineto 54.000 24.000 lineto stroke
newpath 142 22 moveto 162 22 lineto 162 2 lineto stroke
stroke
newpath 160.000 10.000 moveto 162.000 2.000 lineto 164.000 10.000 lineto stroke
newpath 62 44 moveto 142 44 lineto stroke
stroke
newpath 63 22 moveto 142 22 lineto stroke
stroke
/Times-Roman findfont 12.000 scalefont setfont
151 58 moveto 
1 -1 scale
(State out) gsave  0.000 rotate show grestore 1 -1 scale
/Times-Roman findfont 12.000 scalefont setfont
5 57 moveto 
1 -1 scale
(State in) gsave  0.000 rotate show grestore 1 -1 scale
$F2psEnd
%%EndDocument
 @endspecial 951 2619 a Fm(2.2)47 b(References)951 2698
y Fp(What,)16 b(then,)g(is)g(a)g(\\state"?)25 b(P)o(art)17
b(of)e(ev)o(ery)i(state)g(is)f(a)g(\014nite)951 2744
y(mapping)h(from)h Fo(r)n(efer)n(enc)n(es)h Fp(to)g(v)n(alues.)35
b(\(A)20 b(state)g(ma)o(y)e(also)951 2790 y(ha)o(v)o(e)e(other)i(comp)q
(onen)o(ts,)e(as)h(w)o(e)g(will)f(see)i(in)e(Section)h(4.\))27
b(A)951 2835 y(reference)13 b(can)f(b)q(e)g(though)o(t)f(of)f(as)i(the)
g(name)e(of)g(\(or)i(address)g(of)s(\))920 2960 y(2)p
eop
%%Page: 3 3
3 2 bop -120 195 a Fp(a)15 b Fo(variable)p Fp(,)g(an)g(up)q(datable)g
(lo)q(cation)g(in)f(the)i(state)g(capable)g(of)-120 241
y(holding)g(a)g(v)n(alue.)27 b(The)17 b(follo)o(wing)e(primitiv)o(e)g
(op)q(erations)i(are)-120 286 y(pro)o(vided:)-81 362
y Fk(newVar)57 b(::)19 b(a)g(->)g(ST)g(s)g(\(MutVar)e(s)i(a\))-81
407 y(readVar)37 b(::)19 b(MutVar)e(s)i(a)g(->)g(ST)g(s)g(a)-81
453 y(writeVar)e(::)i(MutVar)e(s)i(a)g(->)g(a)g(->)g(ST)g(s)g(\(\))-120
532 y Fp(The)27 b(function)g Fl(newVar)f Fp(tak)o(es)h(an)f(initial)f
(v)n(alue,)k(of)e(t)o(yp)q(e)-120 582 y Fl(a)p Fp(,)40
b(sa)o(y)m(,)g(and)35 b(deliv)o(ers)h(a)f(state)h(transformer)f(of)g(t)
o(yp)q(e)-120 632 y Fl(ST)21 b(s)h(\(MutVar)e(s)i(a\))o
Fp(.)37 b(When)20 b(this)g(is)g(applied)f(to)h(a)g(state,)-120
682 y(it)13 b(allo)q(cates)g(a)h(fresh)g(reference)i(|)d(that)g(is,)g
(one)h(curren)o(tly)g(not)-120 732 y(used)h(in)f(the)h(state.)21
b(It)14 b(augmen)o(ts)g(the)h(state)g(with)f(a)g(mapping)-120
781 y(from)d(this)i(reference)i(to)d(the)h(supplied)g(v)n(alue,)f(and)g
(returns)j(the)-120 831 y(reference)h(along)d(with)h(the)g(mo)q
(di\014ed)f(state.)-120 911 y(The)j(t)o(yp)q(e)g Fl(MutVar)k(s)i(a)15
b Fp(is)g(the)h(t)o(yp)q(e)g(of)e(references)19 b(allo)q(cated)-120
960 y(from)8 b(a)i(store)g(of)f(t)o(yp)q(e)i Fl(s)p Fp(,)f(con)o
(taining)e(a)i(v)n(alue)f(of)g(t)o(yp)q(e)h Fl(a)p Fp(.)17
b(Notice)-120 1010 y(that,)g(unlik)o(e)e(SML's)i Fl(Ref)e
Fp(t)o(yp)q(es,)j(for)e(example,)f Fl(MutVar)o Fp(s)i(are)-120
1060 y(parameterised)g(o)o(v)o(er)f(the)h(t)o(yp)q(e)g(of)f(the)h
(state)g(as)g(w)o(ell)f(as)g(o)o(v)o(er)-120 1110 y(the)i(t)o(yp)q(e)g
(of)f(the)i(v)n(alue)d(to)i(whic)o(h)f(the)i(reference)h(is)d(mapp)q
(ed)-120 1160 y(b)o(y)f(the)h(state.)27 b(\(W)m(e)16
b(use)i(the)f(name)e Fl(MutVar)g Fp(for)i(the)g(t)o(yp)q(e)g(of)-120
1209 y(references,)c(rather)e(than)f Fl(Ref)o Fp(,)h(sp)q(eci\014cally)
f(to)g(a)o(v)o(oid)f(confusion)-120 1259 y(with)14 b(SML.\))-120
1339 y(Giv)o(en)20 b(a)g(reference)j Fl(v)o Fp(,)f Fl(readVar)e(v)g
Fp(is)g(a)g(state)i(transformer)-120 1388 y(whic)o(h)17
b(lea)o(v)o(es)f(the)i(state)f(unc)o(hanged,)h(but)f(uses)h(the)f
(state)g(to)-120 1438 y(map)12 b(the)j(reference)h(to)e(its)g(v)n
(alue.)-120 1518 y(The)20 b(function)f Fl(writeVar)f
Fp(transforms)g(the)i(state)h(so)e(that)h(it)-120 1567
y(maps)12 b(the)i(giv)o(en)f(reference)i(to)f(a)f(new)g(v)n(alue.)18
b(Notice)13 b(that)h(the)-120 1617 y(reference)20 b(itself)e
Fo(do)n(es)h(not)g(change)p Fp(;)h(it)e(is)f(the)i Fo(state)f
Fp(whic)o(h)f(is)-120 1667 y(mo)q(di\014ed.)g Fl(writeVar)12
b Fp(deliv)o(ers)i(a)g(result)g(of)g(the)g(unit)g(t)o(yp)q(e)g
Fl(\(\))p Fp(,)-120 1717 y(a)c(t)o(yp)q(e)h(whic)o(h)f(only)g(has)g
(one)h(v)n(alue)f(\(apart)g(from)f(b)q(ottom\),)g(also)-120
1767 y(written)k Fl(\(\))o Fp(.)k(A)c(state)f(transformer)g(of)f(t)o
(yp)q(e)i Fl(ST)21 b(s)h(\(\))11 b Fp(is)h(useful)-120
1816 y(only)h(for)h(its)g(e\013ect)h(on)f(the)g(state.)-120
1936 y Fm(2.3)48 b(Comp)q(osing)14 b(state)h(transformers)-120
2012 y Fp(State)e(transformers)f(can)h(b)q(e)g(comp)q(osed)f(in)g
(sequence,)j(to)d(form)-120 2058 y(a)i(larger)f(state)i(transformer,)e
(using)h Fl(thenST)n Fp(,)g(whic)o(h)g(has)g(t)o(yp)q(e)-81
2133 y Fk(thenST)k(::)g(ST)h(s)g(a)h(->)f(\(a)f(->)h(ST)g(s)g(b\))g(->)
g(ST)g(s)g(b)-120 2212 y Fp(The)14 b(picture)h(for)f
Fl(\(s1)21 b(`thenST`)f(s2\))13 b Fp(is)h(lik)o(e)f(this)717
2197 y Fj(1)736 2212 y Fp(:)-37 2433 y @beginspecial
@setspecial
%%BeginDocument: then-st.ps
/$F2psDict 32 dict def 
$F2psDict begin
	$F2psDict /mtrx matrix put

	end
	/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
	/$F2psEnd {$F2psEnteredState restore end} def
	%%EndProlog

$F2psBegin
1 setlinecap 1 setlinejoin
-3 1 translate
0.000000 43.000000 translate 0.900 -0.900 scale
1.000 setlinewidth
newpath 194 21 moveto 217 21 lineto 217 1 lineto stroke
stroke
newpath 215.000 9.000 moveto 217.000 1.000 lineto 219.000 9.000 lineto stroke
newpath 108 34 moveto 136 34 lineto stroke
stroke
newpath 128.000 32.000 moveto 136.000 34.000 lineto 128.000 36.000 lineto stroke
newpath 108 41 moveto 108 11 lineto 51 11 lineto 51 41 lineto closepath stroke
newpath 21 34 moveto 51 34 lineto stroke
stroke
newpath 43.000 32.000 moveto 51.000 34.000 lineto 43.000 36.000 lineto stroke
newpath 194 41 moveto 194 11 lineto 136 11 lineto 136 41 lineto closepath stroke
newpath 108 20 moveto 136 20 lineto stroke
stroke
newpath 128.000 18.000 moveto 136.000 20.000 lineto 128.000 22.000 lineto stroke
newpath 193 33 moveto 223 33 lineto stroke
stroke
newpath 215.000 31.000 moveto 223.000 33.000 lineto 215.000 35.000 lineto stroke
newpath 204 48 moveto 39 48 lineto 39 6 lineto 204 6 lineto closepath stroke
/Times-Roman findfont 8.000 scalefont setfont
3 44 moveto 
1 -1 scale
(State in) gsave  0.000 rotate show grestore 1 -1 scale
/Courier findfont 8.000 scalefont setfont
73 30 moveto 
1 -1 scale
(s1) gsave  0.000 rotate show grestore 1 -1 scale
/Courier findfont 8.000 scalefont setfont
159 30 moveto 
1 -1 scale
(s2) gsave  0.000 rotate show grestore 1 -1 scale
/Times-Roman findfont 8.000 scalefont setfont
207 44 moveto 
1 -1 scale
(State out) gsave  0.000 rotate show grestore 1 -1 scale
$F2psEnd
%%EndDocument
 @endspecial -120 2513 a(Notice)g(that)g(the)h(t)o(w)o(o)e
(computations)g(m)o(ust)g(manipulate)e(state)-120 2562
y(indexed)15 b(b)o(y)g(the)g(same)f(t)o(yp)q(e,)h Fl(s)p
Fp(.)20 b(Notice)15 b(also)f(that)h Fl(thenST)e Fp(is)-120
2612 y(inheren)o(tly)g(sequen)o(tial,)g(b)q(ecause)i(the)e(state)h
(consumed)f(b)o(y)g(the)-120 2662 y(second)f(computation)d(is)h(that)h
(pro)q(duced)h(b)o(y)f(the)g(\014rst.)18 b(Indeed,)-120
2712 y(w)o(e)e(often)h(refer)g(to)f(a)g(state)h(transformer)e(as)i(a)f
Fo(thr)n(e)n(ad)p Fp(,)g(in)o(v)o(ok-)-120 2762 y(ing)c(the)i(picture)g
(of)e(a)h(series)i(of)d(primitiv)o(e)f(stateful)i(op)q(erations)p
-120 2797 412 2 v -74 2823 a Fi(1)-56 2835 y Fh(Bac)o(kquotes)8
b(are)j(Hask)o(ell's)g(notation)e(for)i(an)g(in\014x)f(op)q(erator.)951
195 y Fp(\\threaded)19 b(together")h(b)o(y)e(a)g(state)i(passed)f(from)
e(one)i(to)f(the)951 245 y(next.)951 320 y(Putting)e(together)i(what)e
(w)o(e)h(ha)o(v)o(e)f(so)h(far,)f(here)i(is)e(a)g(\\pro)q(ce-)951
366 y(dure")e(whic)o(h)g(sw)o(aps)g(the)h(con)o(ten)o(ts)g(of)e(t)o(w)o
(o)g(v)n(ariables:)990 441 y Fk(swap)18 b(::)h(MutVar)e(s)i(a)h(->)e
(MutVar)g(s)h(a)g(->)g(ST)g(s)g(\(\))990 487 y(swap)f(v)h(w)h(=)f
(readVar)e(v)195 b(`thenST`)17 b(\(\\a)h(->)1206 532
y(readVar)f(w)195 b(`thenST`)17 b(\(\\b)h(->)1206 578
y(writeVar)e(v)j(b)137 b(`thenST`)17 b(\(\\_)h(->)1206
624 y(writeVar)e(w)j(a\)\)\))951 703 y Fp(The)13 b(syn)o(tax)f(needs)i
(a)e(little)g(explanation.)k(The)d(form)e(\\)p Fl(\\a->e)n
Fp(")951 753 y(is)16 b(Hask)o(ell's)g(syn)o(tax)h(for)f(a)g(lam)o(b)q
(da)f(abstraction.)26 b(The)17 b(b)q(o)q(dy)951 803 y(of)d(the)i(lam)o
(b)q(da)d(abstraction,)i Fl(e)p Fp(,)f(extends)j(as)e(far)g(to)g(the)g
(righ)o(t)951 852 y(as)c(p)q(ossible.)18 b(So)11 b(in)h(the)g(co)q(de)g
(for)f Fl(swap)p Fp(,)g(the)h(second)h(argumen)o(t)951
902 y(of)e(the)i(\014rst)g Fl(thenST)e Fp(extends)j(all)d(the)i(w)o(a)o
(y)e(from)g(the)h Fl(\\a)g Fp(to)g(the)951 952 y(end)g(of)g(the)g
(function.)18 b(That's)11 b(just)i(as)f(y)o(ou)f(w)o(ould)h(exp)q(ect:)
18 b(the)951 1002 y(second)e(argumen)o(t)e(of)h(a)g Fl(thenST)f
Fp(is)h(mean)o(t)f(to)h(b)q(e)h(a)f(function.)951 1052
y(The)20 b(\\)p Fl(_)o Fp(")g(in)f(the)h(second-last)h(line)e(is)g(a)h
(wild-card)f(pattern,)951 1101 y(whic)o(h)g(matc)o(hes)g(an)o(y)g(v)n
(alue.)35 b(W)m(e)19 b(use)h(it)f(here)i(b)q(ecause)g(the)951
1151 y Fl(writeVar)12 b Fp(do)q(es)j(not)e(return)i(a)f(v)n(alue)f(of)h
(in)o(terest.)951 1226 y(The)19 b(paren)o(theses)j(can)d(b)q(e)h
(omitted,)f(since)h(in\014x)f(op)q(erations)951 1272
y(bind)e(less)h(tigh)o(tly)f(than)g(the)i(lam)o(b)q(da)c(abstraction)j
(op)q(erator.)951 1318 y(F)m(urthermore,)12 b(w)o(e)i(pro)o(vide)e(a)h
(sp)q(ecial)g(form)e(of)i Fl(thenST)o Fp(,)f(called)951
1363 y Fl(thenST_)n Fp(,)i(with)f(the)i(follo)o(wing)c(t)o(yp)q(e)j
(signature:)990 1439 y Fk(thenST_)j(::)i(ST)g(s)g(\(\))g(->)f(ST)h(s)h
(b)f(->)g(ST)f(s)i(b)951 1514 y Fp(Unlik)o(e)15 b Fl(thenST)f
Fp(its)i(second)g(argumen)o(t)f(is)g(not)g(a)h(function,)f(so)951
1559 y(the)g(lam)o(b)q(da)d(isn't)i(required.)21 b(So)15
b(w)o(e)g(can)f(rewite)i Fl(swap)e Fp(as)g(fol-)951 1605
y(lo)o(ws:)990 1680 y Fk(swap)k(::)h(MutVar)e(s)i(a)h(->)e(MutVar)g(s)h
(a)g(->)g(ST)g(s)g(\(\))990 1726 y(swap)f(v)h(w)h(=)f(readVar)e(v)195
b(`thenST`)17 b(\\a)i(->)1206 1772 y(readVar)e(w)195
b(`thenST`)17 b(\\b)i(->)1206 1817 y(writeVar)d(v)j(b)137
b(`thenST_`)1206 1863 y(writeVar)16 b(w)j(a)951 1942
y Fp(When)g Fl(swap)i(v)g(w)e Fp(is)g(executed)h(in)f(a)f(state)i
(thread)g(\(that)f(is,)951 1992 y(when)c(giv)o(en)g(a)f(state\),)i
Fl(v)f Fp(is)g(dereferenced,)i(returning)f(a)f(v)n(alue)951
2042 y(whic)o(h)i(is)g(b)q(ound)g(to)h Fl(a)o Fp(.)29
b(Similarl)o(y)14 b(the)k(v)n(alue)f(of)g Fl(w)g Fp(is)g(b)q(ound)951
2092 y(to)c Fl(b)p Fp(.)18 b(New)d(v)n(alues)e(are)i(then)f(written)g
(in)o(to)g(the)g(state)h(at)f(these)951 2142 y(lo)q(cations,)f(these)i
(v)n(alues)f(b)q(eing)f Fl(b)h Fp(and)g Fl(a)f Fp(resp)q(ectiv)o(ely)m
(.)951 2217 y(In)18 b(addition)e(to)i Fl(thenST)f Fp(and)g
Fl(returnST)o Fp(,)h(w)o(e)g(ha)o(v)o(e)g(found)f(it)951
2262 y(useful)22 b(to)g(in)o(tro)q(duce)h(one)f(other)h(\\plum)o(bing")
c(com)o(binator,)951 2308 y Fl(fixST)o Fp(.)f(It)c(has)g(the)g(t)o(yp)q
(e)990 2383 y Fk(fixST)k(::)h(\(a)f(->)h(ST)g(s)g(a\))g(->)g(ST)g(s)g
(a)951 2463 y Fp(and)10 b(the)h(usual)f(knot-t)o(ying)g(seman)o(tics,)g
(whic)o(h)g(w)o(e)h(depict)g(th)o(us:)1117 2713 y @beginspecial
@setspecial
%%BeginDocument: fix-st.ps
/$F2psDict 32 dict def 
$F2psDict begin
	$F2psDict /mtrx matrix put

	end
	/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
	/$F2psEnd {$F2psEnteredState restore end} def
	%%EndProlog

$F2psBegin
1 setlinecap 1 setlinejoin
-3 12 translate
0.000000 50.000000 translate 0.900 -0.900 scale
1.000 setlinewidth
newpath 142 22 moveto 142 22 lineto stroke
stroke
newpath 142 67 moveto 142 27 lineto 62 27 lineto 62 67 lineto closepath stroke
newpath 21 56 moveto 61 56 lineto stroke
stroke
newpath 53.000 54.000 moveto 61.000 56.000 lineto 53.000 58.000 lineto stroke
newpath 142 56 moveto 182 56 lineto stroke
stroke
newpath 174.000 54.000 moveto 182.000 56.000 lineto 174.000 58.000 lineto stroke
newpath 125 61 moveto 125 40 lineto 80 40 lineto 80 61 lineto closepath stroke
newpath 61 56 moveto 80 56 lineto stroke
stroke
newpath 72.000 54.000 moveto 80.000 56.000 lineto 72.000 58.000 lineto stroke
newpath 125 56 moveto 142 56 lineto stroke
stroke
newpath 125 46 moveto 162 46 lineto 162 13 lineto stroke
stroke
newpath 160.000 21.000 moveto 162.000 13.000 lineto 164.000 21.000 lineto stroke
newpath 132 46 moveto 132 33 lineto 69 33 lineto 69 45 lineto 80 45 lineto stroke
stroke
newpath 72.000 43.000 moveto 80.000 45.000 lineto 72.000 47.000 lineto stroke
/Times-Roman findfont 12.000 scalefont setfont
150 68 moveto 
1 -1 scale
(State out) gsave  0.000 rotate show grestore 1 -1 scale
/Times-Roman findfont 12.000 scalefont setfont
3 68 moveto 
1 -1 scale
(State in) gsave  0.000 rotate show grestore 1 -1 scale
/Courier findfont 12.000 scalefont setfont
96 53 moveto 
1 -1 scale
(s) gsave  0.000 rotate show grestore 1 -1 scale
$F2psEnd
%%EndDocument
 @endspecial 951 2792 a(This)j(is)f(the)i(only)e(p)q(oin)o(t)h(that)g
(relies)g(on)g(laziness.)19 b(Ev)o(erything)920 2960
y(3)p eop
%%Page: 4 4
4 3 bop -120 195 a Fp(else)12 b(in)f(the)h(pap)q(er)h(is)e(directly)h
(applicable)e(to)i(strict)g(languages.)-120 314 y Fm(2.4)48
b(Encapsulation)-120 390 y Fp(So)16 b(far)g(w)o(e)h(ha)o(v)o(e)f(b)q
(een)i(able)e(to)g(com)o(bine)f(state)i(transformers)-120
435 y(to)d(mak)o(e)f(larger)h(state)h(transformers,)f(but)g(ho)o(w)g
(can)g(w)o(e)h(mak)o(e)-120 481 y(a)g(state)h(transformer)f(part)h(of)e
(a)h(larger)h(program)d(whic)o(h)i(do)q(es)-120 527 y(not)e(manipulate)
e(state)j(at)f(all?)k(What)c(w)o(e)g(need)h(is)f(a)g(function,)-120
572 y Fl(runST)o Fp(,)g(with)h(a)f(t)o(yp)q(e)i(something)d(lik)o(e)i
(the)g(follo)o(wing:)-81 648 y Fk(runST)k(::)h(ST)g(s)g(a)g(->)g(a)-120
727 y Fp(The)f(idea)g(is)f(that)h Fl(runST)f Fp(tak)o(es)h(a)f(state)i
(transformer)e(as)h(its)-120 777 y(argumen)o(t,)12 b(conjures)i(up)f
(an)g(initial)f(empt)o(y)g(state,)i(applies)f(the)-120
827 y(state)j(transformer)f(to)g(it,)g(and)g(returns)i(the)f(result)h
(while)d(dis-)-120 876 y(carding)k(the)h(\014nal)f(state.)32
b(The)18 b(initial)f(state)i(is)f(\\empt)o(y")f(in)-120
926 y(the)e(sense)i(that)e(no)f(references)k(ha)o(v)o(e)c(b)q(een)i
(allo)q(cated)f(in)f(it)g(b)o(y)-120 976 y Fl(newVar)o
Fp(;)f(it)h(is)f(the)i(empt)o(y)e(mapping.)-120 1051
y(But)i(there)g(seems)f(to)g(b)q(e)g(a)g(terrible)h(\015a)o(w:)j(what)c
(is)f(to)h(prev)o(en)o(t)-120 1097 y(a)i(reference)i(from)c(one)i
(thread)h(b)q(eing)f(used)h(in)e(another?)25 b(F)m(or)-120
1143 y(example:)-81 1218 y Fk(let)19 b(v)g(=)g(runST)f(\(newVar)f
(True\))-81 1263 y(in)-81 1309 y(runST)h(\(readVar)e(v\))-120
1388 y Fp(Here,)d(the)f(reference)j(allo)q(cated)c(in)g(the)i(\014rst)f
Fl(runST)o Fp('s)g(thread)g(is)-120 1438 y(used)i(inside)g(the)g
(second)g Fl(runST)o Fp(.)k(Doing)12 b(so)h(w)o(ould)g(b)q(e)h(a)f
(great)-120 1488 y(mistak)o(e,)i(b)q(ecause)k(reads)e(in)f(one)h
(thread)g(are)g(not)g(sequenced)-120 1538 y(with)10 b(resp)q(ect)j(to)d
(writes)h(in)f(the)h(other,)g(and)g(hence)h(the)f(result)g(of)-120
1588 y(the)16 b(program)d(w)o(ould)h(dep)q(end)i(on)f(the)g(ev)n
(aluation)f(order)h(used)-120 1637 y(to)c(execute)j(it.)j(It)11
b(seems)h(at)f(\014rst)i(that)e(a)g(run)o(time)g(c)o(hec)o(k)h(migh)o
(t)-120 1687 y(b)q(e)e(required)g(to)f(ensure)i(that)f(references)i
(are)e(only)e(dereferenced)-120 1737 y(in)16 b(the)h(thread)h(whic)o(h)
e(allo)q(cated)g(them.)26 b(Unfortunately)16 b(this)-120
1787 y(w)o(ould)c(b)q(e)h(exp)q(ensiv)o(e.)19 b(Ev)o(en)13
b(w)o(orse,)g(our)g(exp)q(erience)i(suggests)-120 1837
y(that)c(it)g(is)h(surprisingly)f(tric)o(ky)g(to)g(implemen)o(t)e(suc)o
(h)j(a)f(c)o(hec)o(k)i(|)-120 1887 y(the)i(ob)o(vious)f(ideas)h(fail)e
(as)i(it)f(then)h(b)q(ecomes)g(p)q(ossible)g(to)f(test)-120
1936 y(the)g Fo(identity)f Fp(of)f(a)h(thread)h(so)f(losing)f(referen)o
(tial)i(transparency)-120 1986 y(|)g(and)g(w)o(e)h(still)e(do)h(not)h
(kno)o(w)f(a)g(straigh)o(tforw)o(ard)f(w)o(a)o(y)h(to)g(do)-120
2036 y(so.)-120 2115 y(This)c(problem)f(brings)i(us)f(to)h(the)g(main)d
(tec)o(hnical)j(con)o(tribution)-120 2165 y(of)h(the)h(pap)q(er:)19
b(the)13 b(di\016culties)f(with)h Fl(runST)e Fp(can)i(all)f(b)q(e)h
(solv)o(ed)-120 2215 y(b)o(y)20 b(giving)f(it)h(a)g(more)f(sp)q
(eci\014c)j(t)o(yp)q(e.)38 b(The)21 b(t)o(yp)q(e)g(giv)o(en)f(for)-120
2265 y Fl(runST)11 b Fp(ab)q(o)o(v)o(e)g(is)h(implicitly)d(univ)o
(ersally)i(quan)o(ti\014ed)g(o)o(v)o(er)h(b)q(oth)-120
2315 y Fl(s)18 b Fp(and)g Fl(a)p Fp(.)31 b(If)18 b(w)o(e)h(put)f(in)g
(the)h(quan)o(ti\014cation)e(explicitly)m(,)h(the)-120
2364 y(t)o(yp)q(e)c(migh)o(t)e(b)q(e)j(written:)89 2450
y Fl(runST)21 b(::)g Fn(8)p Fl(s,a.)g(\(ST)g(s)h(a)f(->)h(a\))-120
2536 y Fp(No)o(w,)d(what)g(w)o(e)g Fo(r)n(e)n(al)r(ly)f
Fp(w)o(an)o(t)h(to)f(sa)o(y)h(is)g(that)g Fl(runST)e
Fp(should)-120 2586 y(only)12 b(b)q(e)h(applied)e(to)i(a)f(state)h
(transformer)f(whic)o(h)g(uses)h Fl(newVar)-120 2636
y Fp(to)18 b(create)h(an)o(y)f(references)i(whic)o(h)e(are)h(used)f(in)
g(that)g(thread.)-120 2686 y(T)m(o)i(put)g(it)g(another)h(w)o(a)o(y)m
(,)g(the)g(argumen)o(t)e(of)h Fl(runST)f Fp(should)-120
2736 y(not)14 b(mak)o(e)g(an)o(y)g(assumptions)f(ab)q(out)i(what)f(has)
h(already)f(b)q(een)-120 2785 y(allo)q(cated)f(in)h(the)g(initial)e
(state.)19 b(That)14 b(is,)g Fl(runST)f Fo(should)j(work)-120
2835 y(r)n(e)n(gar)n(d)r(less)e(of)h(what)g(initial)g(state)g(it)g(is)g
(given)p Fp(.)k(So)14 b(the)h(t)o(yp)q(e)g(of)951 195
y Fl(runST)e Fp(should)g(b)q(e:)1137 284 y Fl(runST)21
b(::)g Fn(8)p Fl(a.)h(\()p Fn(8)p Fl(s.)f(ST)g(s)h(a\))f(->)h(a)951
374 y Fp(This)11 b(is)g(not)f(a)h(Hindley-Milner)g(t)o(yp)q(e,)g(b)q
(ecause)i(the)f(quan)o(ti\014ers)951 424 y(are)19 b(not)f(all)g(at)g
(the)h(top)g(lev)o(el;)h(it)e(is)h(an)f(example)f(of)h(rank-2)951
473 y(p)q(olymorphism)10 b(\(McCrac)o(k)o(en)15 b([1984]\).)951
549 y(Wh)o(y)h(do)q(es)i(this)f(t)o(yp)q(e)h(prev)o(en)o(t)f(the)h
(\\capture")g(of)e(references)951 594 y(from)j(one)j(thread)g(in)o(to)e
(another?)41 b(Consider)22 b(our)f(example)951 640 y(again)990
715 y Fk(let)d(v)i(=)f(runST)f(\(newVar)e(True\))990
761 y(in)990 806 y(runST)i(\(readVar)e(v\))951 886 y
Fp(In)f(the)h(last)f(line)g(a)g(reference)j Fl(v)d Fp(is)g(used)i(in)e
(a)g(stateful)g(thread)951 936 y Fl(\(readVar)20 b(v\))o
Fp(,)11 b(ev)o(en)f(though)g(the)g(latter)g(is)g(supp)q(osedly)g
(encap-)951 985 y(sulated)15 b(b)o(y)g Fl(runST)o Fp(.)22
b(This)15 b(is)g(where)h(the)g(t)o(yp)q(e)g(c)o(hec)o(k)o(er)g(comes)
951 1035 y(in)o(to)10 b(its)h(o)o(wn.)16 b(During)10
b(t)o(yp)q(ec)o(hec)o(king,)i(the)f(t)o(yp)q(e)h(of)e
Fl(readVar)20 b(v)951 1085 y Fp(will)d(dep)q(end)i(on)f(the)h(t)o(yp)q
(e)g(of)e Fl(v)h Fp(so,)h(for)f(example,)g(the)g(t)o(yp)q(e)951
1135 y(deriv)n(ation)13 b(will)f(con)o(tain)i(a)f(judgemen)o(t)g(of)g
(the)i(form:)1000 1224 y Fn(f)p Fg(:)7 b(:)g(:)e(;)i
Fl(v)k Fp(:)g Fl(MutVar)21 b(s)g(Bool)o Fn(g)12 b(`)g
Fl(readVar)20 b(v)11 b Fp(:)g Fl(ST)22 b(s)f(Bool)951
1314 y Fp(No)o(w)14 b(in)h(order)g(to)g(apply)f Fl(runST)g
Fp(w)o(e)h(ha)o(v)o(e)f(to)h(b)q(e)h(able)e(to)h(gen-)951
1363 y(eralise)h(the)h(t)o(yp)q(e)f(of)g Fl(readVar)k(v)c
Fp(with)f(resp)q(ect)k(to)d Fl(s)o Fp(,)g(but)h(w)o(e)951
1413 y(cannot)f(as)g Fl(s)g Fp(is)f(free)i(in)f(the)g(t)o(yp)q(e)h(en)o
(vironmen)o(t:)k Fl(readVar)f(v)951 1463 y Fp(simply)12
b(do)q(es)i(not)g(ha)o(v)o(e)g(t)o(yp)q(e)g Fn(8)p Fl(s.ST)21
b(s)h(Bool)o Fp(.)951 1538 y(What)15 b(ab)q(out)h(the)h(other)g(w)o(a)o
(y)e(round?)25 b(Let's)16 b(c)o(hec)o(k)h(that)f(the)951
1584 y(t)o(yp)q(e)e(of)f Fl(runST)g Fp(prev)o(en)o(ts)j(the)e(\\escap)q
(e")h(of)e(references)k(from)12 b(a)951 1630 y(thread.)18
b(Consider)d(the)f(de\014nition)g(of)f Fl(v)h Fp(ab)q(o)o(v)o(e:)990
1705 y Fk(v)19 b(=)g(runST)f(\(newVar)f(True\))951 1784
y Fp(Here,)d Fl(v)f Fp(is)g(a)h(reference)h(that)f(is)f(allo)q(cated)g
(within)g(the)h(thread,)951 1834 y(but)23 b(then)h(released)h(to)e(the)
h(outside)g(w)o(orld.)45 b(Again,)25 b(con-)951 1884
y(sider)14 b(what)f(happ)q(ens)h(during)f(t)o(yp)q(ec)o(hec)o(king.)19
b(The)14 b(expression)951 1933 y Fl(\(newVar)20 b(True\))13
b Fp(has)g(t)o(yp)q(e)h Fl(ST)22 b(s)f(\(MutVar)f(s)i(Bool\))o
Fp(,)13 b(whic)o(h)951 1983 y(will)32 b(generalise)i(nicely)f(to)g
Fn(8)p Fl(s.ST)21 b(s)h(\(MutVar)e(s)i(Bool\))n Fp(.)951
2033 y(Ho)o(w)o(ev)o(er,)13 b(this)h(still)f(do)q(es)h(not)f(matc)o(h)g
(the)h(t)o(yp)q(e)g(of)f Fl(runST)o Fp(.)18 b(T)m(o)951
2083 y(see)f(this,)g(consider)g(the)g(instance)g(of)f
Fl(runST)g Fp(with)g Fl(a)g Fp(instan)o(ti-)951 2133
y(ated)e(to)g Fl(MutVar)20 b(s)i(Bool)o Fp(:)1042 2211
y Fl(runST)40 b(::)h(\()p Fn(8)p Fl(s'.)21 b(ST)h(s')f(\(MutVar)g(s)g
(Bool\)\))1277 2261 y(->)h(MutVar)e(s)i(Bool)951 2349
y Fp(W)m(e)9 b(ha)o(v)o(e)g(had)h(to)f(rename)g(the)h(b)q(ound)g(v)n
(ariable)e Fl(s)h Fp(in)g(the)i(t)o(yp)q(e)f(of)951 2398
y Fl(runST)i Fp(to)g(a)o(v)o(oid)g(it)h(erroneously)g(capturing)g(the)h
Fl(s)e Fp(in)h(the)g(t)o(yp)q(e)951 2448 y Fl(MutVar)20
b(s)i(Bool)o Fp(.)f(The)16 b(argumen)o(t)e(t)o(yp)q(e)h(no)o(w)g(do)q
(esn't)g(matc)o(h)951 2498 y Fl(v)p Fp('s)f(t)o(yp)q(e.)19
b(Indeed)c(there)g(is)f(no)g(instance)h(of)f Fl(runST)f
Fp(whic)o(h)h(can)951 2548 y(b)q(e)g(applied)g(to)f Fl(v)p
Fp(.)951 2623 y(Just)19 b(to)f(demonstrate)g(that)g(the)h(t)o(yp)q(e)f
(of)g Fl(runST)f Fp(do)q(es)i(allo)o(w)951 2669 y(some)13
b(nice)h(examples)f(here)i(is)f(one)g(that)g(is)g(\014ne:)990
2744 y Fk(f)19 b(::)g(MutVar)e(s)j(a)f(->)g(MutVar)e(s)i(a)990
2790 y(f)g(v)g(=)h(runST)d(\(newVar)g(v)i(`thenST`)e(\\w->)1245
2835 y(readVar)g(w\))920 2960 y Fp(4)p eop
%%Page: 5 5
5 4 bop -120 195 a Fp(where)16 b Fl(v)g Fp(is)f(a)g(reference)j(from)13
b(some)i(arbitrary)g(state)h(thread.)-120 245 y(Because)11
b Fl(v)f Fp(is)f(not)h(accessed,)i(its)e(state)g(t)o(yp)q(e)g(do)q(es)h
(not)e(a\013ect)i(the)-120 295 y(lo)q(cal)e(state)h(t)o(yp)q(e)g(of)g
(the)g(short)g(thread)g(\(whic)o(h)g(is)g(in)f(fact)g(totally)-120
345 y(p)q(olymorphic)17 b(in)h Fl(v)p Fp(\).)32 b(Th)o(us)19
b(it)f(is)g(\014ne)h(for)g(an)f(encapsulated)-120 394
y(state)c(thread)g(to)g(manipulate)d(references)16 b(from)c(other)i
(threads)-120 444 y(so)g(long)f(as)h(no)g(attempt)f(is)g(made)g(to)h
(dereference)j(them.)-120 524 y(In)c(short,)g(b)o(y)g(the)h(exp)q
(edien)o(t)g(of)e(giving)g Fl(runST)g Fp(a)g(rank-2)h(p)q(oly-)-120
573 y(morphic)18 b(t)o(yp)q(e)j(w)o(e)f(can)g(enforce)h(the)f(safe)g
(encapsulation)g(of)-120 623 y(state)14 b(transformers.)j(More)d
(details)f(on)f(this)h(are)h(giv)o(en)e(in)g(Sec-)-120
673 y(tion)19 b(5.2,)h(where)h(w)o(e)g(sho)o(w)e(that)h
Fl(runST)o Fp('s)g(t)o(yp)q(e)h(can)f(b)q(e)g(ac-)-120
723 y(commo)q(dated)11 b(with)h(only)g(a)h(minor)d(enhancemen)o(t)k(to)
e(the)i(t)o(yp)q(e)-120 773 y(c)o(hec)o(k)o(er.)-120
909 y Fq(3)56 b(Arra)n(y)19 b(references)-120 994 y Fp(So)h(far)g(w)o
(e)g(ha)o(v)o(e)g(in)o(tro)q(duced)h(the)g(idea)f(of)f(references)k
(\(Sec-)-120 1039 y(tion)18 b(2.2\),)g(whic)o(h)h(can)f(b)q(e)i(though)
o(t)e(of)g(as)g(a)h(single)f(m)o(utable)-120 1085 y(\\b)q(o)o(x".)25
b(Sometimes,)15 b(though)h(w)o(e)h(w)o(an)o(t)f(to)g(up)q(date)h(an)f
(arra)o(y)-120 1131 y(whic)o(h)j(should)f(b)q(e)i(though)o(t)f(of)f(as)
h(man)o(y)e(\\b)q(o)o(xes",)i(eac)o(h)h(in-)-120 1176
y(dep)q(enden)o(tly)d(m)o(utable.)k(F)m(or)15 b(that)h(w)o(e)f(pro)o
(vide)h(primitiv)o(es)d(to)-120 1222 y(allo)q(cate,)18
b(read)g(and)f(write)h(elemen)o(ts)f(of)g(arra)o(ys.)29
b(They)18 b(ha)o(v)o(e)-120 1268 y(the)c(follo)o(wing)e(t)o(yp)q(es)222
1252 y Fj(2)241 1268 y Fp(:)-81 1343 y Fk(newArr)76 b(::)19
b(Ix)g(i)g(=>)g(\(i,i\))f(->)h(elt)331 1388 y(->)g(ST)g(s)g(\(MutArr)e
(s)i(i)g(elt\))-81 1434 y(readArr)56 b(::)19 b(Ix)g(i)g(=>)g(MutArr)e
(s)j(i)f(elt)f(->)h(i)331 1480 y(->)g(ST)g(s)g(elt)-81
1525 y(writeArr)36 b(::)19 b(Ix)g(i)g(=>)g(MutArr)e(s)j(i)f(elt)f(->)h
(i)g(->)g(elt)331 1571 y(->)g(ST)g(s)g(\(\))-81 1617
y(freezeArr)d(::)j(Ix)g(i)g(=>)g(MutArr)e(s)j(i)f(elt)331
1662 y(->)g(ST)g(s)g(\(Array)e(i)j(elt\))-120 1742 y
Fp(Lik)o(e)25 b(references,)31 b Fl(newArr)24 b Fp(allo)q(cates)i(a)f
(new)h(arra)o(y)g(whose)-120 1791 y(b)q(ounds)17 b(are)h(giv)o(en)e(b)o
(y)h(its)g(\014rst)h(argumen)o(t.)26 b(The)17 b(second)h(ar-)-120
1841 y(gumen)o(t)g(is)h(a)g(v)n(alue)f(to)h(whic)o(h)g(eac)o(h)h(lo)q
(cation)e(is)h(initialised.)-120 1891 y(The)g(state)h(transformer)e
(returns)j(a)d(reference)j(to)e(the)g(arra)o(y)m(,)-120
1941 y(whic)o(h)14 b(w)o(e)f(call)g(an)h Fo(arr)n(ay)g(r)n(efer)n(enc)n
(e)p Fp(.)j(The)d(functions)g Fl(readArr)-120 1991 y
Fp(and)i Fl(writeArr)f Fp(do)h(what)g(their)g(names)g(suggest.)26
b(The)16 b(result)-120 2041 y(is)e(unde\014ned)h(if)e(the)h(index)g(is)
g(out)g(of)f(b)q(ounds.)-120 2120 y(The)25 b(in)o(teresting)h(function)
e(is)h Fl(freezeArr)e Fp(whic)o(h)i(turns)g(a)-120 2170
y Fl(MutArr)16 b Fp(in)o(to)i(a)f(standard)h(Hask)o(ell)g(arra)o(y)m(.)
29 b(The)18 b(latter)g(is)f(an)-120 2220 y(imm)o(utabl)o(e)11
b(v)n(alue,)h(whic)o(h)h(can)g(certainly)g(b)q(e)g(returned)i(from)c(a)
-120 2269 y(stateful)k(thread,)g(and)f(hence)i(lac)o(ks)f(the)g
(parameterisation)e(on)-120 2319 y(the)f(state)g Fl(s)p
Fp(.)17 b(Op)q(erationally)11 b(sp)q(eaking,)g Fl(freezeArr)f
Fp(tak)o(es)i(the)-120 2369 y(name)e(of)h(an)g(arra)o(y)h(as)f(its)h
(argumen)o(t,)e(lo)q(oks)h(it)g(up)h(in)f(the)h(state,)-120
2419 y(and)17 b(returns)h(a)f(cop)o(y)g(of)f(what)h(it)f(\014nds,)i
(along)d(with)i(the)g(un-)-120 2469 y(altered)f(state.)23
b(The)16 b(cop)o(y)g(is)f(required)h(in)f(case)h(a)f(subsequen)o(t)-120
2518 y Fl(writeArr)c Fp(c)o(hanges)i(the)g(v)n(alue)f(of)g(the)h(arra)o
(y)f(in)g(the)h(state,)g(but)p -120 2560 412 2 v -74
2587 a Fi(2)-56 2599 y Fh(The)f(\\)p Ff(Ix)k(i)h(=>)p
Fh(")12 b(part)f(of)h(the)f(t)o(yp)q(e)g(is)h(just)f(Hask)o(ell's)g(w)o
(a)o(y)h(of)g(sa)o(ying)-120 2638 y(that)i(the)g(t)o(yp)q(e)g
Ff(a)g Fh(m)o(ust)g(b)q(e)h(an)f(index)f(t)o(yp)q(e;)j(that)d(is,)j
(there)d(m)o(ust)h(b)q(e)h(a)-120 2677 y(mapping)8 b(of)i(a)g(v)n(alue)
g(of)g(t)o(yp)q(e)f Ff(a)h Fh(to)g(an)g(o\013set)g(in)g(a)g(linear)f
(arra)o(y)m(.)14 b(In)o(tegers,)-120 2717 y(c)o(haracters)d(and)i
(tuples)f(are)g(automatically)e(in)j(the)g Ff(Ix)g Fh(class,)g(but)g
(arra)o(y)-120 2756 y(indexing)d(is)i(not)g(restricted)e(to)i(these.)17
b(An)o(y)c(t)o(yp)q(e)e(for)h(whic)o(h)g(a)g(mapping)-120
2796 y(to)g Ff(Int)f Fh(is)i(pro)o(vided)c(\(via)j(an)g
Ff(instance)d Fh(declaration)g(for)j(the)g(class)f Ff(Ix)h
Fh(at)-120 2835 y(that)e(t)o(yp)q(e\))h(will)g(do.)951
195 y Fp(it)j(is)g(sometimes)e(p)q(ossible)j(to)f(a)o(v)o(oid)e(the)j
(o)o(v)o(erhead)g(of)e(making)951 245 y(the)h(cop)o(y)g(\(see)h
(Section)g(6.2.3\).)951 324 y(W)m(e)i(giv)o(e)g(t)o(w)o(o)h(examples)e
(of)i(m)o(utable)e(arra)o(ys)i(in)f(action,)h(but)951
374 y(lea)o(v)o(e)13 b(the)i(larger)f(one)g(to)g(the)g(App)q(endix.)951
493 y Fm(3.1)47 b(Hask)o(ell)15 b(Arra)o(ys)951 569 y
Fp(Using)f(m)o(utable)e(arra)o(ys,)i(w)o(e)g(shall)g(de\014ne)h(the)f
(Hask)o(ell)g(\\prim-)951 614 y(itiv)o(e")f Fl(accumArray)n
Fp(,)h(a)h(high)e(lev)o(el)i(arra)o(y)f(op)q(eration)g(with)g(the)951
660 y(t)o(yp)q(e)1030 645 y Fj(3)1049 660 y Fp(:)990
735 y Fk(accumArray)i(::)j(Ix)f(i)i(=>)e(\(a->b->a\))f(->)h(a)i(->)f
(\(i,i\))1421 781 y(->)g([\(i,b\)])e(->)i(Array)f(i)h(a)951
860 y Fp(The)f(result)g(of)f(a)h(call)e Fl(\(accumArray)k(f)h(x)h(bnds)
f(ivs\))c Fp(is)g(an)951 910 y(arra)o(y)11 b(whose)h(size)g(is)f
(determined)g(b)o(y)h Fl(bnds)o Fp(,)f(and)g(whose)h(v)n(alues)951
960 y(are)19 b(de\014ned)h(b)o(y)f(separating)g(all)f(the)h(v)n(alues)g
(in)g(the)g(list)g Fl(ivs)951 1010 y Fp(according)14
b(to)h(their)g(index,)f(and)h(then)g(p)q(erforming)e(a)h(left-fold)951
1059 y(op)q(eration,)i(using)g Fl(f)p Fp(,)h(on)f(eac)o(h)h
(collection,)f(starting)g(with)g(the)951 1109 y(v)n(alue)d
Fl(x)p Fp(.)951 1184 y(T)o(ypical)18 b(uses)j(of)e Fl(accumArray)f
Fp(migh)o(t)f(b)q(e)j(a)g(histogram,)e(for)951 1230 y(example:)970
1305 y Fk(hist)g(::)h(Ix)g(i)g(=>)g(\(i,i\))f(->)h([i])f(->)h(Array)f
(i)h(Int)970 1351 y(hist)f(bnds)h(is)f(=)i(accumArr)o(ay)c(\(+\))j(0)g
(bnds)1343 1397 y([\(i,1\)|i<-)o(is)o(,)e(inRange)g(bnds)h(i])951
1472 y Fp(whic)o(h)d(coun)o(ts)i(the)f(o)q(ccurrences)j(of)c(eac)o(h)i
(elemen)o(t)e(of)g(the)h(list)951 1517 y Fl(is)d Fp(that)h(falls)f
(within)g(the)i(range)f(giv)o(en)g(b)o(y)f(the)i(b)q(ounds)f
Fl(bnds)o Fp(.)951 1563 y(Another)g(example)f(is)h(bin)f(sort:)970
1638 y Fk(binSort)k(::)i(Ix)g(i)g(=>)g(\(i,i\))f(->)h(\(a->i\))1284
1684 y(->)g([a])f(->)h(Array)f(i)h(a)970 1730 y(binSort)e(bnds)h(key)h
(vs)990 1775 y(=)g(accumArray)d(\(flip\(:\)\))g([])j(bnds)f([\(key)g
(v,v\)|v<-v)o(s])951 1855 y Fp(where)12 b(the)f(v)n(alue)f(in)h
Fl(vs)f Fp(are)i(placed)f(in)f(bins)h(according)g(to)g(their)951
1904 y(k)o(ey)17 b(v)n(alue)f(as)g(de\014ned)i(b)o(y)f(the)g(function)f
Fl(key)g Fp(\(whose)i(results)951 1954 y(are)f(assumed)f(to)g(lie)h(in)
f(the)h(range)g(sp)q(eci\014ed)h(b)o(y)e(the)h(b)q(ounds)951
2004 y Fl(bnds)o Fp(\).)33 b(Eac)o(h)20 b(bin)e(|)h(that)g(is,)g(eac)o
(h)h(elemen)o(t)e(of)h(the)g(arra)o(y)951 2054 y(|)h(will)f(con)o(tain)
g(a)i(list)e(of)h(the)h(v)n(alues)f(with)g(the)h(same)f(k)o(ey)951
2104 y(v)n(alue.)d(The)12 b(lists)g(start)h(empt)o(y)m(,)e(and)h(new)h
(elemen)o(ts)f(are)h(added)951 2154 y(using)f(a)f(v)o(ersion)i(of)e
(cons)i(in)f(whic)o(h)g(the)g(order)h(of)f(argumen)o(ts)f(is)951
2203 y(rev)o(ersed.)20 b(In)13 b(b)q(oth)h(examples,)e(the)i(arra)o(y)f
(is)g(built)g(b)o(y)g(a)g(single)951 2253 y(pass)h(along)f(the)h(input)
g(list.)951 2328 y(The)g(implemen)o(tation)c(of)k Fl(accumArray)d
Fp(is)j(as)g(follo)o(ws.)990 2404 y Fk(accumArray)i(bnds)i(f)h(z)g(ivs)
g(=)g(runST)1049 2449 y(\(newArr)e(bnds)h(z)39 b(`thenST`)16
b(\\a)j(->)1068 2495 y(fill)g(a)g(f)g(ivs)58 b(`thenST_`)1068
2541 y(freezeArr)17 b(a\))990 2632 y(fill)h(a)h(f)h([])e(=)i(returnST)c
(\(\))990 2678 y(fill)i(a)h(f)h(\(\(i,v\):i)o(vs\))1010
2723 y(=)f(readArr)e(a)i(i)215 b(`thenST`)17 b(\\x)i(->)1049
2769 y(writeArr)d(a)k(i)f(\(f)g(x)g(v\))38 b(`thenST_`)p
951 2797 V 997 2823 a Fi(3)1014 2835 y Fh(T)m(ec)o(hnically)10
b(the)g Ff(\(i,b\))g Fh(should)g(b)q(e)h Ff(Assoc)16
b(i)h(b)920 2960 y Fp(5)p eop
%%Page: 6 6
6 5 bop -22 195 a Fk(fill)18 b(a)h(f)h(ivs\))-120 274
y Fp(On)12 b(ev)n(aluating)e(a)h(call)f(to)h Fl(accumArray)n
Fp(,)g(a)g(new)h(state)g(thread)g(is)-120 324 y(generated.)19
b(Within)12 b(this)h(thread)h(an)f(arra)o(y)g(is)f(allo)q(cated,)h(eac)
o(h)-120 374 y(elemen)o(t)h(of)g(whic)o(h)g(is)h(initialised)e(to)h
Fl(z)p Fp(.)20 b(The)15 b(reference)i(to)e(the)-120 424
y(arra)o(y)g(is)f(named)g Fl(a)p Fp(.)20 b(This)15 b(is)g(passed)h(to)e
(the)i Fl(fill)e Fp(pro)q(cedure,)-120 474 y(together)h(with)e(the)h
(accum)o(ulator)f(function)g Fl(f)p Fp(,)g(and)g(the)i(list)e(of)-120
524 y(index/v)n(alue)g(pairs.)-120 603 y(When)f(this)g(list)f(is)g
(exhausted,)i Fl(fill)e Fp(simply)f(returns.)19 b(If)11
b(there)-120 653 y(is)i(at)g(least)h(one)f(elemen)o(t)g(in)g(the)h
(list,)e(it)h(will)f(b)q(e)i(a)f(pair)g Fl(\(i,v\))o
Fp(.)-120 702 y(The)i(arra)o(y)e Fl(a)h Fp(is)g(accessed)j(at)d(lo)q
(cation)f Fl(i)p Fp(,)g(the)i(v)n(alue)e(obtained)-120
752 y(b)q(eing)j(b)q(ound)g(to)g Fl(x)p Fp(,)f(and)h(a)g(new)g(v)n
(alue,)g(namely)e Fl(\(f)21 b(x)h(v\))o Fp(,)16 b(is)-120
802 y(written)f(in)o(to)e(the)i(arra)o(y)m(,)e(again)g(at)h(lo)q
(cation)f Fl(i)p Fp(.)18 b(Then)d Fl(fill)e Fp(is)-120
852 y(called)h(recursiv)o(ely)g(on)g(the)h(rest)g(of)e(the)h(list.)-120
931 y(Once)19 b Fl(fill)d Fp(has)i(\014nished,)g(the)h(arra)o(y)e(is)g
(frozen)h(in)o(to)f(an)g(im-)-120 981 y(m)o(utable)11
b(Hask)o(ell)h(arra)o(y)g(whic)o(h)g(is)g(returned)i(from)d(the)i
(thread.)-120 1060 y(Using)22 b(m)o(utable-arra)o(y)e(op)q(erations)i
(has)g(enabled)g(us)g(to)g(de-)-120 1110 y(scrib)q(e)14
b(a)e(complex)f(arra)o(y)h(\\primitiv)o(e")e(in)i(terms)g(of)g(m)o(uc)o
(h)f(sim-)-120 1160 y(pler)17 b(op)q(erations.)28 b(Not)17
b(only)g(do)q(es)g(this)h(mak)o(e)d(the)j(compiler-)-120
1210 y(writer's)31 b(job)e(easier,)35 b(but)c(it)f(also)f(allo)o(ws)g
(programmers)-120 1260 y(to)23 b(de\014ne)i(their)f(o)o(wn)f(v)n(arian)
o(ts)f(for,)j(sa)o(y)m(,)g(the)f(cases)h(when)-120 1309
y Fl(accumArray)12 b Fp(do)q(es)i(not)g(matc)o(h)f(their)h(application)
f(precisely)m(.)-120 1389 y(The)d(example)e(is)i(also)f(in)o(teresting)
h(b)q(ecause)h(of)e(its)g(use)i(of)e(encap-)-120 1439
y(sulated)j(state.)18 b(The)13 b Fo(implementation)f
Fp(\(or)g(in)o(ternal)f(details\))h(of)-120 1488 y Fl(accumArray)k
Fp(is)i(imp)q(erativ)o(e,)g(but)h(its)f Fo(external)h(b)n(ehaviour)f
Fp(is)-120 1538 y(purely)d(functional.)j(Ev)o(en)d(the)g(presence)i(of)
d(the)h(state)g(cannot)-120 1588 y(b)q(e)g(detected)h(from)c(outside)i
(the)g(de\014nition)g(of)f Fl(accumArray)n Fp(.)-120
1785 y Fe(3.1.1)46 b(Combining)16 b(St)m(a)m(te)g(Transf)o(ormers)-120
1874 y Fp(Because)i(state)e(transformers)g(are)g(\014rst)h(class)f(v)n
(alues,)g(w)o(e)g(can)-120 1920 y(use)j(the)f(p)q(o)o(w)o(er)g(of)g
(the)g(functional)f(language)g(to)h(de\014ne)h(new)-120
1966 y(com)o(bining)11 b(forms.)16 b(One)f(that)e(w)o(ould)f(b)q(e)i
(useful)g(in)f(the)h(exam-)-120 2011 y(ple)g(ab)q(o)o(v)o(e)f(is)h(for)
g(sequencing)h(a)e(list)h(of)f(\\pro)q(cedures":)-81
2087 y Fk(seqST)18 b(::)h([ST)f(s)h(\(\)])g(->)g(ST)g(s)g(\(\))-81
2132 y(seqST)f(=)h(foldr)f(thenST_)f(\(returnST)f(\(\)\))-120
2207 y Fp(Using)e(this)g(the)g(example)f(ab)q(o)o(v)o(e)g(can)h(b)q(e)h
(rewritten:)-81 2283 y Fk(accumArray)h(bnds)i(f)h(z)h(ivs)e(=)h(runST)
-42 2328 y(\(newArr)e(bnds)h(z)314 b(`thenST`)16 b(\\a)j(->)-22
2374 y(seqST)f(\(map)g(\(update)f(a)i(f\))g(ivs\))f(`thenST_`)-22
2420 y(freezeArr)e(a\))-81 2511 y(update)i(a)h(f)g(\(i,v\))f(=)h
(readArr)e(a)i(i)g(`thenST`)e(\\x->)292 2557 y(writeArr)f(a)k(i)f(\(f)g
(x)g(v\))-120 2636 y Fp(The)14 b(lo)q(cal)e(function)i
Fl(update)e Fp(tak)o(es)i(an)f(index/v)n(alue)f(pair)h(and)-120
2686 y(ev)n(aluates)h(to)f(a)g(state)h(transformer)f(whic)o(h)h(up)q
(dates)g(the)g(arra)o(y)-120 2736 y(referenced)k(b)o(y)e
Fl(a)p Fp(.)23 b(Mapping)15 b(this)h(function)g(do)o(wn)f(the)h(list)g
(of)-120 2785 y(index/v)n(alue)e(pairs)g Fl(ivs)g Fp(pro)q(duces)i(a)e
(list)g(of)f(state)j(transform-)-120 2835 y(ers,)e(and)g(these)h(are)g
(sequenced)h(together)f(b)o(y)e Fl(seqST)o Fp(.)951 195
y Fq(4)56 b(Input/output)951 322 y Fp(No)o(w)21 b(that)g(w)o(e)g(ha)o
(v)o(e)g(the)h(state-transformer)f(framew)o(ork)e(in)951
368 y(place,)f(w)o(e)g(can)g(giv)o(e)g(a)f(new)i(accoun)o(t)f(of)f
(input/output.)30 b(An)951 414 y(I/O-p)q(erforming)11
b(computation)g(is)h(of)g(t)o(yp)q(e)h Fl(ST)22 b(RealWorld)e(a)o
Fp(;)951 459 y(that)c(is,)h(it)e(is)i(a)f(state)h(transformer)f
(transforming)e(a)i(state)i(of)951 505 y(t)o(yp)q(e)g
Fl(RealWorld)n Fp(,)f(and)h(deliv)o(ering)e(a)h(v)n(alue)g(of)g(t)o(yp)
q(e)g Fl(a)p Fp(.)29 b(The)951 551 y(only)13 b(thing)g(whic)o(h)g(mak)o
(es)f(it)i(sp)q(ecial)f(is)h(the)g(t)o(yp)q(e)g(of)f(the)h(state)951
596 y(it)19 b(transforms,)i(an)f(abstract)h(t)o(yp)q(e)f(whose)h(v)n
(alues)f(represen)o(t)951 642 y(the)14 b(real)f(w)o(orld.)k(It)c(is)g
(con)o(v)o(enien)o(t)h(to)f(use)h(a)f(t)o(yp)q(e)g(synon)o(ym)f(to)951
688 y(express)j(this)f(sp)q(ecialisation:)990 763 y Fk(type)k(IO)h(a)g
(=)g(ST)g(RealWorld)d(a)951 838 y Fp(Since)c Fl(IO)21
b(a)11 b Fp(is)g(an)g(instance)h(of)f Fl(ST)21 b(s)h(a)p
Fp(,)11 b(it)g(follo)o(ws)f(that)h(all)f(the)951 884
y(state-transformer)25 b(primitiv)o(es)d(concerning)k(references)h(and)
951 929 y(arra)o(ys)20 b(w)o(ork)h(equally)e(w)o(ell)h(when)h(mixed)e
(with)h(I/O)h(op)q(era-)951 975 y(tions.)31 b(More)18
b(than)h(that,)g(the)f(same)g(\\plum)o(bing")d(com)o(bina-)951
1021 y(tors,)j Fl(thenST)o Fp(,)g Fl(returnST)e Fp(and)i(so)g(on,)g(w)o
(ork)f(for)h(I/O)f(as)h(for)951 1066 y(other)f(state)h(transformers.)27
b(In)17 b(addition,)f(ho)o(w)o(ev)o(er,)h(w)o(e)g(pro-)951
1112 y(vide)12 b(a)f(v)n(ariet)o(y)h(of)f(I/O)h(op)q(erations)g(that)g
(w)o(ork)f(only)h(on)f(the)i(IO)951 1158 y(instance)f(of)f(state)i
(\(that)f(is,)f(they)h(are)g Fo(not)g Fp(p)q(olymorphic)e(in)h(the)951
1203 y(state\),)j(suc)o(h)h(as:)990 1278 y Fk(putChar)i(::)i(Char)f(->)
h(IO)f(\(\))990 1324 y(getChar)f(::)i(IO)g(Char)951 1399
y Fp(It)c(is)g(easy)h(to)f(build)g(more)f(sophisticated)i(I/O)g(op)q
(erations)f(on)951 1445 y(top)f(of)f(these.)19 b(F)m(or)14
b(example:)990 1520 y Fk(putString)i(::)j([Char])e(->)i(IO)g(\(\))990
1566 y(putString)55 b([])j(=)20 b(returnST)c(\(\))990
1611 y(putString)g(\(c:cs\))h(=)j(putChar)d(c)38 b(`thenST_`)1363
1657 y(putString)16 b(cs)951 1732 y Fp(or,)d(equiv)n(alen)o(tly)m(,)990
1808 y Fk(putString)j(cs)j(=)g(seqST)f(\(map)g(putChar)f(cs\))951
1883 y Fp(There)i(is)e(no)h(w)o(a)o(y)f(for)g(a)h(caller)g(to)f(tell)h
(whether)h Fl(putString)951 1928 y Fp(is)f(\\primitiv)o(e")e(or)i
(\\programmed".)29 b(Indeed,)20 b Fl(putChar)d Fp(and)951
1974 y Fl(getChar)c Fp(are)j(not)f(primitiv)o(e)d(either.)23
b(There)16 b(is)f(actually)f(only)951 2020 y(one)i(primitiv)o(e)e(I/O)i
(op)q(eration,)g(called)f Fl(ccall)o Fp(,)h(whic)o(h)g(allo)o(ws)951
2065 y(the)k(Hask)o(ell)f(programmer)f(to)i(call)f(an)o(y)g(C)h(pro)q
(cedure.)37 b(F)m(or)951 2111 y(example,)12 b Fl(putChar)g
Fp(is)i(de\014ned)h(lik)o(e)e(this:)990 2186 y Fk(putChar)k(::)i(Char)f
(->)h(IO)f(\(\))990 2232 y(putChar)f(c)i(=)g(ccall)f(putchar)f(c)39
b(`thenST`)16 b(\\_)j(->)1225 2278 y(returnST)e(\(\))951
2353 y Fp(That)h(is,)g(the)h(state)g(transformer)f Fl(\(putChar)i(c\))e
Fp(transforms)951 2398 y(the)f(real)g(w)o(orld)f(b)o(y)h(calling)e(the)
j(C)e(function)h Fl(putchar)o Fp(,)g(pass-)951 2444 y(ing)h(it)h(the)g
(c)o(haracter)i Fl(c)o Fp(.)34 b(The)19 b(v)n(alue)g(returned)h(b)o(y)f
(the)h(call)951 2490 y(is)15 b(ignored,)h(as)g(indicated)g(b)o(y)f(the)
i(\\)p Fl(_)o Fp(")f(wild)f(card.)24 b(Similarly)l(,)951
2535 y Fl(getChar)12 b Fp(is)i(implemen)o(ted)d(lik)o(e)j(this:)990
2611 y Fk(getChar)j(::)i(IO)g(Char)990 2656 y(getChar)e(=)i(ccall)f
(getchar)951 2736 y Fl(ccall)g Fp(is)h(actually)f(implem)o(en)o(ted)f
(as)j(a)e(new)i(language)e(con-)951 2785 y(struct,)g(rather)g(than)f
(as)g(an)f(ordinary)g(function,)h(b)q(ecause)i(w)o(e)951
2835 y(w)o(an)o(t)14 b(it)g(to)g(w)o(ork)g(regardless)i(of)e(the)h(n)o
(um)o(b)q(er)f(and)g(t)o(yp)q(e)h(of)f(its)920 2960 y(6)p
eop
%%Page: 7 7
7 6 bop -120 195 a Fp(argumen)o(ts.)17 b(The)e(restrictions)g(placed)f
(on)g(its)f(use)i(are:)-78 308 y Fn(\017)20 b Fp(All)g(the)h(argumen)o
(ts,)h(and)e(the)h(result,)i(m)o(ust)d(b)q(e)h(t)o(yp)q(es)-37
358 y(whic)o(h)14 b(C)g(understands:)21 b Fl(Int)o Fp(,)14
b Fl(Float)o Fp(,)g Fl(Double)n Fp(,)g Fl(Bool)o Fp(,)g(or)-37
407 y Fl(Array)o Fp(.)35 b(There)21 b(is)f(no)f(automatic)f(con)o(v)o
(ersion)i(of)f(more)-37 457 y(complex)13 b(structured)j(t)o(yp)q(es,)e
(suc)o(h)h(as)f(lists)f(or)h(trees.)-78 540 y Fn(\017)20
b Fp(The)13 b(\014rst)h(\\argumen)o(t")d(of)h Fl(ccall)o
Fp(,)h(whic)o(h)f(is)h(the)g(name)f(of)-37 590 y(the)i(C)f(function)g
(to)g(b)q(e)h(called,)e(m)o(ust)h(app)q(ear)g(literally)m(.)j(It)-37
640 y(is)e(really)f(part)h(of)f(the)i(construct.)-120
759 y Fm(4.1)48 b(Running)13 b(IO)-120 840 y Fp(The)g
Fl(IO)f Fp(t)o(yp)q(e)h(is)f(a)g(particular)g(instance)h(of)f(state)h
(transformers)-120 889 y(so,)i(in)h(particular,)f(I/O)g(op)q(erations)h
(are)g(not)f(p)q(olymorphic)f(in)-120 939 y(the)j(state.)26
b(An)17 b(imm)o(ediate)d(consequence)19 b(of)c(this)i(is)f(that)g
Fo(IO)-120 989 y(op)n(er)n(ations)c(c)n(annot)g(b)n(e)f(enc)n(apsulate)
n(d)i(using)d Fl(runST)o Fp(.)17 b(Wh)o(y)10 b(not?)-120
1039 y(Again,)20 b(b)q(ecause)i(of)d Fl(runsST)o Fp('s)h(t)o(yp)q(e.)36
b(It)20 b(demands)f(that)h(its)-120 1089 y(state)12 b(transformer)e
(argumen)o(t)g(b)q(e)h(univ)o(ersally)f(quan)o(ti\014ed)h(o)o(v)o(er)
-120 1139 y(the)j(state,)h(but)f(that)g(is)g(exactly)f(what)h
Fl(IO)g Fp(is)f(not!)-120 1218 y(F)m(ortunately)m(,)18
b(this)h(is)f(exactly)h(what)f(w)o(e)h(w)o(an)o(t.)31
b(If)18 b(IO)h(op)q(er-)-120 1268 y(ations)f(could)g(b)q(e)h
(encapsulated)h(then)f(it)f(w)o(ould)g(b)q(e)h(p)q(ossible)-120
1318 y(to)14 b(write)h(apparen)o(tly)e(pure)i(functions,)f(but)h(whose)
f(b)q(eha)o(viour)-120 1367 y(dep)q(ended)j(on)d(external)i(factors,)e
(the)i(con)o(ten)o(ts)g(of)e(a)h(\014le,)f(user)-120
1417 y(input,)j(a)g(shared)h(C)f(v)n(ariable)e(etc.)29
b(The)17 b(language)f(w)o(ould)g(no)-120 1467 y(longer)e(exhibit)f
(referen)o(tial)h(transparency)m(.)-120 1542 y(Ho)o(w)o(ev)o(er,)h
(this)g(do)q(es)g(lea)o(v)o(e)g(us)g(with)f(a)h(problem:)j(ho)o(w)d
(are)g(IO)-120 1588 y(op)q(erations)d(executed?)19 b(The)12
b(answ)o(er)g(is)f(to)g(pro)o(vide)g(a)g(top)h(lev)o(el)-120
1633 y(iden)o(ti\014er,)-81 1709 y Fk(mainIO)18 b(::)g(IO)h(\(\))-120
1788 y Fp(and)f(to)f(de\014ne)i(the)f(meaning)e(of)h(a)g(program)f(in)i
(terms)f(of)g(it.)-120 1838 y(When)i(a)f(program)f(is)h(executed,)j
Fl(mainIO)c Fp(is)h(applied)g(to)h(the)-120 1888 y(true)g(external)g(w)
o(orld)f(state,)i(and)f(the)g(meaning)d(of)i(the)h(pro-)-120
1937 y(gram)e(is)i(giv)o(en)g(b)o(y)g(the)g(\014nal)g(w)o(orld)f(state)
i(returned)h(b)o(y)e(the)-120 1987 y(program)9 b(\(including,)g(of)h
(course,)h(all)e(the)i(incremen)o(tal)e(c)o(hanges)-120
2037 y(en)14 b(route\).)-120 2116 y(By)24 b(this)h(means)e(it)h(is)g(p)
q(ossible)g(to)g(giv)o(e)g(a)g(full)f(de\014nition)-120
2166 y(of)15 b(Hask)o(ell's)h(standard)g(input/output)g(b)q(eha)o
(viour)f(\(in)o(v)o(olving)-120 2216 y(lists)d(of)g(requests)i(and)e
(resp)q(onses\))j(as)e(w)o(ell)e(as)i(m)o(uc)o(h)e(more.)16
b(In-)-120 2266 y(deed,)c(the)f(Glasgo)o(w)e(implemen)o(tatio)o(n)f(of)
i(the)h(Hask)o(ell)f(I/O)h(sys-)-120 2316 y(tem)i(is)h(itself)f(no)o(w)
h(written)g(en)o(tirely)g(in)g(Hask)o(ell,)f(using)g
Fl(ccall)-120 2365 y Fp(to)k(in)o(v)o(ok)o(e)f(Unix)h(I/O)g(primitiv)o
(es)e(directly)m(.)27 b(The)17 b(same)f(tec)o(h-)-120
2415 y(niques)j(ha)o(v)o(e)f(b)q(een)h(used)g(to)f(write)h(libraries)f
(of)g(routines)h(for)-120 2465 y(calling)12 b(X,)i(etc.)-120
2597 y Fq(5)56 b(F)-5 b(ormal)18 b(seman)n(tics)-120
2686 y Fp(Ha)o(ving)c(giv)o(en)h(the)i(programmer's)c(ey)o(e)j(view,)f
(it)g(is)g(time)g(no)o(w)-120 2736 y(to)h(b)q(e)g(more)f(formal.)22
b(In)15 b(this)h(section)h(w)o(e)f(presen)o(t)h(the)g(static)-120
2785 y(and)i(dynamic)e(seman)o(tics)h(of)g(a)h(small)d(language)i(supp)
q(orting)-120 2835 y(state)13 b(transformers,)g(and)f(giv)o(e)g(an)g
(outline)g(pro)q(of)g(of)g(safet)o(y)h(for)951 195 y(the)h
(encapsulation.)951 274 y(Up)i(to)g(no)o(w,)g(w)o(e)g(ha)o(v)o(e)g
(presen)o(ted)i(state)f(transformers)f(in)f(the)951 324
y(con)o(text)i(of)f(the)i(full-sized)e(programming)d(language)j(Hask)o
(ell,)951 374 y(since)d(that)f(is)g(where)h(w)o(e)g(ha)o(v)o(e)f
(implemen)o(ted)e(the)j(ideas.)k(Here,)951 424 y(ho)o(w)o(ev)o(er,)12
b(it)g(is)g(con)o(v)o(enien)o(t)h(to)f(restrict)h(ourselv)o(es)h(to)e
(a)g(smaller)951 474 y(language)h(whic)o(h)g(includes)i(only)e(the)h
(essen)o(tials.)951 592 y Fm(5.1)47 b(A)16 b(Language)951
672 y Fp(W)m(e)21 b(fo)q(cus)g(on)g(lam)o(b)q(da)e(calculus)j(extended)
g(with)f(the)h(state)951 722 y(transformer)c(op)q(erations.)35
b(The)19 b(syn)o(tax)g(of)g(the)h(language)e(is)951 771
y(giv)o(en)13 b(b)o(y:)1030 850 y Fg(e)46 b Fp(::=)40
b Fg(x)28 b Fn(j)f Fg(k)i Fn(j)e Fg(e)1391 856 y Fj(1)1424
850 y Fg(e)1443 856 y Fj(2)1489 850 y Fn(j)g Fg(\025x:e)h
Fn(j)1191 900 y Fl(let)14 b Fg(x)d Fp(=)h Fg(e)1369 906
y Fj(1)1401 900 y Fl(in)i Fg(e)1478 906 y Fj(2)1525 900
y Fn(j)27 b Fl(runST)13 b Fg(e)28 b Fn(j)1191 950 y Fl(ccall)13
b Fg(x)h(e)1371 956 y Fj(1)1397 950 y Fn(\001)7 b(\001)g(\001)e
Fg(e)1471 956 y Fd(n)1030 1050 y Fg(k)43 b Fp(::=)d Fg(:)7
b(:)g(:)33 b Fn(j)28 b Fl(thenST)e Fn(j)h Fl(returnST)f
Fn(j)h Fl(fixST)g Fn(j)1191 1099 y Fl(newVar)g Fn(j)g
Fl(readVar)f Fn(j)h Fl(writeVar)f Fn(j)1191 1149 y Fl(newArr)h
Fn(j)g Fl(readArr)f Fn(j)h Fl(writeArr)f Fn(j)1191 1199
y Fl(freezeArr)951 1308 y Fm(5.2)47 b(T)o(yp)q(es)951
1388 y Fp(Most)12 b(of)e(the)j(t)o(yp)q(e)f(rules)g(are)g(the)g(usual)f
(Hindley-Milner)g(rules.)951 1438 y(The)g(most)g(in)o(teresting)g
(addition)f(is)i(the)f(t)o(yping)g(judgemen)o(t)f(for)951
1488 y Fl(runST)o Fp(.)35 b(T)m(reating)19 b(it)g(as)h(a)f(language)g
(construct)i(a)o(v)o(oids)d(the)951 1538 y(need)d(to)f(go)g(b)q(ey)o
(ond)g(Hindley-Milner)g(t)o(yp)q(es.)20 b(So)14 b(rather)h(than)951
1587 y(actually)e(giv)o(e)g Fl(runST)g Fp(the)h(t)o(yp)q(e)1159
1669 y Fl(runST)21 b(::)g Fn(8)p Fl(a.\()p Fn(8)p Fl(s.ST)g(s)g(a\))h
(->)f(a)951 1750 y Fp(as)10 b(suggested)i(in)e(the)g(in)o(tro)q
(duction,)h(w)o(e)f(ensure)i(that)e(its)h(t)o(yping)951
1800 y(judgmen)o(t)h(has)h(the)h(same)f(e\013ect.)19
b(So)13 b(b)q(ecause)j(it)d(is)g(consisten)o(t)951 1850
y(with)g(the)i(rank-2)e(t)o(yp)q(e,)h(our)g(previous)g(in)o(tuition)f
(still)g(applies.)951 1929 y(As)f(usual,)g(w)o(e)g(talk)g(b)q(oth)g(of)
f Fo(typ)n(es)i Fp(and)f Fo(typ)n(e)h(schemes)f Fp(\(that)h(is,)951
1979 y(t)o(yp)q(es)i(p)q(ossibly)e(with)h(univ)o(ersal)f(quan)o
(ti\014ers)i(on)e(the)i(outside\).)951 2029 y(W)m(e)f(use)i
Fg(T)21 b Fp(for)14 b(t)o(yp)q(es,)i Fg(S)i Fp(for)c(t)o(yp)q(e)i(sc)o
(hemes,)f(and)g Fg(K)j Fp(for)c(t)o(yp)q(e)951 2079 y(constan)o(ts)k
(suc)o(h)h(as)f Fg(I)s(nt)g Fp(and)g Fg(B)r(ool)q Fp(.)30
b(In)18 b(addition)f(w)o(e)h(use)g Fg(C)951 2129 y Fp(to)13
b(range)g(o)o(v)o(er)g(the)g(subset)i(of)d Fg(K)k Fp(that)d(corresp)q
(ond)i(to)e(the)g(\\C-)951 2179 y(t)o(yp)q(es")h(describ)q(ed)i(in)d
(Section)i(4.)1081 2257 y Fg(T)48 b Fp(::=)40 b Fg(t)28
b Fn(j)f Fg(K)k Fn(j)c Fg(T)1460 2263 y Fj(1)1491 2257
y Fn(!)11 b Fg(T)1568 2263 y Fj(2)1614 2257 y Fn(j)28
b Fl(ST)13 b Fg(T)1735 2263 y Fj(1)1768 2257 y Fg(T)1792
2263 y Fj(2)1838 2257 y Fn(j)1249 2307 y Fl(MutVar)g
Fg(T)1418 2313 y Fj(1)1451 2307 y Fg(T)1475 2313 y Fj(2)1521
2307 y Fn(j)27 b Fl(MutArr)13 b Fg(T)1729 2313 y Fj(1)1762
2307 y Fg(T)1786 2313 y Fj(2)1081 2407 y Fg(S)47 b Fp(::=)40
b Fg(T)34 b Fn(j)27 b(8)p Fg(t:S)951 2487 y Fp(Note)16
b(that)f(the)i Fl(MutArr)d Fp(t)o(yp)q(e)i(constructor)h(has)f(only)f
(t)o(w)o(o)g(ar-)951 2536 y(gumen)o(ts)i(here.)31 b(The)19
b(missing)d(one)i(is)g(the)h(index)f(t)o(yp)q(e.)30 b(F)m(or)951
2586 y(the)18 b(purp)q(oses)i(of)d(the)h(seman)o(tics)g(w)o(e)g(shall)f
(assume)g(that)h(ar-)951 2636 y(ra)o(ys)c(are)h(alw)o(a)o(ys)f(indexed)
h(b)o(y)f(naturals,)g(starting)g(at)h(0.)40 b(The)951
2686 y(t)o(yp)q(e)16 b(rules)g(are)g(giv)o(en)f(in)g(Figure)h(1.)22
b(\000)16 b(ranges)g(o)o(v)o(er)g(t)o(yp)q(e)g(en-)951
2736 y(vironmen)o(ts)f(\(that)h(is,)g(partial)f(functions)i(from)d
(references)19 b(to)951 2785 y(t)o(yp)q(es\),)13 b(and)g(w)o(e)g(write)
g Fg(F)6 b(V)i Fp(\()p Fg(T)e Fp(\))13 b(for)g(the)g(free)g(v)n
(ariables)f(of)g(t)o(yp)q(e)951 2835 y Fg(T)20 b Fp(and)13
b(lik)o(ewise)h(for)f(t)o(yp)q(e)i(en)o(vironmen)o(ts.)920
2960 y(7)p eop
%%Page: 8 8
8 7 bop -120 169 1030 2 v 5 276 a Fg(AP)6 b(P)221 237
y Fp(\000)11 b Fn(`)h Fg(e)314 243 y Fj(1)344 237 y Fp(:)g
Fg(T)392 243 y Fj(1)422 237 y Fn(!)f Fg(T)499 243 y Fj(2)573
237 y Fp(\000)h Fn(`)g Fg(e)667 243 y Fj(2)697 237 y
Fp(:)f Fg(T)744 243 y Fj(1)p 221 266 543 2 v 355 308
a Fp(\000)g Fn(`)h Fp(\()p Fg(e)464 314 y Fj(1)497 308
y Fg(e)516 314 y Fj(2)535 308 y Fp(\))g(:)f Fg(T)610
314 y Fj(2)5 440 y Fg(LAM)353 402 y Fp(\000)p Fg(;)c(x)k
Fp(:)g Fg(T)480 408 y Fj(1)510 402 y Fn(`)h Fg(e)g Fp(:)f
Fg(T)625 408 y Fj(2)p 330 427 339 2 v 330 472 a Fp(\000)g
Fn(`)h Fg(\025x:e)f Fp(:)g Fg(T)541 478 y Fj(1)572 472
y Fn(!)g Fg(T)649 478 y Fj(2)5 604 y Fg(LE)r(T)236 565
y Fp(\000)g Fn(`)h Fg(e)329 571 y Fj(1)360 565 y Fp(:)f
Fg(S)58 b Fp(\000)p Fg(;)7 b(x)k Fp(:)g Fg(S)j Fn(`)e
Fg(e)664 571 y Fj(2)695 565 y Fp(:)f Fg(T)p 236 594 512
2 v 253 636 a Fp(\000)h Fn(`)g Fp(\()p Fl(let)h Fg(x)e
Fp(=)h Fg(e)521 642 y Fj(1)554 636 y Fl(in)h Fg(e)630
642 y Fj(2)649 636 y Fp(\))f(:)f Fg(T)5 737 y(V)f(AR)257
b Fp(\000)p Fg(;)7 b(x)k Fp(:)g Fg(S)j Fn(`)e Fg(x)g
Fp(:)f Fg(S)5 868 y(S)r(P)6 b(E)r(C)375 830 y Fp(\000)12
b Fn(`)g Fg(e)f Fp(:)g Fn(8)p Fg(t:S)p 356 856 244 2
v 356 900 a Fp(\000)h Fn(`)f Fg(e)h Fp(:)f Fg(S)r Fp([)p
Fg(T)5 b(=t)p Fp(])662 868 y Fg(t)12 b Fn(62)f Fg(F)6
b(V)j Fp(\()p Fg(T)d Fp(\))5 1032 y Fg(GE)r(N)400 994
y Fp(\000)11 b Fn(`)h Fg(e)g Fp(:)f Fg(S)p 375 1019 206
2 v 375 1063 a Fp(\000)h Fn(`)g Fg(e)f Fp(:)g Fn(8)p
Fg(t:S)643 1032 y(t)h Fn(62)f Fg(F)6 b(V)j Fp(\(\000\))5
1196 y Fg(C)s(C)s(ALL)248 1157 y Fp(\000)i Fn(`)h Fg(e)341
1163 y Fj(1)372 1157 y Fp(:)f Fg(C)425 1163 y Fj(1)464
1157 y Fn(\001)c(\001)g(\001)19 b Fp(\000)11 b Fn(`)h
Fg(e)626 1163 y Fd(n)661 1157 y Fp(:)f Fg(C)714 1163
y Fd(n)p 248 1185 489 2 v 254 1228 a Fp(\000)g Fn(`)h
Fp(\()p Fl(ccall)h Fg(x)h(e)524 1234 y Fj(1)549 1228
y Fg(:)7 b(:)g(:)f(e)624 1234 y Fd(n)647 1228 y Fp(\))11
b(:)g Fg(C)5 1360 y(RU)5 b(N)331 1322 y Fp(\000)11 b
Fn(`)h Fg(e)g Fp(:)f Fn(8)p Fg(t:)p Fl(ST)i Fg(t)h(T)p
321 1347 314 2 v 321 1391 a Fp(\000)e Fn(`)g Fp(\()p
Fl(runST)h Fg(e)p Fp(\))f(:)f Fg(T)697 1360 y(t)g Fn(62)h
Fg(F)6 b(V)j Fp(\()p Fg(T)d Fp(\))207 1506 y(Figure)14
b(1:)k(T)o(yp)q(e)c(rules)p -120 1529 1030 2 v -120 1710
a Fm(5.3)48 b(Denotational)12 b(Seman)o(tics)-120 1796
y Fp(The)21 b(denotational)e(seman)o(tics)h(of)g(state)h(op)q(erations)
g(is)f(easy)-120 1846 y(to)j(add)f(to)h(standard)g(seman)o(tics)f(for)h
(lazy)f(functional)g(lan-)-120 1896 y(gauges.)28 b(Figure)17
b(2)g(giv)o(es)g(a)g(standard)h(seman)o(tics)f(for)g(a)g(non-)-120
1945 y(strict)11 b(lam)o(b)q(da)c(calculus,)k(except)g(that)f(w)o(e)g
(extend)g(it)g(with)f(state)-120 1995 y(transformers.)-120
2075 y(The)18 b(v)n(aluation)d(function)i Fn(E)t Fp([)-7
b([)13 b(])-7 b(])16 b(tak)o(es)i(an)f Fo(expr)n(ession)g
Fp(and)g(an)-120 2124 y Fo(envir)n(onment)c Fp(and)f(returns)i(a)e
Fo(value)p Fp(.)17 b(W)m(e)12 b(use)h Fo(Env)18 b Fp(for)12
b(the)h(do-)-120 2174 y(main)f(of)h(en)o(vironmen)o(ts,)g(and)h
Fo(V)m(al)k Fp(for)c(the)h(domain)c(of)j(v)n(alues,)-120
2224 y(de\014ned)h(as)f(follo)o(ws:)153 2361 y Fo(Env)47
b Fp(=)344 2330 y Fc(Q)383 2373 y Fd(\034)403 2361 y
Fp(\()p Fg(v)q(ar)481 2367 y Fd(\034)514 2361 y Fn(!)11
b(D)599 2367 y Fd(\034)620 2361 y Fp(\))153 2411 y Fo(V)m(al)57
b Fp(=)344 2380 y Fc(S)378 2423 y Fd(\034)406 2411 y
Fn(D)438 2417 y Fd(\034)-120 2557 y Fp(The)14 b(en)o(vironmen)o(t)f
(maps)g(a)h(v)n(ariable)f(of)g(t)o(yp)q(e)i Fg(\034)k
Fp(to)14 b(a)f(v)n(alue)h(in)-120 2606 y(the)g(domain)e
Fn(D)131 2612 y Fd(\034)152 2606 y Fp(,)h(and)h(the)g(domain)e(of)h(v)n
(alues)g(is)h(the)h(union)e(of)-120 2656 y(all)g(the)h
Fn(D)41 2662 y Fd(\034)62 2656 y Fp(,)f(where)i Fg(\034)k
Fp(ranges)14 b(o)o(v)o(er)g(monot)o(yp)q(es.)-120 2736
y(F)m(rom)j(the)j(p)q(oin)o(t)e(of)h(view)g(of)f(the)i(language,)f(the)
h(t)o(yp)q(e)f(con-)-120 2785 y(structors)i Fl(ST)p Fp(,)f
Fl(MutVar)e Fp(and)h Fl(MutArr)g Fp(are)g(opaque.)35
b(T)m(o)19 b(giv)o(e)-120 2835 y(them)9 b(meaning,)f(ho)o(w)o(ev)o(er,)
i(the)h(seman)o(tics)e(m)o(ust)g(pro)o(vide)g(them)951
195 y(with)k(some)g(structure.)1060 264 y Fg(D)1094 275
y Fl(ST)h Fd(s)f(a)1330 264 y Fp(=)42 b Fg(S)r(tate)15
b(s)d Fn(!)f Fp(\()p Fg(D)1651 270 y Fd(a)1681 264 y
Fn(\002)e Fg(S)r(tate)15 b(s)p Fp(\))1060 314 y Fg(D)1094
325 y Fl(MutVar)e Fd(s)h(a)1330 314 y Fp(=)42 b Fn(N)1438
320 y Fb(?)1060 364 y Fg(D)1094 375 y Fl(MutArr)13 b
Fd(s)h(a)1330 364 y Fp(=)42 b(\()p Fn(N)15 b(\002)10
b(N)c Fp(\))1567 370 y Fb(?)1060 413 y Fg(S)r(tate)15
b(s)138 b Fp(=)42 b(\(\()p Fn(N)18 b Fg(,)-7 b Fn(!)11
b Fg(V)e(al)q Fp(\))g Fn(\002)h Fg(D)1715 419 y Fd(s)1733
413 y Fp(\))1749 419 y Fb(?)951 493 y Fp(The)k(state)h(is)g(a)f
(\014nite)g(partial)f(function)h(from)f(lo)q(cations)g(\(rep-)951
543 y(resen)o(ted)22 b(b)o(y)f(natural)f(n)o(um)o(b)q(ers\))h(to)f(v)n
(alues,)i(together)f(with)951 593 y(a)f(comp)q(onen)o(t)g(whic)o(h)h
(dep)q(ends)i(on)d(the)i(t)o(yp)q(e)f(of)f(the)i(state.)951
643 y(The)f(only)f(t)o(yp)q(e)h(of)f(v)n(alues)g(here)i(whic)o(h)f
(will)e(concern)j(us)f(is)951 693 y Fl(RealWorld)n Fp(,)f(the)g(t)o(yp)
q(e)g(that)f Fl(s)g Fp(tak)o(es)h(in)f(IO)h(computations.)951
743 y(More)12 b(on)g(this)f(later.)18 b(W)m(e)11 b(also)g(add)h(a)f(b)q
(ottom)g(elemen)o(t)g(to)g(rep-)951 792 y(resen)o(t)19
b(an)f(unde\014ned)h(state,)g(and)f(distinguish)g(b)q(et)o(w)o(een)h
(this)951 842 y(unde\014ned)c(state)h(and)e(states)i(whic)o(h)e(are)h
(w)o(ell-de\014ned)g(partial)951 892 y(functions,)i(but)g(whic)o(h)g
(map)e(ev)o(ery)j(thing)e(to)h Fn(?)p Fp(.)26 b(The)18
b(unde-)951 942 y(\014ned)11 b(state)h(arises)g(naturally)e(as)h(the)h
(state)g(whic)o(h)f(results)h(from)951 992 y(an)h(in\014nite)h(lo)q(op)
f(of)g(state)i(transformers,)e(for)h(example.)951 1071
y(The)i(meaning)d(of)i(a)g(state)h(transformer)f(is)g(a)g(function)h
(whic)o(h,)951 1121 y(giv)o(en)9 b(a)h(state,)h(pro)q(duces)g(a)f(pair)
f(of)g(results:)17 b(a)10 b(v)n(alue)f(and)h(a)g(new)951
1171 y(state.)18 b(The)c(least)g(de\014ned)h(state)f(transformer)f(is)g
(the)h(function)951 1220 y(whic)o(h,)21 b(giv)o(en)e(an)o(y)h(state,)i
(returns)g(the)e(pair)g(con)o(taining)f(an)951 1270 y(unde\014ned)d(v)n
(alue)e(and)h(an)g(unde\014ned)i(state)e(\(i.e.)22 b(the)15
b(b)q(ottom)951 1320 y(of)e(the)i(pro)q(duct)f(domain\).)p
951 1391 V 994 1471 a Fn(E)t Fp([)-7 b([)7 b Fg(E)r(xpr)f
Fp(])-7 b(])11 b(:)g Fo(Env)17 b Fn(!)11 b Fo(V)m(al)994
1521 y Fn(E)t Fp([)-7 b([)7 b Fg(k)g Fp(])-7 b(])13 b
Fg(\032)262 b Fp(=)41 b Fn(B)q Fp([)-7 b([)7 b Fg(k)h
Fp(])-7 b(])994 1571 y Fn(E)t Fp([)g([)7 b Fg(x)g Fp(])-7
b(])12 b Fg(\032)261 b Fp(=)41 b Fg(\032)15 b(x)994 1621
y Fn(E)t Fp([)-7 b([)7 b Fg(e)1063 1627 y Fj(1)1095 1621
y Fg(e)1114 1627 y Fj(2)1140 1621 y Fp(])-7 b(])229 b(=)41
b(\()p Fn(E)t Fp([)-7 b([)7 b Fg(e)1544 1627 y Fj(1)1569
1621 y Fp(])-7 b(])13 b Fg(\032)p Fp(\))h(\()p Fn(E)t
Fp([)-7 b([)7 b Fg(e)1735 1627 y Fj(2)1760 1621 y Fp(])-7
b(])13 b Fg(\032)p Fp(\))994 1670 y Fn(E)t Fp([)-7 b([)7
b Fl(\\)o Fg(x)p Fl(->)o Fg(e)g Fp(])-7 b(])13 b Fg(\032)177
b Fp(=)41 b Fg(\025v)q(:)p Fp(\()p Fn(E)t Fp([)-7 b([)7
b Fg(e)g Fp(])-7 b(])13 b(\()p Fg(\032)d Fn(\010)f(f)p
Fg(x)i Fn(7!)g Fg(v)q Fn(g)p Fp(\))994 1770 y Fn(E)t
Fp([)-7 b([)7 b Fl(runST)12 b Fg(e)7 b Fp(])-7 b(])177
b(=)41 b Fg(r)q(un)14 b Fp(\()p Fn(E)t Fp([)-7 b([)7
b Fg(e)g Fp(])-7 b(])12 b Fg(\032)p Fp(\))994 1820 y
Fn(E)t Fp([)-7 b([)7 b Fg(e)1063 1826 y Fj(1)1095 1820
y Fl(`thenST`)12 b Fg(e)1302 1826 y Fj(2)1328 1820 y
Fp(])-7 b(])41 b(=)g Fg(bind)14 b Fp(\()p Fn(E)t Fp([)-7
b([)7 b Fg(e)1637 1826 y Fj(1)1661 1820 y Fp(])-7 b(])13
b Fg(\032)p Fp(\))i(\()p Fn(E)t Fp([)-7 b([)7 b Fg(e)1828
1826 y Fj(2)1853 1820 y Fp(])-7 b(])13 b Fg(\032)p Fp(\))994
1870 y Fn(E)t Fp([)-7 b([)7 b Fl(returnST)k Fg(e)c Fp(])-7
b(])112 b(=)41 b Fg(unit)14 b Fp(\()p Fn(E)t Fp([)-7
b([)7 b Fg(e)g Fp(])-7 b(])12 b Fg(\032)p Fp(\))994 1919
y Fn(E)t Fp([)-7 b([)7 b Fl(fixST)12 b Fg(e)7 b Fp(])-7
b(])177 b(=)41 b Fg(l)q(oop)14 b Fp(\()p Fn(E)t Fp([)-7
b([)7 b Fg(e)g Fp(])-7 b(])13 b Fg(\032)p Fp(\))994 2019
y Fg(r)q(un)h(m)160 b Fp(=)42 b Fg(\031)1371 2025 y Fj(1)1403
2019 y Fp(\()p Fg(m)14 b Fp(\()p Fn(;)p Fg(;)7 b Fn(?)p
Fp(\)\))994 2069 y(\()p Fg(bind)14 b(m)g(k)q Fp(\))g
Fg(\033)43 b Fp(=)f Fg(k)14 b(x)g(\033)1446 2054 y Fb(0)1474
2069 y Fm(where)h Fp(\()p Fg(x;)7 b(\033)1698 2054 y
Fb(0)1709 2069 y Fp(\))12 b(=)g Fg(m)i(\033)994 2119
y Fp(\()p Fg(unit)g(v)q Fp(\))h Fg(\033)95 b Fp(=)42
b(\()p Fg(v)q(;)7 b(\033)q Fp(\))994 2169 y(\()p Fg(l)q(oop)15
b(f)t Fp(\))f Fg(\033)96 b Fp(=)42 b Fg(f)18 b(x)c(\033)1363
2218 y Fm(where)h Fg(x)c Fp(=)h Fg(f)t(ix)j Fp(\()p Fg(\025y)q(:\031)
1756 2224 y Fj(1)1788 2218 y Fp(\()p Fg(f)k(y)d(\033)q
Fp(\)\))1083 2349 y(Figure)e(2:)k(Seman)o(tics)13 b(of)g(State)i(Com)o
(binators)p 951 2372 V 951 2457 a(References)20 b(are)e(denoted)h
(simply)d(b)o(y)h(natural)h(n)o(um)o(b)q(ers,)g(ex-)951
2507 y(cept)j(that)f(it)g(is)g(p)q(ossible)g(to)g(ha)o(v)o(e)g(an)g
(unde\014ned)h(reference)951 2557 y(also,)13 b(denoted)j(b)o(y)e
Fn(?)p Fp(.)19 b(The)14 b(n)o(um)o(b)q(er)g(represen)o(ts)j(a)d(\\lo)q
(cation")951 2606 y(in)e(the)h(state.)18 b(Arra)o(ys)13
b(are)g(lo)q(cated)f(b)o(y)g(a)g(pair)g(of)g(naturals)g(rep-)951
2656 y(resen)o(ting)18 b(the)h(lo)q(cation)e(of)g(elemen)o(t)g(0,)h
(and)g(the)h(size)f(of)f(the)951 2706 y(arra)o(y)m(,)12
b(but)i(again)f(it)g(is)g(p)q(ossible)h(to)g(ha)o(v)o(e)f(a)g(totally)g
(unde\014ned)951 2756 y(arra)o(y)g(reference.)951 2835
y(T)m(urning)d(to)h(the)g(details)g(of)g(Figures)g(2)g(to)g(5,)f(w)o(e)
i(note)f(a)g(n)o(um)o(b)q(er)920 2960 y(8)p eop
%%Page: 9 9
9 8 bop -120 260 2100 2 v 115 299 a Fn(E)t Fp([)-7 b([)7
b Fl(newVar)k Fg(e)327 305 y Fj(1)353 299 y Fp(])-7 b(])136
b(=)42 b Fg(new)q(V)9 b(ar)15 b(v)764 305 y Fj(1)115
374 y Fn(E)t Fp([)-7 b([)7 b Fl(readVar)k Fg(e)349 380
y Fj(1)375 374 y Fp(])-7 b(])114 b(=)580 315 y Fc(\032)632
349 y Fn(?)p Fg(;)207 b Fm(if)19 b Fg(v)952 355 y Fj(1)982
349 y Fp(=)12 b Fn(?)632 398 y Fg(r)q(eadV)d(ar)14 b(v)823
404 y Fj(1)884 398 y Fm(otherwise)1235 374 y(where)h
Fg(v)1395 380 y Fd(i)1421 374 y Fp(=)d Fn(E)t Fp([)-7
b([)7 b Fg(e)1534 380 y Fd(i)1553 374 y Fp(])-7 b(])13
b Fg(\032)115 473 y Fn(E)t Fp([)-7 b([)7 b Fl(writeVar)k
Fg(e)371 479 y Fj(1)403 473 y Fg(e)422 479 y Fj(2)448
473 y Fp(])-7 b(])41 b(=)580 415 y Fc(\032)632 448 y
Fn(?)p Fg(;)276 b Fm(if)19 b Fg(v)1021 454 y Fj(1)1051
448 y Fp(=)12 b Fn(?)632 498 y Fg(w)q(r)q(iteV)d(ar)15
b(v)840 504 y Fj(1)873 498 y Fg(v)893 504 y Fj(2)953
498 y Fm(otherwise)115 598 y Fp(\()p Fg(new)q(V)9 b(ar)15
b(v)q Fp(\))28 b Fn(?)156 b Fp(=)42 b(\()p Fn(?)p Fg(;)20
b Fn(?)p Fp(\))115 647 y(\()p Fg(new)q(V)9 b(ar)15 b(v)q
Fp(\))g(\()p Fg(\034)r(;)7 b(w)q Fp(\))100 b(=)42 b(\()p
Fg(p;)20 b Fp(\()p Fg(\034)5 b Fp([)p Fg(p)11 b Fn(7!)g
Fg(v)q Fp(])p Fg(;)c(w)q Fp(\)\))30 b Fm(where)15 b Fg(p)d
Fn(62)f Fg(dom)p Fp(\()p Fg(\034)5 b Fp(\))115 747 y(\()p
Fg(r)q(eadV)k(ar)15 b(p)p Fp(\))27 b Fn(?)149 b Fp(=)42
b(\()p Fn(?)p Fg(;)20 b Fn(?)p Fp(\))115 822 y(\()p Fg(r)q(eadV)9
b(ar)15 b(p)p Fp(\))f(\()p Fg(\034)r(;)7 b(w)q Fp(\))93
b(=)623 764 y Fc(\032)675 797 y Fp(\()p Fn(?)p Fg(;)20
b Fn(?)p Fp(\))p Fg(;)135 b Fm(if)20 b Fg(p)11 b Fn(62)g
Fg(dom)p Fp(\()p Fg(\034)5 b Fp(\))675 847 y(\()p Fg(\034)19
b(p;)h Fp(\()p Fg(\034)r(;)7 b(w)q Fp(\)\))p Fg(;)41
b Fm(otherwise)1375 822 y(where)16 b Fg(v)1536 828 y
Fd(i)1561 822 y Fp(=)c Fn(E)t Fp([)-7 b([)7 b Fg(e)1674
828 y Fd(i)1694 822 y Fp(])-7 b(])13 b Fg(\032)115 896
y Fp(\()p Fg(w)q(r)q(iteV)d(ar)k(p)g(v)q Fp(\))28 b Fn(?)97
b Fp(=)42 b(\()p Fn(?)p Fg(;)20 b Fn(?)p Fp(\))115 972
y(\()p Fg(w)q(r)q(iteV)10 b(ar)k(p)g(v)q Fp(\))h(\()p
Fg(\034)r(;)7 b(w)q Fp(\))41 b(=)623 913 y Fc(\032)675
946 y Fp(\()p Fn(?)p Fg(;)20 b Fn(?)p Fp(\))p Fg(;)161
b Fm(if)19 b Fg(p)12 b Fn(62)f Fg(dom)p Fp(\()p Fg(\034)5
b Fp(\))675 996 y(\(\(\))p Fg(;)21 b(\034)5 b Fp([)p
Fg(p)10 b Fn(7!)h Fg(v)q Fp(]\))p Fg(;)42 b Fm(otherwise)639
1110 y Fp(Figure)14 b(3:)k(Seman)o(tics)13 b(of)g(v)n(ariables)p
-120 1134 V -120 1364 V 2 1470 a Fn(E)t Fp([)-7 b([)7
b Fl(newArr)k Fg(e)214 1476 y Fj(1)247 1470 y Fg(e)266
1476 y Fj(2)292 1470 y Fp(])-7 b(])136 b(=)518 1411 y
Fc(\032)570 1444 y Fn(?)p Fg(;)248 b Fm(if)19 b Fg(v)931
1450 y Fj(1)962 1444 y Fp(=)11 b Fn(?)570 1494 y Fg(new)q(Ar)q(r)k(v)
750 1500 y Fj(1)783 1494 y Fg(v)803 1500 y Fj(2)863 1494
y Fm(otherwise)2 1569 y Fn(E)t Fp([)-7 b([)7 b Fl(readArr)k
Fg(e)236 1575 y Fj(1)269 1569 y Fg(e)288 1575 y Fj(2)313
1569 y Fp(])-7 b(])115 b(=)518 1511 y Fc(\032)570 1544
y Fn(?)p Fg(;)256 b Fm(if)19 b Fg(v)939 1550 y Fj(1)969
1544 y Fp(=)12 b Fn(?)j Fm(or)h Fg(v)1141 1550 y Fj(2)1171
1544 y Fp(=)c Fn(?)570 1594 y Fg(r)q(eadAr)q(r)j(v)758
1600 y Fj(1)790 1594 y Fg(v)810 1600 y Fj(2)871 1594
y Fm(otherwise)1399 1569 y(where)h Fg(v)1560 1575 y Fd(i)1585
1569 y Fp(=)c Fn(E)t Fp([)-7 b([)7 b Fg(e)1698 1575 y
Fd(i)1718 1569 y Fp(])-7 b(])13 b Fg(\032)2 1669 y Fn(E)t
Fp([)-7 b([)7 b Fl(writeArr)k Fg(e)258 1675 y Fj(1)290
1669 y Fg(e)309 1675 y Fj(2)342 1669 y Fg(e)361 1675
y Fj(3)387 1669 y Fp(])-7 b(])41 b(=)518 1610 y Fc(\032)570
1644 y Fn(?)p Fg(;)325 b Fm(if)19 b Fg(v)1008 1650 y
Fj(1)1038 1644 y Fp(=)12 b Fn(?)j Fm(or)h Fg(v)1210 1650
y Fj(2)1240 1644 y Fp(=)c Fn(?)570 1693 y Fg(w)q(r)q(iteAr)q(r)j(v)774
1699 y Fj(1)807 1693 y Fg(v)827 1699 y Fj(2)860 1693
y Fg(v)880 1699 y Fj(3)940 1693 y Fm(otherwise)2 1769
y Fn(E)t Fp([)-7 b([)7 b Fl(freezeArr)j Fg(e)279 1775
y Fj(1)305 1769 y Fp(])-7 b(])123 b(=)518 1710 y Fc(\032)570
1743 y Fn(?)p Fg(;)230 b Fm(if)20 b Fg(v)914 1749 y Fj(1)944
1743 y Fp(=)12 b Fn(?)570 1793 y Fg(f)t(r)q(eez)r(eAr)q(r)q(v)783
1799 y Fj(1)845 1793 y Fm(otherwise)2 1893 y Fp(\()p
Fg(new)q(Ar)q(r)j(n)e(v)q Fp(\))29 b Fn(?)221 b Fp(=)41
b(\()p Fn(?)p Fg(;)7 b Fn(?)p Fp(\))2 1943 y(\()p Fg(new)q(Ar)q(r)15
b(n)e(v)q Fp(\))i(\()p Fg(\034)r(;)7 b(w)q Fp(\))166
b(=)41 b(\(\()p Fg(p;)7 b(n)p Fp(\))p Fg(;)20 b Fp(\()p
Fg(\034)5 b Fp([)p Fg(p)11 b Fn(7!)g Fg(v)q(;)c(:)g(:)g(:)f(;)h
Fp(\()p Fg(p)h Fp(+)i Fg(n)f Fn(\000)h Fp(1\))h Fn(7!)g
Fg(v)q Fp(])p Fg(;)c(w)q Fp(\)\))609 1992 y Fg(w)q(her)q(e)15
b Fn(8)p Fg(q)d Fp(:)f Fn(f)p Fg(p)c(:)g(:)g(:)e Fp(\()p
Fg(p)k Fp(+)h Fg(n)f Fn(\000)h Fp(1\))p Fn(g)p Fg(:q)h
Fn(62)g Fg(dom)p Fp(\()p Fg(\034)5 b Fp(\))2 2092 y(\()p
Fg(r)q(eadAr)q(r)14 b Fp(\()p Fg(p;)7 b(n)p Fp(\))14
b Fg(i)p Fp(\))28 b Fn(?)149 b Fp(=)41 b(\()p Fn(?)p
Fg(;)7 b Fn(?)p Fp(\))2 2167 y(\()p Fg(r)q(eadAr)q(r)14
b Fp(\()p Fg(p;)7 b(n)p Fp(\))14 b Fg(i)p Fp(\))g(\()p
Fg(\034)r(;)7 b(w)q Fp(\))94 b(=)609 2109 y Fc(\032)661
2142 y Fp(\()p Fn(?)p Fg(;)7 b Fn(?)p Fp(\))p Fg(;)246
b Fm(if)19 b Fg(i)12 b Fn(62)f(f)p Fp(0)c Fg(:)g(:)g(:)e
Fp(\()p Fg(n)k Fn(\000)h Fp(1\))p Fn(g)15 b Fm(or)h Fg(p)9
b Fp(+)g Fg(i)j Fn(62)f Fg(dom)p Fp(\()p Fg(\034)5 b
Fp(\))661 2192 y(\()p Fg(\034)19 b Fp(\()p Fg(p)9 b Fp(+)h
Fg(i)p Fp(\))p Fg(;)21 b Fp(\()p Fg(\034)r(;)7 b(w)q
Fp(\)\))p Fg(;)41 b Fm(otherwise)2 2291 y Fp(\()p Fg(w)q(r)q(iteAr)q(r)
15 b Fp(\()p Fg(p;)7 b(n)p Fp(\))13 b Fg(i)h(v)q Fp(\))29
b Fn(?)97 b Fp(=)41 b(\()p Fn(?)p Fg(;)7 b Fn(?)p Fp(\))2
2366 y(\()p Fg(w)q(r)q(iteAr)q(r)15 b Fp(\()p Fg(p;)7
b(n)p Fp(\))13 b Fg(i)h(v)q Fp(\))h(\()p Fg(\034)r(;)7
b(w)q Fp(\))42 b(=)609 2308 y Fc(\032)661 2341 y Fp(\()p
Fn(?)p Fg(;)7 b Fn(?)p Fp(\))p Fg(;)321 b Fm(if)19 b
Fg(i)12 b Fn(62)f(f)p Fp(0)c Fg(:)g(:)g(:)e Fp(\()p Fg(n)k
Fn(\000)h Fp(1\))p Fn(g)15 b Fm(or)h Fg(p)9 b Fp(+)g
Fg(i)j Fn(62)f Fg(dom)p Fp(\()p Fg(\034)5 b Fp(\))661
2391 y(\(\(\))p Fg(;)21 b Fp(\()p Fg(\034)5 b Fp([)p
Fg(p)k Fp(+)g Fg(i)j Fn(7!)f Fg(v)q Fp(])p Fg(;)c(w)q
Fp(\)\))p Fg(;)41 b Fm(otherwise)2 2490 y Fp(\()p Fg(f)t(r)q(eez)r(eAr)
q(r)16 b Fp(\()p Fg(p;)7 b(n)p Fp(\)\))28 b Fn(?)136
b Fp(=)41 b(\()p Fn(?)p Fg(;)7 b Fn(?)p Fp(\))2 2566
y(\()p Fg(f)t(r)q(eez)r(eAr)q(r)16 b Fp(\()p Fg(p;)7
b(n)p Fp(\)\))14 b(\()p Fg(\034)r(;)7 b(w)q Fp(\))81
b(=)609 2507 y Fc(\032)661 2540 y Fp(\()p Fn(?)p Fg(;)7
b Fn(?)p Fp(\))p Fg(;)408 b Fm(if)20 b Fn(9)p Fg(q)12
b Fp(:)f Fn(f)p Fg(p)c(:)g(:)g(:)e Fp(\()p Fg(p)k Fp(+)h
Fg(n)f Fn(\000)h Fp(1\))p Fn(g)p Fg(:q)h Fn(62)h Fg(dom\034)661
2590 y Fp(\()p Fn(f)p Fg(i)g Fn(7!)f Fg(\034)5 b Fp(\()p
Fg(p)k Fp(+)h Fg(i)p Fp(\))p Fn(g)939 2575 y Fd(n)939
2601 y(i)p Fj(=0)995 2590 y Fg(;)20 b Fp(\()p Fg(\034)r(;)7
b(w)q Fp(\)\))p Fg(;)41 b Fm(otherwise)657 2721 y Fp(Figure)14
b(4:)k(Seman)o(tics)13 b(of)g(Arra)o(ys)p -120 2744 V
920 2960 a(9)p eop
%%Page: 10 10
10 9 bop -120 195 a Fp(of)14 b(asp)q(ects.)23 b(Some)13
b(of)h(the)i(op)q(erations)f(are)g(strict.)21 b(F)m(or)15
b(exam-)-120 245 y(ple,)d Fl(readVar)o Fp(,)g(and)h Fl(writeVar)d
Fp(are)j(strict)h(in)e(their)h(references,)-120 295 y(but)g(none)g(of)f
(the)i(op)q(erations)f(are)g(strict)g(in)g(the)g(v)n(alues)g(stored.)
-120 345 y(Again,)h Fl(newVar)o Fp(,)g Fl(readVar)o Fp(,)h(and)g
Fl(writeVar)e Fp(are)i(strict)h(in)f(the)-120 394 y(state,)e(but)f
Fl(thenST)f Fp(and)h Fl(returnST)e Fp(are)j(not.)k(W)m(e)12
b(shall)f(return)-120 444 y(to)j(this)g(p)q(oin)o(t)f(in)h(a)f(momen)o
(t.)-120 524 y(Arra)o(y)18 b(references)j(are)d(treated)h(similarly)m
(,)c(except)20 b(that)e(they)-120 573 y(come)c(in)h(t)o(w)o(o)g(parts:)
21 b(the)15 b(base)h(reference)i(and)d(an)f(o\013set)i(\(the)-120
623 y(arra)o(y)g(index\).)24 b(W)m(e)16 b(assume)g(indexing)f(ranges)i
(from)d(0)i(to)g(the)-120 673 y(size)e(of)f(the)h(arra)o(y)g(min)o(us)e
(1.)17 b(Again,)c Fl(readArr)f Fp(and)h Fl(writeArr)-120
723 y Fp(are)18 b(strict)h(in)f(b)q(oth)g(the)g(arra)o(y)g(reference)i
(and)e(in)f(the)i(index.)-120 773 y(They)14 b(also)f(return)h
(unde\014ned)h(if)e(the)h(index)f(is)h(out)f(of)g(b)q(ounds.)-120
822 y(Finally)m(,)g(they)j(and)f Fl(newArr)f Fp(are)h(strict)h(in)f
(the)h(state.)22 b Fl(newArr)-120 872 y Fp(is)14 b(also)f(strict)i(in)e
(the)i(arra)o(y)e(size.)-120 952 y(The)k(seman)o(tics)g(mak)o(es)e(the)
j(nature)f(of)f(arra)o(ys)h(crystal)g(clear.)-120 1001
y(They)k(are)h(comp)q(osed)f(of)f(man)o(y)f(separate)j(lo)q(cations)f
(in)g(the)-120 1051 y(state,)f(eac)o(h)f(indep)q(enden)o(tly)g(up)q
(datable,)g(eac)o(h)g(up)q(date)g(cost-)-120 1101 y(ing)13
b(no)h(more)f(than)h(a)f(v)n(ariable)g(up)q(date)h(w)o(ould)g(cost.)p
-120 1189 1030 2 v -17 1270 a Fn(E)t Fp([)-7 b([)7 b
Fl(ccall)k Fg(f)t(n)k(e)237 1276 y Fj(1)263 1270 y Fg(:)7
b(:)g(:)e(e)337 1276 y Fd(n)367 1270 y Fp(])-7 b(])24
1345 y(=)98 1286 y Fc(\032)150 1320 y Fn(?)p Fg(;)367
b Fm(if)19 b Fn(9)p Fg(i:v)679 1326 y Fd(i)704 1320 y
Fp(=)12 b Fn(?)150 1369 y Fg(doI)s(O)j(f)t(n)g Fp([)p
Fg(v)356 1375 y Fj(1)374 1369 y Fg(;)7 b(:)g(:)g(:)e(;)i(v)487
1375 y Fd(n)509 1369 y Fp(])41 b Fm(otherwise)27 1419
y(where)15 b Fg(v)187 1425 y Fd(i)212 1419 y Fp(=)d Fn(E)t
Fp([)-7 b([)7 b Fg(e)325 1425 y Fd(i)345 1419 y Fp(])-7
b(])13 b Fg(\032)-17 1519 y(doI)s(O)g Fp(:)e Fg(N)5 b(ame)12
b Fn(!)f Fg(S)r(eq)q(V)f(al)j Fn(!)38 1569 y Fg(S)r(tate)i(Real)q(W)6
b(or)q(l)q(d)12 b Fn(!)f Fp(\()p Fg(V)e(al)i Fn(\002)e
Fg(S)r(tate)15 b(Real)q(W)6 b(or)q(d)p Fp(\))-17 1619
y Fg(doI)s(O)15 b(f)t(n)f(ar)q(g)q(s)29 b Fn(?)116 b
Fp(=)42 b(\()p Fn(?)p Fg(;)20 b Fn(?)p Fp(\))-17 1668
y Fg(doI)s(O)15 b(f)t(n)f(ar)q(g)q(s)h Fp(\()p Fg(\034)r(;)7
b(r)q(w)q Fp(\))41 b(=)h(\()p Fg(v)q(;)21 b Fp(\()p Fg(\034)r(;)7
b(r)q(w)666 1653 y Fb(0)678 1668 y Fp(\)\))27 1718 y
Fm(where)15 b Fp(\()p Fg(v)q(;)7 b(r)q(w)274 1703 y Fb(0)285
1718 y Fp(\))12 b(=)g Fn(I)s(O)j Fg(f)t(n)f(ar)q(g)q(s)h(r)q(w)-17
1818 y Fn(I)s(O)d Fp(:)f Fg(N)5 b(ame)13 b Fn(!)e Fg(S)r(eq)16
b(V)9 b(al)k Fn(!)38 1868 y Fg(Real)q(W)6 b(or)q(l)q(d)12
b Fn(!)f Fp(\()p Fg(V)f(al)g Fn(\002)f Fg(Real)q(W)d(or)q(l)q(d)p
Fp(\))58 1999 y(Figure)14 b(5:)k(Seman)o(tics)13 b(of)g(IO)h(op)q
(erations)p -120 2022 V -120 2129 a(The)j(seman)o(tics)e(of)h(IO)h(op)q
(erations)f(is)g(giv)o(en)g(with)g(resp)q(ect)i(to)-120
2178 y(an)d(unsp)q(eci\014ed)j(function)d Fn(I)s(O)h
Fp(whic)o(h)g(is)f(a)g(state)i(transformer)-120 2228
y(on)d(the)g Fl(RealWorld)n Fp(.)-120 2308 y(The)h(primitiv)o(e)e(op)q
(erations,)i(suc)o(h)g(as)g Fl(newVar)o Fp(,)f Fl(readVar)o
Fp(,)g(and)-120 2357 y(so)i(on,)g(are)h(necessarily)g(strict)g(in)f
(the)h(state.)26 b(After)17 b(all,)e(they)-120 2407 y(eac)o(h)i(dep)q
(end)i(on)d(the)i(v)n(alue)e(of)g(the)i(state.)28 b(In)17
b(con)o(trast,)h(the)-120 2457 y(seman)o(tics)9 b(do)g(not)g(mak)o(e)f
Fl(thenST)g Fp(or)i Fl(runST)e Fp(strict)i(in)f(the)h(state,)-120
2507 y(since)15 b(they)f(do)g(not)g(need)g(its)g(v)n(alue.)-120
2586 y(What)19 b(di\013erence)j(migh)o(t)17 b(this)j(mak)o(e?)34
b(Consider)20 b(the)g(in)o(ter-)-120 2636 y(preter)c(for)d(a)h
(language)f(with)h(IO)g(op)q(erations)g(and)g(state)h(giv)o(en)-120
2686 y(in)g(Figure)h(6.)23 b(The)16 b(v)n(alues)g(of)f(v)n(ariables)g
(are)h(stored)g(in)g(a)f(m)o(u-)-120 2736 y(table)h(arra)o(y)m(,)g(and)
h(a)f(v)n(ariable)f(is)i(used)g(to)f(store)i(the)f(input)f(\(a)-120
2785 y(lazy)g(list\).)25 b(The)17 b(result)g(of)f(ob)q(eying)g(the)h
(commands)c(is)k(a)f(list)-120 2835 y(of)f(the)i(output)f(v)n(alues.)24
b(The)16 b(output)g(should)g(app)q(ear)g(as)g(it)f(is)951
195 y(generated:)30 b(whenev)o(er)21 b(a)e Fl(Write)f
Fp(is)i(ob)q(ey)o(ed,)h(the)f Fl(returnST)951 245 y Fp(should)12
b(b)q(e)i(able)e(to)h(mak)o(e)e(the)i(\014rst)h(elemen)o(t)e(of)g(its)h
(output)f(list)951 295 y(a)o(v)n(ailable)i(to)i(the)g(outside)h(w)o
(orld)e Fo(b)n(efor)n(e)h Fp(ob)q(eying)g(the)g(rest)i(of)951
345 y(the)c(commands.)951 465 y Fm(5.4)47 b(Safet)o(y)951
546 y Fp(Ho)o(w)14 b(can)i(w)o(e)f(b)q(e)g(sure)h(that)f(the)h(ab)q(o)o
(v)o(e)f(t)o(yp)q(e)g(system)g(ensures)951 595 y(that)c(eac)o(h)h
(state)h(thread)f(is)f(indep)q(enden)o(t)i(of)e(all)f(others?)19
b(A)11 b(full)951 645 y(pro)q(of)g(lies)h(w)o(ell)g(outside)g(the)h
(scop)q(e)g(of)e(this)h(pap)q(er,)h(but)f(w)o(e)g(will)951
695 y(pro)o(vide)j(an)f(outline)h(of)f(the)i(ideas,)f(together)h(with)e
(a)h(\(sligh)o(tly)951 745 y(informal\))c(statemen)o(t)j(of)f(the)h
(main)e(result.)951 824 y(Our)19 b(ultimate)e(in)o(ten)o(tion)i(is)f
(to)h(implemen)o(t)d(all)i(the)i(distinct)951 874 y(state)15
b(threads)g(using)e(the)i(single,)e(global,)f(mac)o(hine)g(state,)j
(but)951 924 y(to)j(do)g(so)g(without)g(a\013ecting)g(the)h(v)n(alues)f
(returned)i(b)o(y)e(state)951 974 y(computations.)j(That)15
b(is,)g(w)o(e)h(w)o(an)o(t)e(to)i(b)q(e)g(able)f(to)g(map)e(eac)o(h)951
1023 y(thread)f(on)g(to)f(the)i(global)d(state,)i(and)g(to)f(ensure)j
(that)e(the)g(indi-)951 1073 y(vidual)e(state)i(threads)h(cannot)e
(comm)o(unicate)e(with)i(eac)o(h)h(other)951 1123 y(except)21
b(through)e(purely)h(functional)f(v)n(alues.)35 b(Similarly)l(,)18
b(w)o(e)951 1173 y(w)o(an)o(t)d(to)h(guaran)o(tee)g(that)g(w)o(e)g(can)
g(arbitrarily)f(in)o(terlea)o(v)o(e)g(the)951 1223 y(ev)n(aluation)f
(of)g(separate)j(state)f(threads,)g(still)e(without)h(a\013ect-)951
1273 y(ing)10 b(the)h(result)g(of)f(the)i(computation)d(b)q(ecause,)j
(in)e(practice,)i(the)951 1322 y(amoun)o(t)g(of)h(computation)f(whic)o
(h)h(tak)o(es)h(place)g(in)f(eac)o(h)h(thread)951 1372
y(will)i(dep)q(end)j(on)e(the)i(demand)d(for)h(its)h(\014nal)f(v)n
(alue.)29 b(W)m(e)17 b(cer-)951 1422 y(tainly)e(do)h(not)g(w)o(an)o(t)g
(the)h(v)n(alue)e(of)h(the)h(result)g(to)f(dep)q(end)h(on)951
1472 y(the)d(pattern)h(of)e(demand.)951 1551 y(Consider)j(then)h(a)e
(single)h(state)h(thread.)24 b(In)16 b(the)h(seman)o(tics)e(it)951
1601 y(is)g(applied)f(to)h(the)h(empt)o(y)e(state,)i(and)e(this)i
(state)f(is)g(extended)951 1651 y(b)o(y)e(applications)f(of)g
Fl(newVar)g Fp(\(and)h Fl(newArr)f Fp(of)h(course\).)19
b(There)951 1701 y(are)13 b(no)h(other)g(activ)o(e)f(lo)q(cations,)f
(and)h(the)h(state)h(undergo)q(es)f(no)951 1750 y(transformations)d
(other)i(than)f(those)h(sp)q(eci\014ed)h(b)o(y)e(these)i(reads)951
1800 y(and)f(writes.)951 1880 y(In)k(con)o(trast,)i(if)e(w)o(e)h(w)o
(ere)g(to)g(imagine)d(using)i(a)g(single)h(global)951
1929 y(state)12 b(for)g Fo(al)r(l)f Fp(the)i(threads,)f(then)h(man)o(y)
d(more)h(lo)q(cations)g(w)o(ould)951 1979 y(b)q(e)21
b(activ)o(e)g(and,)h(b)q(ecause)h(of)d(p)q(ossible)h(in)o(terlea)o
(vings)f(of)g(op-)951 2029 y(erations)d(from)e(other)i(threads,)i(the)e
(underlying)f(state)i(migh)o(t)951 2079 y(c)o(hange)13
b(while)f(passing)h(from)e(one)i(primitiv)o(e)e(op)q(eration)i(to)f
(the)951 2129 y(next.)31 b(The)19 b(big)e(question)i(is:)26
b(ho)o(w)18 b(can)h(w)o(e)f(guaran)o(tee)h(that)951 2178
y(these)13 b(c)o(hanges)g(do)f(not)g(a\013ect)h(the)f(result)h(of)e
(the)i(state)g(thread?)951 2258 y(W)m(e)e(view)g(the)h(state)g(from)e
(the)i(p)q(ersp)q(ectiv)o(e)i(of)d(a)g(single)g(thread,)951
2308 y Fl(runST)21 b(m)o Fp(,)10 b(and)f(mo)q(del)f(the)i(c)o(hanges)g
(made)e(b)o(y)h(other)h(threads)h(as)951 2357 y(non-deterministic)h(c)o
(hanges)i(to)g(the)f(state.)19 b(So,)13 b(\014rst,)h(w)o(e)f(ha)o(v)o
(e)951 2407 y(to)k(map)f(the)i(state)g(of)e(this)i(particular)f(thread)
h(in)o(to)f(a)g(global)951 2457 y(state)k(con)o(taining)f(material)f
(from)g(man)o(y)f(separate)k(threads.)951 2507 y(W)m(e)12
b(mo)q(del)e(this)j(mapping)d(b)o(y)i(an)g(injection)f(\(one-to-one)i
(map-)951 2557 y(ping\))h Fg(\036)f Fp(:)f Fn(N)19 b(!)13
b(N)21 b Fp(whic)o(h)14 b(maps)g(a)g(reference)j(from)c(the)j(lo)q(cal)
951 2606 y(state)h(of)e Fl(m)h Fp(to)g(a)f(reference)k(in)c(a)h(global)
f(state.)25 b(The)16 b(range)h(of)951 2656 y Fg(\036)c
Fp(is)g(that)g(part)h(of)e(the)i(global)e(address)i(space)h(whic)o(h)e
(supp)q(orts)951 2706 y(the)h(execution)h(of)e Fl(m)p
Fp(.)951 2785 y(W)m(e)d(will)g(sa)o(y)g(that)h(a)g(global)e(state)j
Fg(\034)1518 2791 y Fj(1)1548 2785 y Fp(mo)q(dels)d(the)j(lo)q(cal)e
(state)i(of)951 2835 y(the)h(seman)o(tics,)e Fg(\034)1237
2841 y Fd(m)1269 2835 y Fp(,)h(if)f Fg(\034)1347 2841
y Fd(m)1391 2835 y Fp(=)h Fg(\034)1453 2841 y Fj(1)1477
2835 y Fn(\016)6 b Fg(\036)p Fp(.)17 b(That)12 b(is,)g(if)g
Fg(\034)1767 2841 y Fd(m)1811 2835 y Fp(is)g(de\014ned)909
2960 y(10)p eop
%%Page: 11 11
11 10 bop -120 195 a Fp(at)16 b(some)f(lo)q(cation)g
Fg(v)j Fp(to)e(ha)o(v)o(e)g(a)g(v)n(alue)g Fg(x)p Fp(,)f(then)i
Fg(\034)701 201 y Fj(1)736 195 y Fp(is)f(de\014ned)-120
245 y(at)c(lo)q(cation)f Fg(\036)g(x)h Fp(also)f(ha)o(ving)g(v)n(alue)h
Fg(x)p Fp(.)17 b(In)12 b(addition,)e(ho)o(w)o(ev)o(er,)-120
295 y Fg(\034)-102 301 y Fj(1)-67 295 y Fp(ma)o(y)15
b(b)q(e)j(de\014ned)g(at)e(lots)h(of)f(other)h(lo)q(cations)f(outside)i
(the)-120 345 y(range)c(of)f Fg(\036)p Fp(.)-120 424
y(W)m(e)i(can)g(also)g(relate)g(t)o(w)o(o)g(global)f(states)i(using)f
Fg(\036)p Fp(:)20 b(t)o(w)o(o)15 b(global)-120 474 y(states)g(are)e
(related)h(b)o(y)g Fg(\036)f Fp(if)f(they)i(b)q(oth)g(mo)q(del)e(the)i
(same)e(lo)q(cal)-120 524 y(state.)18 b(That)11 b(is,)154
513 y Fc(b)149 524 y Fg(\036)h Fp(:)f Fg(\034)227 530
y Fj(0)257 524 y Fn($)g Fg(\034)328 530 y Fj(1)358 524
y Fp(is)g(a)g(relation)g(de\014ned)i(b)o(y)e Fg(\034)793
530 y Fj(0)816 524 y Fn(\016)t Fg(\036)g Fp(=)-120 573
y Fg(\034)-102 579 y Fj(1)-77 573 y Fn(\016)6 b Fg(\036)p
Fp(.)18 b(So,)12 b(t)o(w)o(o)g(global)f(states)i(are)g(related)g(b)o(y)
653 562 y Fc(b)649 573 y Fg(\036)f Fp(if)g(they)h(agree)-120
623 y(in)i(all)f(the)i(p)q(ositions)f(in)g(the)h(range)g(of)f
Fg(\036)p Fp(,)g(but)h(they)g(can)f(ha)o(v)o(e)-120 673
y(an)o(y)e(old)h(junk)f(in)h(all)e(other)j(lo)q(cations.)-120
752 y(No)o(w,)c(when)g(w)o(e)g(actually)f(ev)n(aluate)g
Fl(runST)21 b(m)p Fp(,)10 b(w)o(e)h(will)f(allo)q(cate)-120
802 y(lo)q(cations)f(only)f(in)h(the)h(range)g(of)f Fg(\036)p
Fp(.)16 b(Of)9 b(course,)i Fg(\036)e Fp(only)g(exists)h(as)-120
852 y(a)17 b(mathematical)d(abstraction.)30 b(The)18
b(allo)q(cation)e(mec)o(hanism)-120 902 y(will)11 b(merely)h(c)o(ho)q
(ose)h(a)f(free)i(lo)q(cation:)i Fg(\036)c Fp(acts)i(as)e(a)h
(description)-120 952 y(of)g(ho)o(w)h(the)g(allo)q(cation)f(mec)o
(hanism)e(will)h(ha)o(v)o(e)i(b)q(eha)o(v)o(ed.)-120
1031 y(Eac)o(h)25 b(separate)i(thread)f(will)d(allo)q(cate)i
(references)j(in)d(non-)-120 1081 y(o)o(v)o(erlapping)15
b(areas)i(\(otherwise)g(the)g(lo)q(cations)e(w)o(ould)h(not)g(b)q(e)
-120 1131 y(a)o(v)n(ailable\).)33 b(So)19 b(from)e(the)j(p)q(ersp)q
(ectiv)o(e)i(of)d(a)g(single)g(thread,)-120 1180 y(the)c(p)q(ossible)f
(c)o(hanges)h(to)f(the)h(references)h(b)q(elonging)e(to)g(other)-120
1230 y(threads)h(can)f(b)q(e)g(describ)q(ed)i(b)o(y)e(allo)o(wing)d
(the)k(state)f(to)g(b)q(e)h Fo(any)-120 1280 y Fp(state)g(whic)o(h)e
(happ)q(ens)i(to)f(mo)q(del)e(the)j(true)g(lo)q(cal)e(state)h(b)o(y)g
Fg(\036)p Fp(.)-120 1359 y(No)o(w)h(w)o(e)h(can)g(almost)e(state)i(the)
h(main)c(correctness)19 b(theorem.)-120 1409 y(T)m(o)d(do)h(so,)h(w)o
(e)f(write)g Fg(m)h Fp(for)f(the)g(meaning)f(of)g(a)h(state)h(trans-)
-120 1459 y(former)12 b Fl(m)g Fp(as)h(giv)o(en)f(b)o(y)g(the)h(seman)o
(tics,)f(and)h Fg(m)644 1465 y Fd(\036)679 1459 y Fp(as)f(the)i(mean-)
-120 1509 y(ing)19 b(of)g Fl(m)h Fp(assuming)e(states)j(are)g
(referenced)h(via)d(the)h(co)q(ding)-120 1559 y(function)11
b Fg(\036)p Fp(.)17 b(That)11 b(is,)h(the)g(same)e(seman)o(tics,)h
(except)i(that)f Fg(bind)-120 1608 y Fp(and)i Fg(new)q(V)9
b(ar)15 b Fp(are)f(replaced)h(with)f Fg(bind)532 1614
y Fd(\036)567 1608 y Fp(and)g Fg(new)q(V)9 b(ar)797 1614
y Fd(\036)29 1703 y Fp(\()p Fg(bind)124 1709 y Fd(\036)160
1703 y Fg(m)14 b(k)q Fp(\))g Fg(\033)f Fp(=)f Fg(k)j(x)e(\033)443
1688 y Fb(00)73 1753 y Fm(where)36 b Fp(\()p Fg(x;)7
b(\033)318 1737 y Fb(0)329 1753 y Fp(\))12 b(=)g Fg(m)i(\033)234
1808 y(\033)259 1793 y Fb(0)289 1797 y Fc(b)285 1808
y Fg(\036)f(\033)348 1793 y Fb(00)29 1908 y Fp(\()p Fg(new)q(V)d(ar)195
1914 y Fd(\036)231 1908 y Fg(v)q Fp(\))k(\()p Fg(\034)r(;)7
b(w)q Fp(\))12 b(=)g(\()p Fg(p;)20 b Fp(\()p Fg(\034)5
b Fp([)p Fg(p)11 b Fn(7!)g Fg(v)q Fp(])p Fg(;)c(w)q Fp(\)\))73
1958 y Fm(where)15 b Fg(p)d Fn(62)f Fg(dom)p Fp(\()p
Fg(\034)5 b Fp(\))10 b Fn(^)e Fg(p)k Fn(2)f Fg(r)q(an)p
Fp(\()p Fg(\036)p Fp(\))-120 2049 y(The)k(only)g(di\013erences)i(are)e
(that)g Fg(new)q(V)10 b(ar)16 b Fp(is)e(only)h(allo)o(w)o(ed)e(to)-120
2099 y(allo)q(cate)18 b(lo)q(cations)g(in)g(the)g(range)h(of)f
Fg(\036)p Fp(,)g(and)h(that)f Fg(bind)g Fp(can)-120 2149
y(alter)g(its)g(in)o(termediate)f(state)i(so)f(long)f(as)h(the)h
(status)f(of)g(the)-120 2199 y(lo)q(cations)13 b(in)h(the)g(range)g(of)
g Fg(\036)f Fp(are)i(preserv)o(ed.)-120 2278 y Fm(Theorem.)24
b Fp(If)16 b Fg(m)f Fp(:)g Fn(8)p Fg(s:S)r(T)23 b(s)16
b(T)22 b Fp(\(where)c Fg(s)31 b Fn(62)15 b Fg(F)6 b(V)j
Fp(\()p Fg(T)d Fp(\)\))17 b(then)-120 2328 y(for)d(an)o(y)f(injection)h
Fg(\036)e Fp(:)f Fn(N)18 b(!)12 b(N)6 b Fp(,)14 b(and)g(an)o(y)f
Fg(\034)k Fp(:)11 b Fn(N)19 b Fg(,)-7 b Fn(!)11 b Fo(V)m(al)17
b Fp(suc)o(h)-120 2378 y(that)e Fg(\034)g Fn(\016)10
b Fg(\036)k Fp(=)g Fn(;)p Fp(,)h(w)o(e)h(ha)o(v)o(e)f
Fg(\031)352 2384 y Fj(1)385 2378 y Fp(\()p Fg(m)h Fp(\()p
Fn(;)p Fg(;)7 b(w)q Fp(\)\))14 b(=)g Fg(\031)656 2384
y Fj(1)690 2378 y Fp(\()p Fg(m)742 2384 y Fd(\036)779
2378 y Fp(\()p Fg(\034)r(;)7 b(w)q Fp(\)\),)-120 2427
y(for)14 b(all)e(real)i(w)o(orlds)g Fg(w)q Fp(.)-120
2507 y(The)i(pro)q(of)f(uses)i(parametric)e(p)q(olymorphism)d(in)k(the)
g(st)o(yle)g(of)-120 2557 y(Mitc)o(hell)d(&)i(Mey)o(er)f([1985].)-120
2636 y(The)f(theorem)f(sa)o(ys)h(that)g(w)o(e)f(can)h(c)o(ho)q(ose)g
(an)o(y)f(initial)f(state,)i(so)-120 2686 y(long)f(as)h(nothing)g(is)g
(de\014ned)h(in)e(the)i(range)f(of)g Fg(\036)p Fp(,)f(and)h(the)h
(\014nal)-120 2736 y(result)i(is)g(the)g(same)f(as)h(when)g(the)g
(seman)o(tics)g(explicitly)e(used)-120 2785 y(purely)h(lo)q(cal)f
(state.)23 b(F)m(urthermore,)15 b(the)g(state)h(can)f(c)o(hange)h(in)
-120 2835 y(eac)o(h)d(use)g(of)e Fl(thenST)g Fp(\(mo)q(delled)g(b)o(y)h
Fg(bind)p Fp(\))g(so)g(long)g(as)g(nothing)951 195 y(in)g(the)i(range)g
(of)e Fg(\036)h Fp(is)g(touc)o(hed)h(and,)e(again,)g(the)i(\014nal)e
(result)i(is)951 245 y(unc)o(hanged.)951 324 y(The)c(corollary)f(to)h
(this)g(is)g(that)g(no)g(state)h(thread)f(can)h(read)f(a)g(ref-)951
374 y(erence)17 b(allo)q(cated)e(b)o(y)g(another)h(thread)g
(\(otherwise)g(the)g(result)951 424 y(of)h Fl(runST)k(m)c
Fo(would)h Fp(dep)q(end)h(on)f(the)g(c)o(hoice)h(of)e(initial)f(state,)
951 474 y(or)j(on)g(ho)o(w)f(the)i(other)g(parts)f(of)g(the)g(state)h
(c)o(hanged)g(within)951 524 y(an)e(application)f(of)h
Fg(bind)p Fp(\).)32 b(Similarl)o(y)m(,)16 b(no)i(state)i(thread)f(can)
951 573 y(write)14 b(to)g(a)g(reference)i(b)q(elonging)d(to)h(another)h
(thread)f(b)q(ecause)951 623 y(the)i(result)g(of)f Fg(w)q(r)q(iteV)10
b(ar)16 b Fp(dep)q(ends)h(on)f(whether)h(the)f(lo)q(cation)951
673 y(is)i(allo)q(cated)g(or)g(not,)h(but)g(again,)f(the)h(result)g(of)
f Fl(runST)j(m)d Fp(is)951 723 y(indep)q(enden)o(t)d(of)e(suc)o(h)i
(matters.)951 802 y(In)k(conclusion,)i(therefore,)h(eac)o(h)f(thread)f
(is)g(indep)q(enden)o(t)h(of)951 852 y(other)15 b(threads,)g(ev)o(en)h
(when)f(implem)o(en)o(ted)e(in)h(a)g(single)h(global)951
902 y(store.)951 1034 y Fq(6)56 b(Implem)o(en)n(tation)951
1122 y Fp(The)18 b(whole)g(p)q(oin)o(t)f(of)h(expressing)h(stateful)f
(computations)e(in)951 1172 y(the)f(framew)o(ork)d(that)j(w)o(e)f(ha)o
(v)o(e)g(describ)q(ed)i(is)e(that)h(op)q(erations)951
1221 y(whic)o(h)20 b(mo)q(dify)e(the)j(state)g(can)g(up)q(date)f(the)h
(state)h Fo(in)e(plac)n(e)p Fp(.)951 1271 y(The)14 b(implemen)o(tation)
d(is)j(therefore)i(crucial)e(to)g(the)h(whole)f(en-)951
1321 y(terprise,)h(rather)f(than)g(b)q(eing)g(a)g(p)q(eripheral)g
(issue.)951 1400 y(W)m(e)20 b(ha)o(v)o(e)h(in)f(mind)f(the)i(follo)o
(wing)d(implemen)o(tation)f(frame-)951 1450 y(w)o(ork:)992
1558 y Fn(\017)k Fp(The)d Fo(state)f Fp(of)g(eac)o(h)g(encapsulated)i
(state)f(thread)g(is)f(rep-)1034 1608 y(resen)o(ted)g(b)o(y)d(a)h
(collection)f(of)h(ob)r(jects)h(in)e(heap-allo)q(cated)1034
1658 y(storage.)992 1738 y Fn(\017)21 b Fp(A)10 b Fo(r)n(efer)n(enc)n
(e)g Fp(is)h(represen)o(ted)i(b)o(y)e(the)g(address)h(of)e(an)g(ob)r
(ject)1034 1788 y(in)j(heap-allo)q(cated)h(store.)992
1869 y Fn(\017)21 b Fp(A)14 b Fo(r)n(e)n(ad)h(op)n(er)n(ation)f
Fp(returns)i(the)f(curren)o(t)g(con)o(ten)o(ts)h(of)d(the)1034
1919 y(ob)r(ject)h(whose)h(reference)h(is)e(giv)o(en.)992
1999 y Fn(\017)21 b Fp(A)10 b Fo(write)g(op)n(er)n(ation)h
Fp(o)o(v)o(erwrites)g(the)g(con)o(ten)o(ts)g(of)f(the)h(sp)q(ec-)1034
2049 y(i\014ed)i(ob)r(ject)h(or,)f(in)f(the)i(case)g(of)f(m)o(utable)e
(arra)o(ys,)i(part)h(of)1034 2099 y(the)g(con)o(ten)o(ts.)992
2179 y Fn(\017)21 b Fp(The)c(I/O)g(thread)g(is)g(a)g(little)f
(di\013eren)o(t)h(b)q(ecause,)i(as)e(dis-)1034 2229 y(cussed)11
b(in)e(Section)h(5.3,)e(its)i(state)g(also)f(includes)g(the)h(actual)
1034 2279 y(state)g(of)f(the)h(real)f(w)o(orld.)16 b(I/O)9
b(op)q(erations)h(are)g(carried)g(out)1034 2329 y(directly)j(on)g(the)h
(real)f(w)o(orld)f(\(up)q(dating)h(it)g(in)f(place,)h(as)g(it)1034
2379 y(w)o(ere\).)951 2487 y(As)k(the)g(previous)f(section)i(outlined,)
e(the)h(correctness)i(of)d(this)951 2536 y(implemen)o(tati)o(on)f
(relies)i(totally)f(on)i(the)g(t)o(yp)q(e)f(system.)29
b(Suc)o(h)951 2586 y(a)16 b(reliance)i(is)e(quite)h(familiar:)k(for)c
(example,)e(the)j(implemen-)951 2636 y(tation)h(of)h(addition)f(mak)o
(es)g(no)i(attempt)e(to)h(c)o(hec)o(k)i(that)e(its)951
2686 y(argumen)o(ts)15 b(are)i(indeed)g(in)o(tegers,)h(b)q(ecause)g
(the)f(t)o(yp)q(e)g(system)951 2736 y(ensures)f(it.)i(In)d(the)f(same)g
(w)o(a)o(y)m(,)e(the)j(implemen)o(tatio)o(n)d(of)h(state)951
2785 y(transformers)18 b(mak)o(es)f(no)h(attempt)f(to)h(ensure,)i(for)e
(example,)951 2835 y(that)c(references)j(are)d(only)f(used)i(in)f(the)h
(same)e(state)i(thread)f(in)909 2960 y(11)p eop
%%Page: 12 12
12 11 bop -120 195 a Fp(whic)o(h)18 b(they)i(w)o(ere)f(created;)j(the)d
(t)o(yp)q(e)g(system)g(ensures)h(that)-120 245 y(this)14
b(is)g(so.)-120 370 y Fm(6.1)48 b(Up)q(date)14 b(in)h(place)-120
452 y Fp(The)h(most)e(critical)h(correctness)k(issue)d(concerns)i(the)e
(up)q(date-)-120 501 y(in-place)10 b(b)q(eha)o(viour)h(of)f(write)h(op)
q(erations.)17 b(Wh)o(y)11 b(is)f(up)q(date-in-)-120
551 y(place)h(safe?)17 b(It)11 b(is)f(safe)h(b)q(ecause)h(all)e(the)h
(com)o(binators)e(\()p Fl(thenST)o Fp(,)-120 601 y Fl(returnST)n
Fp(,)k Fl(fixST)o Fp(\))h(use)g(the)g(state)h(only)d(in)h(a)g
(single-threaded)-120 651 y(manner)j(\(Sc)o(hmidt)g([1985]\);)h(that)g
(is,)g(they)h(eac)o(h)f(use)h(the)g(in-)-120 701 y(coming)d(state)k
(exactly)e(once,)h(and)g(none)f(duplicates)h(it)f(\(Fig-)-120
750 y(ure)f(2\).)22 b(F)m(urthermore,)15 b(all)f(the)i(primitiv)o(e)d
(op)q(erations)j(on)f(the)-120 800 y(state)i(are)h(strict)f(in)f(it.)26
b(A)17 b(write)g(op)q(eration)f(can)h(mo)q(dify)e(the)-120
850 y(state)20 b(in)f(place,)h(b)q(ecause)h(\(a\))f(it)f(has)g(the)h
(only)f(cop)o(y)g(of)g(the)-120 900 y(incoming)13 b(state,)i(and)g
(\(b\))g(since)h(it)f(is)g(strict)g(in)g(the)h(incoming)-120
950 y(state,)d(there)g(can)f(b)q(e)h(no)e(as-y)o(et-unev)n(aluated)i
(read)f(op)q(erations)-120 999 y(p)q(ending)i(on)g(that)g(state.)-120
1079 y(Can)i(the)g(programmer)d(someho)o(w)i(duplicate)h(the)g(state?)
25 b(No:)-120 1129 y(since)12 b(the)f Fl(ST)f Fp(t)o(yp)q(e)i(is)f
(opaque,)f(the)i(only)e(w)o(a)o(y)g(the)i(programmer)-120
1178 y(can)j(manipulate)d(the)k(state)f(is)g Fo(via)f
Fp(the)i(com)o(binators)d Fl(thenST)o Fp(,)-120 1228
y Fl(returnST)h Fp(and)i Fl(fixST)o Fp(.)23 b(On)16 b(the)h(other)f
(hand,)g(the)g(program-)-120 1278 y(mer)f(certainly)h(do)q(es)h(ha)o(v)
o(e)f(access)h(to)f(named)f(references)k(in)o(to)-120
1328 y(the)14 b(state.)k(Ho)o(w)o(ev)o(er,)13 b(it)g(is)g(p)q(erfectly)
h(OK)f(for)g(these)h(to)f(b)q(e)g(du-)-120 1378 y(plicated,)k(stored)g
(in)f(data)g(structures)j(and)e(so)f(on.)26 b(V)m(ariables)-120
1428 y(are)11 b Fo(immutable)p Fp(;)g(it)f(is)h(only)f(the)h(state)g
(to)g(whic)o(h)f(they)h(refer)h(that)-120 1477 y(is)i(altered)g(b)o(y)g
(a)f(write)i(op)q(eration.)-120 1557 y(W)m(e)k(\014nd)g(these)i
(argumen)o(ts)d(con)o(vincing,)i(but)f(they)h(are)f(cer-)-120
1606 y(tainly)d(not)h(formal.)24 b(A)17 b(formal)d(pro)q(of)j(w)o(ould)
f(necessarily)i(in-)-120 1656 y(v)o(olv)o(e)g(some)h(op)q(erational)f
(seman)o(tics,)i(and)f(a)f(pro)q(of)h(that)g(no)-120
1706 y(ev)n(aluation)c(order)h(could)g(c)o(hange)g(the)h(b)q(eha)o
(viour)e(of)h(the)g(pro-)-120 1756 y(gram.)g(W)m(e)e(ha)o(v)o(e)g(not)f
(y)o(et)i(undertak)o(en)f(suc)o(h)h(a)f(pro)q(of.)-120
1881 y Fm(6.2)48 b(E\016ciency)15 b(consideration)o(s)-120
1963 y Fp(It)g(w)o(ould)f(b)q(e)i(p)q(ossible)f(to)g(implem)o(en)o(t)e
(state)j(transformers)e(b)o(y)-120 2012 y(pro)o(viding)h(the)i(com)o
(binators)e(\()p Fl(thenST)o Fp(,)i Fl(returnST)n Fp(,)g(etc\))g(and)
-120 2062 y(primitiv)o(e)d(op)q(erations)i(\()p Fl(readVar)n
Fp(,)g Fl(writeVar)e Fp(etc\))j(as)f(library)-120 2112
y(functions.)k(But)15 b(this)f(w)o(ould)g(imp)q(ose)f(a)h(v)o(ery)h
(hea)o(vy)f(o)o(v)o(erhead)-120 2162 y(on)h(eac)o(h)i(op)q(eration)e
(and)h(\(w)o(orse)g(still\))f(on)g(comp)q(osition.)22
b(F)m(or)-120 2212 y(example,)10 b(a)h(use)i(of)e Fl(thenST)f
Fp(w)o(ould)g(en)o(tail)h(the)h(construction)h(of)-120
2261 y(t)o(w)o(o)i(function-v)n(alued)g(argumen)o(ts,)h(follo)o(w)o(ed)
e(b)o(y)i(a)f(pro)q(cedure)-120 2311 y(call)h(to)h Fl(thenST)o
Fp(.)28 b(This)17 b(compares)g(v)o(ery)g(p)q(o)q(orly)g(with)g(simple)
-120 2361 y(juxtap)q(osition)f(of)g(co)q(de,)h(whic)o(h)g(is)g(ho)o(w)f
(sequen)o(tial)h(comp)q(osi-)-120 2411 y(tion)c(is)h(implemen)o(ted)e
(in)h(con)o(v)o(en)o(tional)g(languages!)-120 2486 y(A)k(b)q(etter)i(w)
o(a)o(y)d(w)o(ould)h(b)q(e)h(to)e(treat)i(state-transformer)g(op)q(er-)
-120 2532 y(ations)i(sp)q(ecially)g(in)h(the)g(co)q(de)g(generator.)39
b(But)21 b(that)g(risks)-120 2577 y(complicating)d(an)h(already)h
(complex)f(part)h(of)f(the)i(compiler.)-120 2623 y(Instead)15
b(w)o(e)f(implemen)o(t)e(state)i(transformers)g(in)g(a)g(w)o(a)o(y)f
(whic)o(h)-120 2669 y(is)j(b)q(oth)g(direct)g(and)g(e\016cien)o(t:)22
b(w)o(e)16 b(simply)e(giv)o(e)i(Hask)o(ell)f(de\014-)-120
2714 y(nitions)e(for)h(the)g(com)o(binators.)-81 2790
y Fk(type)k(ST)h(s)g(a)h(=)f(State)f(s)h(->)g(\(a,)f(State)g(s\))990
195 y(returnST)f(x)i(s)g(=)g(\(x,s\))990 241 y(thenST)e(m)j(k)f(s)g(=)g
(k)g(x)h(s')e(where)g(\(x,s'\))f(=)j(m)f(s)990 332 y(fixST)f(k)h(s)g(=)
g(\(r,s'\))f(where)f(\(r,s'\))h(=)h(k)g(r)g(s)990 378
y(runST)f(m)h(=)g(r)g(where)f(\(r,s\))g(=)h(m)g(currentSta)o(te)951
457 y Fp(Rather)j(than)f(pro)o(vide)h Fl(ST)f Fp(as)g(a)h(built-in)e(t)
o(yp)q(e,)k(opaque)d(to)951 507 y(the)16 b(compiler,)f(w)o(e)h(giv)o(e)
g(its)g(represen)o(tation)h(with)f(an)f(explicit)951
557 y(Hask)o(ell)e(t)o(yp)q(e)i(de\014nition.)i(\(The)e(represen)o
(tation)g(of)e Fl(ST)h Fp(is)g(not,)951 607 y(of)c(course,)i(exp)q
(osed)g(to)f(the)g(programmer,)e(lest)i(he)g(or)g(she)h(write)951
656 y(functions)g(whic)o(h)g(duplicate)g(or)g(discard)g(the)h(state.\))
18 b(It)12 b(is)g(then)951 706 y(easy)e(to)g(giv)o(e)g(Hask)o(ell)f
(de\014nitions)i(for)e(the)i(com)o(binators,)e(whic)o(h)951
756 y(mirror)f(precisely)j(the)f(seman)o(tics)f(giv)o(en)g(for)g(them)g
(in)g(Figure)h(2)1950 741 y Fj(4)1968 756 y Fp(.)951
835 y(The)15 b(implemen)o(tation)d(of)i Fl(runST)g Fp(is)h(in)o
(triguing.)20 b(Since)c(its)f(ar-)951 885 y(gumen)o(t,)d
Fl(m)o Fp(,)h(w)o(orks)h(regardless)h(of)d(what)i(state)g(is)f(passed)i
(to)e(it,)951 935 y(w)o(e)j(simply)e(pass)i(a)f(v)n(alue)h(represen)o
(ting)h(the)g(curren)o(t)g(state)g(of)951 985 y(the)11
b(heap.)17 b(As)12 b(w)o(e)f(will)e(see)j(shortly)f(\(Section)g
(6.2.2\),)f(this)h(v)n(alue)951 1035 y(is)i(nev)o(er)i(actually)e(lo)q
(ok)o(ed)h(at,)f(so)h(a)f(constan)o(t)i(v)n(alue)e(will)f(do.)951
1114 y(The)17 b(co)q(de)h(generator)g(m)o(ust,)f(of)f(course,)j(remain)
d(resp)q(onsible)951 1164 y(for)c(pro)q(ducing)g(the)h(appropriate)f
(co)q(de)h(for)f(eac)o(h)h(primitiv)o(e)d(op-)951 1214
y(eration,)16 b(suc)o(h)h(as)f Fl(readVar)o Fp(,)g Fl(ccall)o
Fp(,)g(and)g(so)g(on.)25 b(In)16 b(our)g(im-)951 1263
y(plemen)o(tation)9 b(w)o(e)i(actually)f(pro)o(vide)h(a)g(Hask)o(ell)f
(\\wrapp)q(er")h(for)951 1313 y(eac)o(h)f(primitiv)o(e)d(whic)o(h)i
(mak)o(es)g(explicit)g(the)h(ev)n(aluation)e(of)h(their)951
1363 y(argumen)o(ts,)17 b(using)g(so-called)h(\\un)o(b)q(o)o(xed)f(v)n
(alues".)28 b(Both)18 b(the)951 1413 y(motiv)n(ation)c(for)i(and)h(the)
h(implemen)o(tatio)o(n)c(of)j(our)g(approac)o(h)951 1463
y(to)c(un)o(b)q(o)o(xed)g(v)n(alues)g(is)g(detailed)g(in)g(P)o(eyton)g
(Jones)i(&)e(Launc)o(h-)951 1512 y(bury)h([1991],)d(and)j(w)o(e)g(do)g
(not)g(rehearse)i(it)d(here.)951 1633 y Fe(6.2.1)46 b(Transf)o(orma)m
(tion)951 1709 y Fp(The)16 b(b)q(eaut)o(y)g(of)g(this)g(approac)o(h)f
(is)h(that)g(all)f(the)h(com)o(binators)951 1755 y(can)11
b(then)g(b)q(e)h(in-lined)e(at)h(their)g(call)f(sites,)i(th)o(us)f
(largely)f(remo)o(v-)951 1801 y(ing)j(the)h(\\plum)o(bing")d(costs.)19
b(F)m(or)14 b(example,)e(the)i(expression)990 1876 y
Fk(m1)19 b(`thenST`)d(\\v1)j(->)990 1922 y(m2)g(`thenST`)d(\\v2)j(->)
990 1967 y(returnST)e(e)951 2042 y Fp(b)q(ecomes,)c(after)i(in-lining)c
Fl(thenST)i Fp(and)h Fl(returnST)n Fp(,)990 2118 y Fk(\\s)19
b(->)g(let)f(\(v1,s1\))f(=)i(m1)g(s)1186 2163 y(\(v2,s2\))e(=)i(m2)g
(s1)1108 2209 y(in)g(\(e,s3\))951 2284 y Fp(F)m(urthermore,)h(the)g
(resulting)f(co)q(de)h(is)g(no)o(w)f(exp)q(osed)h(to)f(the)951
2330 y(full)d(range)i(of)f(analyses)h(and)g(program)e(transformations)g
(im-)951 2375 y(plemen)o(ted)e(b)o(y)g(the)g(compiler.)k(F)m(or)c
(example,)e(if)i(the)g(compiler)951 2421 y(can)k(sp)q(ot)g(that)f(the)h
(ab)q(o)o(v)o(e)g(co)q(de)g(will)e(b)q(e)i(used)h(in)e(a)g(con)o(text)
951 2467 y(whic)o(h)d(is)g(strict)h(in)e(either)i(comp)q(onen)o(t)e(of)
h(the)h(result)f(tuple,)g(it)951 2512 y(will)e(b)q(e)j(transformed)e
(to)990 2588 y Fk(\\s)19 b(->)g(case)f(m1)h(s)g(of)1147
2633 y(\(v1,s2\))e(->)i(case)f(m2)h(s1)f(of)1402 2679
y(\(v2,s2\))f(->)i(\(e,s2\))951 2758 y Fp(In)13 b(the)i
Fl(let)e Fp(v)o(ersion,)g(heap-allo)q(cated)g(th)o(unks)h(are)g
(created)h(for)p 951 2797 412 2 v 997 2823 a Fi(4)1014
2835 y Fh(Indeed,)10 b(w)o(e)i(ha)o(v)o(e)e(to)h(admit)f(that)h(the)f
(implemen)o(tat)o(ion)e(came)i(\014rst!)909 2960 y Fp(12)p
eop
%%Page: 13 13
13 12 bop -120 195 a Fl(m1)21 b(s)12 b Fp(and)g Fl(m2)21
b(s1)p Fp(;)12 b(the)h Fl(case)e Fp(v)o(ersion)h(a)o(v)o(oids)f(this)h
(cost.)18 b(These)-120 245 y(sorts)g(of)f(optimisations)e(could)j(not)f
(b)q(e)i(p)q(erformed)e(if)f(the)j Fl(ST)-120 295 y Fp(t)o(yp)q(e)14
b(and)g(its)g(com)o(binators)e(w)o(ere)j(opaque)f(to)g(the)g(compiler.)
-120 500 y Fe(6.2.2)46 b(P)l(assing)16 b(the)g(st)m(a)m(te)g(ar)o(ound)
-120 594 y Fp(The)g(implemen)o(tation)d(of)i(the)i Fl(ST)e
Fp(t)o(yp)q(e,)i(giv)o(en)e(ab)q(o)o(v)o(e,)h(passes)-120
644 y(around)f(an)g(explicit)f(state.)23 b(Y)m(et,)15
b(w)o(e)g(said)g(earlier)g(that)h(state-)-120 694 y(manipulating)11
b(op)q(erations)k(are)g(implem)o(en)o(ted)e(b)o(y)h(p)q(erforming)-120
744 y(side)20 b(e\013ects)h(on)e(the)g(common,)f(global)f(heap.)34
b(What,)20 b(then,)-120 794 y(is)e(the)g(role)g(of)f(the)h(explicit)f
(state)i(v)n(alues)e(whic)o(h)h(are)g(passed)-120 844
y(around)c(b)o(y)f(the)i(ab)q(o)o(v)o(e)f(co)q(de?)k(It)c(pla)o(ys)g(t)
o(w)o(o)f(imp)q(ortan)o(t)f(roles.)-120 923 y(Firstly)m(,)f(the)i
(compiler)e(\\shak)o(es)h(the)h(co)q(de)g(around")f(quite)g(con-)-120
973 y(siderably:)27 b(is)18 b(it)g(p)q(ossible)h(that)g(it)f(migh)o(t)e
(someho)o(w)h(end)i(up)-120 1023 y(c)o(hanging)13 b(the)i(order)g(in)e
(whic)o(h)h(the)h(primitiv)o(e)d(op)q(erations)i(are)-120
1072 y(p)q(erformed?)19 b(No,)14 b(it)g(is)g(not.)20
b(The)14 b(input)h(state)g(of)f(eac)o(h)g(primi-)-120
1122 y(tiv)o(e)e(op)q(eration)h(is)f(pro)q(duced)i(b)o(y)e(the)h
(preceding)h(op)q(eration,)e(so)-120 1172 y(the)j(ordering)f(b)q(et)o
(w)o(een)i(them)d(is)h(main)o(tained)e(b)o(y)i(simple)f(data)-120
1222 y(dep)q(endencies)f(of)e(the)g(explicit)g(state,)h(whic)o(h)e(are)
i(certainly)f(pre-)-120 1272 y(serv)o(ed)15 b(b)o(y)f(ev)o(ery)g
(correct)i(program)c(transformation.)-120 1347 y(Secondly)m(,)20
b(the)f(explicit)g(state)g(allo)o(ws)f(us)h(to)g(express)i(to)e(the)
-120 1392 y(compiler)13 b(the)h(strictness)j(of)c(the)i(primitiv)o(e)d
(op)q(erations)i(in)g(the)-120 1438 y(state.)19 b(The)14
b Fl(State)f Fp(t)o(yp)q(e)h(is)g(de\014ned)h(lik)o(e)e(this:)-81
1513 y Fk(data)18 b(State)g(s)h(=)g(MkState)e(\(State#)g(s\))-120
1588 y Fp(That)d(is,)f(a)h(state)g(is)g(represen)o(ted)j(b)o(y)c(a)h
(single-constructor)h(al-)-120 1634 y(gebraic)f(data)f(t)o(yp)q(e,)h
(whose)h(only)e(con)o(ten)o(ts)h(is)g(a)f(v)n(alue)h(of)f(t)o(yp)q(e)
-120 1680 y Fl(State#)21 b(s)o Fp(,)f(the)g(\(\014nally!\))33
b(primitiv)o(e)17 b(t)o(yp)q(e)j(of)f(states.)35 b(The)-120
1725 y(lifting)17 b(implied)g(b)o(y)i(the)h Fl(MkState)d
Fp(constructor)k(corresp)q(onds)-120 1771 y(exactly)d(to)f(the)i
(lifting)d(in)h(the)h(seman)o(tics.)29 b(Using)18 b(this)g(de\014-)-120
1817 y(nition)d(of)g Fl(State)f Fp(w)o(e)i(can)g(no)o(w)f(de\014ne)h
Fl(newVar)o Fp(,)g(for)f(example,)-120 1862 y(lik)o(e)e(this:)-81
1938 y Fk(newVar)18 b(init)g(\(MkState)e(s#\))-42 1983
y(=)k(case)e(newVar#)f(init)h(s#)h(of)57 2029 y(\(v,t#\))e(->)i(\(v,)f
(MkState)f(t#\))-120 2108 y Fp(This)h(de\014nition)f(mak)o(es)g
(absolutely)h(explicit)f(the)i(ev)n(aluation)-120 2158
y(of)c(the)i(strictness)h(of)d Fl(newVar)g Fp(in)g(its)h(state)h
(argumen)o(t,)d(\014nally)-120 2208 y(calling)h(the)i(truly)g(primitiv)
o(e)d Fl(newVar#)h Fp(to)i(p)q(erform)f(the)h(allo-)-120
2258 y(cation.)-120 2337 y(W)m(e)e(think)g(of)g(a)g(primitiv)o(e)f
(state)i(|)f(that)g(is,)h(a)f(v)n(alue)g(of)g(t)o(yp)q(e)-120
2387 y Fl(State#)21 b(s)o Fp(,)14 b(for)g(some)f(t)o(yp)q(e)i
Fl(s)f Fp(|)f(as)i(a)f(\\tok)o(en")f(whic)o(h)h(stands)-120
2437 y(for)20 b(the)i(state)g(of)e(the)h(heap)g(and)g(\(in)f(the)i
(case)g(of)e(the)h(I/O)-120 2487 y(thread\))g(the)f(real)g(w)o(orld.)35
b(The)20 b(implemen)o(tation)c(nev)o(er)21 b(ac-)-120
2536 y(tually)e(insp)q(ects)k(a)d(primitiv)o(e)e(state)k(v)n(alue,)f
(but)g(it)f(is)g(faith-)-120 2586 y(fully)13 b(passed)i(to,)f(and)h
(returned)h(from)c(ev)o(ery)j(primitiv)o(e)e(state-)-120
2636 y(transformer)h(op)q(eration.)k(By)d(the)g(time)d(the)j(program)e
(reac)o(hes)-120 2686 y(the)i(co)q(de)g(generator,)g(the)h(role)e(of)g
(these)i(state)f(v)n(alues)f(is)h(o)o(v)o(er,)-120 2736
y(and)h(the)h(co)q(de)h(generator)f(arranges)g(to)f(generate)i(no)e(co)
q(de)h(at)-120 2785 y(all)e(to)i(mo)o(v)o(e)e(around)h(v)n(alues)g(of)g
(t)o(yp)q(e)h Fl(State#)e Fp(\(assuming)g(an)-120 2835
y(underlying)f Fe(ram)g Fp(arc)o(hitecture)i(of)d(course\).)951
195 y Fe(6.2.3)46 b(Arra)m(ys)951 276 y Fp(The)21 b(implemen)o(tati)o
(on)d(of)i(arra)o(ys)h(is)f(straigh)o(tforw)o(ard.)38
b(The)951 326 y(only)15 b(complication)f(lies)i(with)g
Fl(freezeArray)m Fp(,)h(whic)o(h)f(tak)o(es)g(a)951 376
y(m)o(utable)11 b(arra)o(y)h(and)h(returns)h(a)f(frozen,)g(imm)n
(utable)d(cop)o(y)m(.)17 b(Of-)951 426 y(ten,)12 b(though,)f(w)o(e)g(w)
o(an)o(t)g(to)g(construct)i(an)d(arra)o(y)h(incremen)o(tally)m(,)951
475 y(and)g(then)i(freeze)g(it,)e(p)q(erforming)f(no)i(further)g(m)o
(utation)e(on)h(the)951 525 y(m)o(utable)17 b(arra)o(y)m(.)31
b(In)19 b(this)g(case)g(it)f(seems)h(rather)h(a)e(w)o(aste)h(to)951
575 y(cop)o(y)12 b(the)g(en)o(tire)h(arra)o(y)m(,)e(only)g(to)h
(discard)h(the)f(m)o(utable)f(v)o(ersion)951 625 y(imm)o(ediately)g
(thereafter.)951 704 y(The)21 b(righ)o(t)g(solution)g(is)g(to)g(do)g(a)
g(go)q(o)q(d)g(enough)g(job)g(in)f(the)951 754 y(compiler)14
b(to)h(sp)q(ot)i(this)e(sp)q(ecial)h(case.)24 b(What)16
b(w)o(e)f(actually)g(do)951 804 y(at)i(the)i(momen)o(t)c(is)j(to)g(pro)
o(vide)f(a)h(highly)e(dangerous)j(op)q(era-)951 854 y(tion)c
Fl(dangerousFreezeA)o(rray)m Fp(,)g(whose)h(t)o(yp)q(e)g(is)g(the)g
(same)f(as)951 904 y Fl(freezeArray)m Fp(,)f(but)h(whic)o(h)f(w)o(orks)
g(without)g(cop)o(ying)g(the)h(m)o(u-)951 953 y(table)k(arra)o(y)m(.)35
b(F)m(rankly)18 b(this)i(is)f(a)g(hac)o(k,)i(but)f(since)g(w)o(e)g
(only)951 1003 y(exp)q(ect)c(to)f(use)h(it)e(in)h(one)g(or)g(t)o(w)o(o)
f(critical)h(pieces)h(of)e(the)i(stan-)951 1053 y(dard)11
b(library)m(,)f(w)o(e)i(couldn't)f(w)o(ork)g(up)h(enough)f(steam)g(to)g
(do)g(the)951 1103 y(job)16 b(prop)q(erly)h(just)g(to)g(handle)f(these)
j(few)d(o)q(ccasions.)28 b(W)m(e)16 b(do)951 1153 y(not)e(pro)o(vide)f
(general)h(access)i(to)e Fl(dangerousFreezeA)o(rray)m
Fp(.)951 1278 y Fe(6.2.4)46 b(More)16 b(efficient)f(I/O)951
1359 y Fp(The)i(I/O)g(state)g(transformer)f(is)h(a)f(little)g(sp)q
(ecial,)h(b)q(ecause)i(of)951 1408 y(the)11 b(follo)o(wing)d(observ)n
(ation:)16 b Fo(the)11 b(\014nal)i(state)e(of)h(the)f(I/O)h(thr)n(e)n
(ad)951 1458 y(wil)r(l)19 b(c)n(ertainly)g(b)n(e)i(demande)n(d)p
Fp(.)36 b(Wh)o(y?)f(Because)22 b(the)e(whole)951 1508
y(p)q(oin)o(t)11 b(in)h(running)f(the)i(program)d(in)i(the)g(\014rst)h
(place)f(is)g(to)g(cause)951 1558 y(some)h(side)h(e\013ect)i(on)d(the)i
(real)f(w)o(orld!)951 1633 y(W)m(e)k(can)g(exploit)g(this)h(prop)q(ert)
o(y)g(to)f(gain)f(a)i(little)e(extra)i(e\016-)951 1679
y(ciency)m(.)34 b(Since)20 b(the)g(\014nal)e(state)i(of)f(the)h(I/O)f
(thread)h(will)d(b)q(e)951 1724 y(demanded,)d(so)h(will)e(ev)o(ery)j
(in)o(termediate)e(thread.)22 b(So)15 b(w)o(e)g(can)951
1770 y(safely)j(use)i(a)f(strict,)h(and)f(hence)h(more)e(e\016cien)o
(t,)j(v)o(ersion)e(of)951 1816 y Fl(thenST)o Fp(:)990
1891 y Fk(thenIO)e(::)i(IO)g(a)g(->)g(\(a->IO)e(b\))i(->)g(IO)g(b)990
1937 y(thenIO)e(m)j(k)f(s)g(=)g(case)f(m)h(s)h(of)1323
1982 y(\(r,s'\))e(->)h(k)g(r)g(s')951 2062 y Fp(By)26
b(using)f Fl(case)g Fp(instead)h(of)f(the)h Fl(let)f
Fp(whic)o(h)h(app)q(ears)g(in)951 2111 y Fl(thenST)o
Fp(,)21 b(w)o(e)g(a)o(v)o(oid)f(the)h(construction)h(of)e(a)g
(heap-allo)q(cated)951 2161 y(th)o(unk)14 b(for)f Fl(m)22
b(s)p Fp(.)951 2302 y Fq(7)56 b(Other)18 b(useful)g(com)n(binators)951
2393 y Fp(W)m(e)13 b(ha)o(v)o(e)g(found)f(it)h(useful)h(to)f(expand)g
(the)h(range)f(of)g(com)o(bina-)951 2442 y(tors)i(and)f(primitiv)o(es)f
(b)q(ey)o(ond)i(the)g(minima)o(l)d(set)j(presen)o(ted)i(so)951
2492 y(far.)26 b(This)16 b(section)i(presen)o(ts)g(the)f(ones)h(w)o(e)e
(ha)o(v)o(e)h(found)f(most)951 2542 y(useful.)951 2667
y Fm(7.1)47 b(Equalit)o(y)951 2744 y Fp(The)12 b(references)i(w)o(e)e
(ha)o(v)o(e)f(corresp)q(ond)i(v)o(ery)f(closely)f(to)h(\\p)q(oin)o(t-)
951 2790 y(ers)i(to)g(v)n(ariables".)j(One)d(useful)f(additional)f(op)q
(eration)h(on)h(ref-)951 2835 y(erences)g(is)e(to)g(determine)g
(whether)i(t)o(w)o(o)e(references)j(are)d(aliases)909
2960 y(13)p eop
%%Page: 14 14
14 13 bop -120 195 a Fp(for)9 b(the)h(same)e(v)n(ariable)h(\(so)g
Fg(w)q(r)q(ite)p Fp(s)h(to)f(the)h(one)g(will)e(a\013ect)i
Fg(r)q(ead)p Fp(s)-120 241 y(from)i(the)j(other\).)k(It)14
b(turns)h(out)e(to)h(b)q(e)h(quite)f(straigh)o(tforw)o(ard)-120
286 y(to)g(add)f(an)h(additional)e(constan)o(t,)-81 362
y Fk(eqMutVar)17 b(::)i(MutVar)e(s)i(a)g(->)g(MutVar)e(s)j(a)f(->)g
(Bool)-81 407 y(eqMutArr)e(::)i(Ix)f(i)i(=>)76 453 y(MutArr)d(s)j(i)f
(a)g(->)g(MutArr)e(s)i(i)h(a)f(->)g(Bool)-120 532 y Fp(Notice)e(that)g
(the)g(result)h(do)q(es)f Fo(not)g Fp(dep)q(end)h(on)f(the)g(state|it)
-120 582 y(is)f(simply)e(a)h(b)q(o)q(olean.)24 b(Notice)17
b(also)e(that)h(w)o(e)g(only)g(pro)o(vide)f(a)-120 632
y(test)j(on)f(references)j(whic)o(h)d(exist)g(in)f(the)i(same)e(state)i
(thread.)-120 682 y(References)f(from)12 b(di\013eren)o(t)k(state)f
(threads)h(cannot)e(b)q(e)h(aliases)-120 732 y(for)f(one)g(another.)
-120 882 y Fm(7.2)48 b(In)o(terlea)o(v)o(ed)12 b(and)k(parallel)d(op)q
(erations)-120 968 y Fp(The)f(state-transformer)f(comp)q(osition)e(com)
o(binator)h(de\014ned)i(so)-120 1017 y(far,)e Fl(thenST)o
Fp(,)h(is)f(strictly)h(sequen)o(tial:)16 b(the)c(state)f(is)f(passed)i
(from)-120 1067 y(the)17 b(\014rst)g(state)h(transformer)e(on)g(to)g
(the)h(second.)27 b(But)17 b(some-)-120 1117 y(times)g(that)i(is)f(not)
g(what)h(is)f(w)o(an)o(ted.)31 b(Consider,)20 b(for)e(exam-)-120
1167 y(ple,)h(the)h(op)q(eration)e(of)g(reading)h(a)f(\014le.)32
b(W)m(e)18 b(ma)o(y)f(not)i(w)o(an)o(t)-120 1217 y(to)d(sp)q(ecify)i
(the)f(precise)h(relativ)o(e)e(ordering)h(of)f(the)h(individual)-120
1267 y(c)o(haracter-b)o(y-c)o(haracter)g(reads)f(from)d(the)i(\014le)g
(and)g(other)g(I/O)-120 1316 y(op)q(erations.)i(Rather,)11
b(w)o(e)f(ma)o(y)e(w)o(an)o(t)i(the)h(\014le)f(to)g(b)q(e)h(read)f
(lazily)m(,)-120 1366 y(as)k(its)g(con)o(ten)o(ts)h(is)f(demanded.)-120
1441 y(W)m(e)25 b(can)h(pro)o(vide)f(this)h(abilit)o(y)e(with)h(a)g
(new)i(com)o(binator,)-120 1487 y Fl(interleaveST)n Fp(:)-81
1562 y Fk(interleave)o(ST)16 b(::)j(ST)g(s)g(a)g(->)g(ST)g(s)g(a)-120
1642 y Fp(Unlik)o(e)-120 1691 y(ev)o(ery)g(other)f(state)h(transformer)
f(so)g(far,)g Fl(interleaveST)d Fp(ac-)-120 1741 y(tually)e(duplicates)
i(the)g(state!)20 b(The)14 b(\\plum)o(bing)e(diagram")g(for)-120
1791 y Fl(\(interleaveST)19 b(s\))14 b Fp(is)f(lik)o(e)g(this:)-6
2128 y @beginspecial @setspecial
%%BeginDocument: interleave-st.ps
/$F2psDict 32 dict def 
$F2psDict begin
	$F2psDict /mtrx matrix put

	end
	/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
	/$F2psEnd {$F2psEnteredState restore end} def
	%%EndProlog

$F2psBegin
1 setlinecap 1 setlinejoin
-2 0 translate
0.000000 72.000000 translate 0.900 -0.900 scale
1.000 setlinewidth
newpath 24 63 moveto 48 63 lineto stroke
stroke
newpath 40.000 61.000 moveto 48.000 63.000 lineto 40.000 65.000 lineto stroke
newpath 171 80 moveto 171 23 lineto 48 23 lineto 48 80 lineto closepath stroke
newpath 119 55 moveto 119 37 lineto 78 37 lineto 78 55 lineto closepath stroke
newpath 49 63 moveto 171 63 lineto 171 63 lineto stroke
stroke
newpath 59 63 moveto 59 52 lineto 78 52 lineto stroke
stroke
newpath 70.000 50.000 moveto 78.000 52.000 lineto 70.000 54.000 lineto stroke
newpath 119 52 moveto 139 52 lineto stroke
stroke
newpath 139 48 moveto 139 55 lineto stroke
stroke
newpath 120 42 moveto 171 42 lineto stroke
stroke
newpath 171 42 moveto 186 42 lineto 186 19 lineto stroke
stroke
newpath 184.000 27.000 moveto 186.000 19.000 lineto 188.000 27.000 lineto stroke
newpath 171 63 moveto 211 63 lineto stroke
stroke
newpath 203.000 61.000 moveto 211.000 63.000 lineto 203.000 65.000 lineto stroke
/Times-Roman findfont 12.000 scalefont setfont
177 79 moveto 
1 -1 scale
(State out) gsave  0.000 rotate show grestore 1 -1 scale
/Times-Roman findfont 12.000 scalefont setfont
2 76 moveto 
1 -1 scale
(State in) gsave  0.000 rotate show grestore 1 -1 scale
/Times-Roman findfont 12.000 scalefont setfont
173 14 moveto 
1 -1 scale
(Result) gsave  0.000 rotate show grestore 1 -1 scale
/Courier findfont 12.000 scalefont setfont
93 49 moveto 
1 -1 scale
(s) gsave  0.000 rotate show grestore 1 -1 scale
$F2psEnd
%%EndDocument
 @endspecial -120 2207 a(More)20 b(precisely)m(,)g Fl(interleaveST)d
Fp(splits)i(the)g(state)h(in)o(to)f(t)o(w)o(o)-120 2257
y(parts,)d(whic)o(h)f(should)h(b)q(e)g(disjoin)o(t.)22
b(In)16 b(the)g(lazy-\014le-read)f(ex-)-120 2307 y(ample,)c(the)i
(state)h(of)e(the)h(\014le)f(is)h(passed)h(in)o(to)e(one)g(branc)o(h,)h
(and)-120 2357 y(the)g(rest)h(of)f(the)g(state)h(of)e(the)i(w)o(orld)e
(is)h(passed)g(in)o(to)g(the)g(other.)-120 2407 y(Since)k(these)i
(states)f(are)f(disjoin)o(t,)g(an)f(arbitrary)h(in)o(terlea)o(ving)-120
2457 y(of)c(op)q(erations)h(in)g(eac)o(h)g(branc)o(h)h(of)e(the)h(fork)
g(is)g(legitimate.)-120 2532 y(T)m(o)i(mak)o(e)f(all)h(this)h
(concrete,)i(here)e(is)g(an)g(implem)o(en)o(tation)d(of)-120
2577 y(lazy)f(\014le)h(read:)-81 2653 y Fk(readFile)j(::)i(String)e(->)
i(IO)g([Char])-81 2698 y(readFile)e(filename)-42 2744
y(=)j(openFile)c(filename)36 b(`thenST`)17 b(\\f)i(->)-2
2790 y(readCts)e(f)990 195 y(readCts)g(::)i(FileDescr)o(ip)o(tor)d(->)j
(IO)g([Char])990 241 y(readCts)e(f)i(=)g(interleave)o(ST)1029
286 y(\(readCh)e(f)39 b(`thenST`)16 b(\\c)j(->)1049 332
y(if)g(c)g(==)g(eofChar)1049 378 y(then)f(returnST)e([])1049
423 y(else)i(readCts)f(f)39 b(`thenST`)16 b(\\cs)j(->)1147
469 y(returnST)d(\(c:cs\)\))951 548 y Fp(A)j(parallel)g(v)o(ersion)g
(of)g Fl(interleaveST)n Fp(,)h(whic)o(h)f(starts)i(up)e(a)951
598 y(concurren)o(t)c(task)f(to)g(p)q(erform)f(the)h(fork)o(ed)g(I/O)g
(thread,)g(seems)951 648 y(as)d(though)f(it)h(w)o(ould)e(b)q(e)j
(useful)f(in)f(building)f(resp)q(onsiv)o(e)j(graph-)951
698 y(ical)18 b(user)h(in)o(terfaces.)33 b(The)19 b(idea)f(is)h(that)f
Fl(forkIO)g Fp(w)o(ould)f(b)q(e)951 748 y(used)e(to)e(create)j(a)d(new)
i(widget,)e(or)h(windo)o(w,)e(whic)o(h)i(w)o(ould)f(b)q(e)951
797 y(capable)d(of)g(indep)q(enden)o(t)i(I/O)e(through)h(its)f(part)h
(of)e(the)i(screen.)951 877 y(The)k(only)g(unsatisfactory)g(feature)h
(of)f(all)f(this)h(is)g(that)g(w)o(e)h(see)951 927 y(absolutely)e(no)g
(w)o(a)o(y)g(to)g(guaran)o(tee)h(that)g(the)g(side)g(e\013ects)h(p)q
(er-)951 976 y(formed)f(in)h(the)h(t)o(w)o(o)e(branc)o(hes)j(of)e(the)h
(fork)e(are)i(indeed)g(inde-)951 1026 y(p)q(enden)o(t.)i(That)12
b(has)h(to)f(b)q(e)i(left)e(as)h(a)f(pro)q(of)h(obligation)d(for)i(the)
951 1076 y(programmer;)g(the)j(only)e(consolation)h(is)g(that)h(at)f
(least)h(the)g(lo-)951 1126 y(cation)e(of)g(these)i(pro)q(of)f
(obligations)e(is)h(explicit.)18 b(W)m(e)13 b(fear)h(that)951
1176 y(there)k(ma)o(y)d(b)q(e)j(no)f(absolutely)g(secure)i(system)e
(whic)o(h)g(is)g(also)951 1226 y(expressiv)o(e)k(enough)e(to)h(describ)
q(e)h(the)f(programs)f(whic)o(h)g(real)951 1275 y(programmers)12
b(w)o(an)o(t)h(to)h(write.)951 1437 y Fq(8)56 b(Related)17
b(w)n(ork)951 1531 y Fp(Sev)o(eral)10 b(other)g(languages)f(from)f(the)
i(functional)e(stable)i(pro)o(vide)951 1581 y(some)j(kind)g(of)g
(state.)951 1660 y(F)m(or)27 b(example,)i(Standard)e(ML)g(pro)o(vides)h
Fo(r)n(efer)n(enc)n(e)e(typ)n(es)p Fp(,)951 1710 y(whic)o(h)17
b(ma)o(y)f(b)q(e)i(up)q(dated)h(\(P)o(aulson)e([1991]\).)28
b(The)18 b(resulting)951 1760 y(system)e(has)h(serious)g(shortcomings,)
f(though.)27 b(The)17 b(meaning)951 1809 y(of)d(programs)f(whic)o(h)h
(use)h(references)i(dep)q(ends)f(on)e(a)h(complete)951
1859 y(sp)q(eci\014cation)k(of)f(the)h(order)g(of)e(ev)n(aluation)g(of)
h(the)h(program.)951 1909 y(Since)h(SML)g(is)g(strict)h(this)f(is)g(an)
g(acceptable)h(price)f(to)g(pa)o(y)m(,)951 1959 y(but)13
b(it)f(w)o(ould)h(b)q(ecome)f(un)o(w)o(ork)n(able)g(in)h(a)f
(non-strict)i(language)951 2009 y(where)g(the)h(exact)f(order)g(of)f
(ev)n(aluation)f(is)h(hard)h(to)f(\014gure)i(out.)951
2058 y(What)g(is)g(w)o(orse,)h(ho)o(w)o(ev)o(er,)g(is)f(that)h(referen)
o(tial)f(transparency)951 2108 y(is)g(lost.)23 b(Because)18
b(an)d(arbitrary)h(function)f(ma)o(y)f(rely)i(on)f(state)951
2158 y(accesses,)22 b(its)e(result)g(need)g(not)f(dep)q(end)h(purely)g
(on)e(the)i(v)n(al-)951 2208 y(ues)g(of)f(its)g(argumen)o(ts.)34
b(This)20 b(has)f(additional)f(implications)951 2258
y(for)e(p)q(olymorphism,)e(leading)j(to)g(a)f(w)o(eak)o(ened)i(form)e
(in)g(order)951 2308 y(to)f(main)o(tain)d(t)o(yp)q(e)k(safet)o(y)g(\(T)
m(ofte)f([1990]\).)20 b(W)m(e)15 b(ha)o(v)o(e)g(none)h(of)951
2357 y(these)f(problems)e(here.)951 2437 y(The)19 b(data\015o)o(w)e
(language)h(Id)g(pro)o(vides)h(I-structures)i(and)d(M-)951
2487 y(structures)g(as)d(m)o(utable)f(datat)o(yp)q(es)i(\(Nikhil)e
([1988]\).)21 b(Within)951 2536 y(a)13 b(stateful)g(program)f(referen)o
(tial)h(transparency)i(is)e(lost.)k(F)m(or)c(I-)951 2586
y(structures,)k(the)e(result)h(is)e(indep)q(enden)o(t)i(of)e(ev)n
(aluation)g(order,)951 2636 y(pro)o(vided)c(that)g(all)f
(sub-expressions)k(are)d(ev)o(en)o(tually)g(ev)n(aluated)951
2686 y(\(in)f(case)i(they)g(side-e\013ect)h(an)e(I-structure\).)18
b(F)m(or)10 b(M-structures,)951 2736 y(the)15 b(result)h(of)f(a)f
(program)g(can)h(dep)q(end)h(on)f(ev)n(aluation)f(order.)951
2785 y(Compared)19 b(with)h(I-structures)j(and)d(M-structures,)k(our)c
(ap-)951 2835 y(proac)o(h)g(p)q(ermits)g(lazy)f(ev)n(aluation)g
(\(where)i(v)n(alues)f(are)h(ev)n(al-)909 2960 y(14)p
eop
%%Page: 15 15
15 14 bop -120 195 a Fp(uated)19 b(on)g(demand,)g(and)f(ma)o(y)f(nev)o
(er)j(b)q(e)g(ev)n(aluated)f(if)f(they)-120 245 y(are)f(not)g
(required\),)g(and)g(supp)q(orts)h(a)e(m)o(uc)o(h)f(stronger)j(notion)
-120 295 y(of)d(encapsulation.)24 b(The)16 b(big)f(adv)n(an)o(tage)g
(of)g(I-structures)j(and)-120 345 y(M-structures)13 b(is)d(that)h(they)
g(are)g(b)q(etter)h(suited)f(to)g(parallel)e(pro-)-120
394 y(grammi)o(ng)i(than)j(is)g(our)g(metho)q(d.)-120
474 y(The)i(Clean)e(language)h(tak)o(es)g(a)g(di\013eren)o(t)h(approac)
o(h)f(\(Barend-)-120 524 y(sen)f(&)g(Smetsers)f([1993]\).)j(The)e
(Clean)f(t)o(yp)q(e)h(system)f(supp)q(orts)-120 573 y(a)18
b(form)f(of)h(linear)h(t)o(yp)q(es,)h(called)e(\\unique)h(t)o(yp)q
(es".)33 b(A)19 b(v)n(alue)-120 623 y(whose)c(t)o(yp)q(e)g(is)f(unique)
g(can)g(safely)g(b)q(e)h(up)q(dated)g(in)f(place,)g(b)q(e-)-120
673 y(cause)20 b(the)f(t)o(yp)q(e)g(system)g(ensures)h(that)f(the)g(up)
q(dating)g(op)q(er-)-120 723 y(ation)e(has)h(the)h(sole)f(reference)i
(to)e(the)h(v)n(alue.)29 b(The)18 b(con)o(trast)-120
773 y(with)12 b(our)g(w)o(ork)f(is)h(in)o(teresting.)18
b(W)m(e)12 b(separate)h(references)i(from)-120 822 y(the)g(state)g(to)g
(whic)o(h)f(they)h(refer,)g(and)f(do)h(not)f(p)q(ermit)g(explicit)-120
872 y(manipulation)f(of)i(the)h(state.)24 b(Clean)16
b(iden)o(ti\014es)g(the)g(t)o(w)o(o,)f(and)-120 922 y(in)i(consequence)
i(requires)g(state)f(to)f(b)q(e)g(manipulated)e(explic-)-120
972 y(itly)m(.)h(W)m(e)e(allo)o(w)d(references)17 b(to)c(b)q(e)h
(duplicated,)f(stored)i(in)e(data)-120 1022 y(structures)f(and)d(so)h
(on,)g(while)f(Clean)g(do)q(es)h(not.)17 b(Clean)9 b(requires)-120
1071 y(a)17 b(new)h(t)o(yp)q(e)f(system)g(to)g(b)q(e)h(explained)f(to)g
(the)h(programmer,)-120 1121 y(while)9 b(our)h(system)f(do)q(es)h(not.)
17 b(On)10 b(the)g(other)g(hand,)g(the)g(separa-)-120
1171 y(tion)k(b)q(et)o(w)o(een)i(references)h(and)d(state)h(is)g
(sometimes)d(tiresome.)-120 1221 y(F)m(or)i(example,)f(while)h(b)q(oth)
h(systems)g(can)g(express)h(the)f(idea)g(of)-120 1271
y(a)g(m)o(utable)f(list,)h(Clean)h(do)q(es)g(so)g(more)e(neatly)i(b)q
(ecause)h(there)-120 1321 y(is)f(less)h(explicit)f(de-referencing.)28
b(The)16 b(tradeo\013)h(b)q(et)o(w)o(een)h(im-)-120 1370
y(plicit)c(and)g(explicit)h(state)g(in)f(purely-functional)g(languages)
g(is)-120 1420 y(far)g(from)e(clear.)-120 1499 y(There)22
b(are)g(signi\014can)o(t)f(similarities)e(with)i(Gi\013ord)f(and)h(Lu-)
-120 1549 y(cassen's)j Fo(e\013e)n(ct)f(system)f Fp(whic)o(h)g(uses)h
(t)o(yp)q(es)g(to)f(record)i(side)-120 1599 y(e\013ects)j(p)q(erformed)
e(b)o(y)g(a)g(program)f(\(Gi\013ord)g(&)i(Lucassen)-120
1649 y([1986]\).)k(Ho)o(w)o(ev)o(er,)19 b(the)g(e\013ects)i(system)d
(is)g(designed)i(to)e(de-)-120 1699 y(limit)10 b(the)j(e\013ect)h(of)e
(side)h(e\013ects)h(whic)o(h)f(ma)o(y)d(o)q(ccur)k(as)e(a)g(result)-120
1749 y(of)f(ev)n(aluation.)k(Th)o(us)d(the)g(seman)o(tic)e(setting)i
(is)f(still)f(one)h(whic)o(h)-120 1798 y(relies)j(on)g(a)g(predictable)
g(order)h(of)e(ev)n(aluation.)-120 1878 y(Our)j(w)o(ork)g(also)f(has)h
(strong)g(similarities)d(with)j(Odersky)m(,)g(Ra-)-120
1928 y(bin)d(and)h(Hudak's)f Fg(\025)217 1934 y Fd(v)q(ar)285
1928 y Fp(\(Odersky)m(,)h(Rabin)f(&)h(Hudak)f([1993]\),)-120
1977 y(whic)o(h)20 b(itself)h(w)o(as)f(in\015uenced)i(b)o(y)e(the)h
(Imp)q(erativ)o(e)f(Lam)o(b)q(da)-120 2027 y(Calculus)15
b(\(ILC\))g(of)f(Sw)o(arup,)g(Reddy)h(&)g(Ireland)g([1991].)k(ILC)-120
2077 y(imp)q(osed)9 b(a)h(rigid)f(strati\014cation)h(of)g(applicativ)o
(e,)f(state)i(reading,)-120 2127 y(and)g(imp)q(erativ)o(e)g(op)q
(erations.)17 b(The)12 b(t)o(yp)q(e)g(of)f Fl(runST)g
Fp(mak)o(es)f(this)-120 2177 y(strati\014cation)h(unnecessary:)19
b(state)12 b(op)q(erations)f(can)g(b)q(e)h(encap-)-120
2226 y(sulated)i(and)f(app)q(ear)h(purely)g(functional.)j(This)c(w)o
(as)g(also)g(true)-120 2276 y(of)i Fg(\025)-47 2282 y
Fd(v)q(ar)23 2276 y Fp(but)g(there)i(it)e(w)o(as)g(ac)o(hiev)o(ed)h
(only)f(through)g(run-time)-120 2326 y(c)o(hec)o(king)20
b(whic)o(h,)g(as)g(a)f(direct)h(consequence,)j(precludes)f(the)-120
2376 y(st)o(yle)14 b(of)f(lazy)h(state)h(giv)o(en)e(here.)-120
2455 y(In)e(t)o(w)o(o)f(earlier)h(pap)q(ers,)h(w)o(e)f(describ)q(e)i
(an)e(approac)o(h)g(to)f(these)j(is-)-120 2505 y(sues)e(based)f(on)f
Fo(monads)p Fp(,)h(in)f(the)h(con)o(text)g(of)f(non-strict,)h(purely-)
-120 2555 y(functional)15 b(languages.)22 b(The)16 b(\014rst,)h(P)o
(eyton)f(Jones)g(&)g(W)m(adler)-120 2605 y([1993],)h(fo)q(cusses)j
(mainly)c(on)i(input/output,)g(while)g(the)h(sec-)-120
2654 y(ond,)13 b(Launc)o(h)o(bury)h([1993],)e(deals)i(with)f(stateful)h
(computation)-120 2704 y(within)h(a)h(program.)24 b(The)16
b(approac)o(h)g(tak)o(en)h(b)o(y)f(these)h(pap)q(ers)-120
2754 y(has)d(t)o(w)o(o)f(ma)r(jor)g(shortcomings:)992
195 y Fn(\017)21 b Fp(State)f(and)f(input/output)h(existed)g(in)g
(separate)g(frame-)1034 245 y(w)o(orks.)g(The)15 b(same)f(general)h
(approac)o(h)f(can)h(handle)g(b)q(oth)1034 295 y(but,)10
b(for)g(example,)f(di\013eren)o(t)i(com)o(binators)d(w)o(ere)j
(required)1034 345 y(to)24 b(comp)q(ose)h(stateful)g(computations)e
(from)g(those)i(re-)1034 394 y(quired)14 b(for)f(I/O-p)q(erforming)g
(computation.)992 477 y Fn(\017)21 b Fp(State)c(could)f(only)g(safely)g
(b)q(e)h(handled)g(if)e(it)h(w)o(as)h Fo(anony-)1034
527 y(mous)p Fp(.)35 b(Consequen)o(tly)m(,)21 b(it)e(w)o(as)g
(di\016cult)g(to)g(write)h(pro-)1034 577 y(grams)9 b(whic)o(h)h
(manipulate)f(more)g(than)h(one)h(piece)g(of)f(state)1034
627 y(at)17 b(once.)29 b(Hence,)19 b(programs)d(b)q(ecame)h(rather)h
(\\brittle":)1034 677 y(an)9 b(apparen)o(tly)h(inno)q(cuous)g(c)o
(hange)g(\(adding)f(an)h(extra)g(up-)1034 726 y(datable)j(arra)o(y\))h
(b)q(ecame)g(di\016cult)f(or)h(imp)q(ossible.)992 809
y Fn(\017)21 b Fp(Separate)d(state)h(threads)g(required)f(exp)q(ensiv)o
(e)h(run-time)1034 859 y(c)o(hec)o(ks)d(to)e(k)o(eep)i(them)d(apart.)21
b(Without)14 b(this,)g(there)i(w)o(as)1034 909 y(the)h(p)q(ossibilit)o
(y)f(that)g(a)h(reference)i(migh)o(t)c(b)q(e)i(created)h(in)1034
959 y(one)d(stateful)g(thread,)g(and)f(used)i(async)o(hronously)f(in)f
(an-)1034 1009 y(other,)f(whic)o(h)g(w)o(ould)f(destro)o(y)i(the)f(Ch)o
(urc)o(h-Rosser)h(prop-)1034 1059 y(ert)o(y)m(.)951 1191
y Fq(Ac)n(kno)n(wledgemen)n(ts)951 1279 y Fp(The)d(idea)g(of)g(adding)f
(an)h(extra)g(t)o(yp)q(e)h(v)n(ariable)e(to)h(state)h(threads)951
1329 y(arose)h(in)g(discussion)g(with)g(John)g(Hughes,)g(and)g(w)o(as)g
(presen)o(ted)951 1379 y(brie\015y)d(at)g(the)h(1993)e(Cop)q(enhagen)i
(w)o(orkshop)f(on)g(State)h(in)f(Pro-)951 1429 y(grammi)o(ng)i
(Languages,)i(though)h(at)g(that)g(time)e(w)o(e)j(suggested)951
1478 y(using)9 b(an)g(existen)o(tial)h(quan)o(ti\014cation)e(in)h(the)h
(t)o(yp)q(e)h(of)d Fl(runST)o Fp(.)17 b(In)951 1528 y(addition,)e(all)g
(these)i(ideas)g(ha)o(v)o(e)f(b)q(ene\014ted)i(from)c(discussions)951
1578 y(amongst)9 b(the)i(F)m(unctional)f(Programming)d(Group)j(at)h
(Glasgo)o(w.)951 1710 y Fq(References)951 1799 y Fp(E)i(Barendsen)h(&)f
(JEW)g(Smetsers)8 b([Dec)13 b(1993],)e(\\Con)o(v)o(en)o(tional)1100
1848 y(and)g(uniqueness)h(t)o(yping)e(in)g(graph)h(rewrite)h(systems,")
1100 1898 y(in)17 b Fa(Pro)q(c)i(13th)e(Conference)i(on)f(the)g(F)m
(oundations)f(of)1100 1948 y(Soft)o(w)o(are)f(T)m(ec)o(hnology)g(and)g
(Theoretical)h(Computer)1100 1998 y(Science)r Fp(,)e(Springer)g(V)m
(erlag)e(LNCS.)951 2090 y(DK)d(Gi\013ord)f(&)i(JM)f(Lucassen)f([Aug)g
(1986],)f(\\In)o(tegrating)i(func-)1100 2139 y(tional)21
b(and)h(imp)q(erativ)o(e)e(programming)o(,")f(in)i Fa(A)o(CM)1100
2189 y(Conference)28 b(on)d(Lisp)h(and)g(F)m(unctional)f(Program-)1100
2239 y(ming,)12 b(MIT)s Fp(,)h(A)o(CM,)g(28{38.)951 2331
y(J)23 b(Launc)o(h)o(bury)7 b([June)24 b(1993],)c(\\Lazy)j(imp)q
(erativ)o(e)f(program-)1100 2381 y(ming,")10 b(in)i Fa(Pro)q(c)h(A)o
(CM)f(Sigplan)g(W)m(orkshop)f(on)h(State)1100 2431 y(in)j(Programming)d
(Languages,)i(Cop)q(enhagen)i(\(a)o(v)n(ail-)1100 2480
y(able)e(as)h(Y)m(ALEU/DCS/RR-968,)c(Y)m(ale)j(Univ)o(ersit)o(y\))q
Fp(,)1100 2530 y(pp46{56.)951 2622 y(NJ)22 b(McCrac)o(k)o(en)8
b([June)22 b(1984],)e(\\The)i(t)o(yp)q(ec)o(hec)o(king)h(of)e(pro-)1100
2672 y(grams)c(with)h(implicit)d(t)o(yp)q(e)j(structure,")i(in)d
Fa(Seman-)1100 2722 y(tics)k(of)f(data)g(t)o(yp)q(es)r
Fp(,)g(Springer)h(V)m(erlag)f(LNCS)g(173,)1100 2771 y(301{315.)909
2960 y(15)p eop
%%Page: 16 16
16 15 bop -120 195 a Fp(JC)12 b(Mitc)o(hell)f(&)g(AR)g(Mey)o(er)d
([1985],)h(\\Second-order)k(logical)d(re-)29 245 y(lations,")18
b(in)g Fa(Logics)g(of)h(Programs)r Fp(,)e(R)h(P)o(arikh,)g(ed.,)29
295 y(Springer)d(V)m(erlag)e(LNCS)h(193.)-120 387 y(Rishiyur)24
b(Nikhil)5 b([Marc)o(h)25 b(1988],)d(\\Id)j(Reference)h(Man)o(ual,")29
436 y(Lab)14 b(for)g(Computer)f(Sci,)g(MIT.)-120 528
y(M)20 b(Odersky)m(,)h(D)f(Rabin)g(&)g(P)h(Hudak)7 b([Jan)20
b(1993],)e(\\Call)h(b)o(y)29 578 y(name,)14 b(assignmen)o(t,)g(and)h
(the)h(lam)o(b)q(da)d(calculus,")i(in)29 628 y Fa(20th)c(A)o(CM)f(Symp)
q(osium)e(on)j(Principles)g(of)f(Program-)29 678 y(ming)i(Languages,)i
(Charleston)p Fp(,)f(A)o(CM,)h(43{56.)-120 769 y(LC)26
b(P)o(aulson)7 b([1991],)24 b Fa(ML)i(for)g(the)h(w)o(orking)f
(programmer)p Fp(,)29 819 y(Cam)o(bridge)13 b(Univ)o(ersit)o(y)g
(Press.)-120 911 y(SL)h(P)o(eyton)g(Jones)h(&)f(J)g(Launc)o(h)o(bury)7
b([Sept)14 b(1991],)e(\\Un)o(b)q(o)o(xed)29 961 y(v)n(alues)j(as)h
(\014rst)f(class)h(citizens,")f(in)g Fa(F)m(unctional)f(Pro-)29
1011 y(gramming)20 b(Languages)j(and)g(Computer)f(Arc)o(hitec-)29
1060 y(ture,)d(Boston)p Fp(,)g(Hughes,)g(ed.,)f(LNCS)h(523,)e(Springer)
29 1110 y(V)m(erlag,)c(636{666.)-120 1202 y(SL)19 b(P)o(eyton)g(Jones)g
(&)g(PL)g(W)m(adler)6 b([Jan)19 b(1993],)d(\\Imp)q(erativ)o(e)29
1252 y(functional)e(programming)o(,")d(in)j Fa(20th)g(A)o(CM)h(Symp)q
(o-)29 1302 y(sium)i(on)h(Principles)g(of)f(Programming)e(Languages,)29
1351 y(Charleston)p Fp(,)f(A)o(CM,)g(71{84.)-120 1443
y(CG)28 b(P)o(onder,)h(PC)g(McGeer)g(&)g(A)g(P-C)f(Ng)7
b([June)29 b(1988],)29 1493 y(\\Are)g(applicativ)o(e)e(languages)g
(ine\016cien)o(t?,")g Fa(SIG-)29 1543 y(PLAN)15 b(Notices)9
b Fp(23,)k(135{139.)-120 1635 y(D)o(A)d(Sc)o(hmidt)c([Apr)k(1985],)e
(\\Detecting)j(global)d(v)n(ariables)i(in)g(de-)29 1684
y(notational)j(sp)q(eci\014cations,")h Fa(TOPLAS)c Fp(7,)j(299{310.)
-120 1776 y(V)k(Sw)o(arup,)f(US)h(Reddy)f(&)h(E)g(Ireland)7
b([Sept)17 b(1991],)d(\\Assign-)29 1826 y(men)o(ts)k(for)h(applicativ)o
(e)e(languages,")g(in)h Fa(F)m(unctional)29 1876 y(Programming)f
(Languages)j(and)g(Computer)f(Arc)o(hi-)29 1926 y(tecture,)12
b(Boston)p Fp(,)d(Hughes,)h(ed.,)g(LNCS)f(523,)g(Springer)29
1976 y(V)m(erlag,)k(192{214.)-120 2067 y(M)g(T)m(ofte)6
b([No)o(v)12 b(1990],)e(\\T)o(yp)q(e)j(inference)h(for)e(p)q
(olymorphic)f(ref-)29 2117 y(erences,")16 b Fa(Information)11
b(and)j(Computation)5 b Fp(89.)-120 2249 y Fq(App)r(endix)-120
2338 y Fp(Figure)21 b(6)g(giv)o(es)g(a)g(larger)g(example)f(of)h(arra)o
(y)g(references)j(in)-120 2388 y(use.)19 b(It)13 b(de\014nes)h(an)f(in)
o(terpreter)i(for)d(a)h(simple)e(imp)q(erativ)o(e)h(lan-)-120
2437 y(guage,)18 b(whose)h(input)f(is)g(the)h(program)d(together)j
(with)f(a)g(list)-120 2487 y(of)h(input)g(v)n(alues,)h(and)g(whose)g
(output)f(is)h(the)g(list)f(of)f(v)n(alues)-120 2537
y(written)i(b)o(y)g(the)g(program.)34 b(The)20 b(in)o(terpreter)i
(naturally)d(in-)-120 2587 y(v)o(olv)o(es)f(a)g(v)n(alue)g(represen)o
(ting)i(the)f(state)g(of)e(the)i(store.)33 b(The)-120
2637 y(idea)16 b(is,)f(of)h(course,)h(that)f(the)g(store)h(should)f(b)q
(e)g(implemen)o(ted)-120 2686 y(as)g(an)f(in-place-up)q(dated)h(arra)o
(y)m(,)f(and)g(that)h(is)g(precisely)g(what)-120 2736
y(is)e(ac)o(hiev)o(ed)75 2721 y Fj(5)94 2736 y Fp(.)p
-120 2797 412 2 v -74 2823 a Fi(5)-56 2835 y Fh(This)7
b(program)e(also)i(exhibits)f(an)h(a)o(wkw)o(ard)g(shortcoming)t(of)h
(Hask)o(ell's)951 195 y Fp(This)j(example)f(has)i(long)e(b)q(een)j(a)e
(classic)h(test)g(case)h(for)e(systems)951 245 y(whic)o(h)21
b(infer)f(single-threadedness)j(\(Sc)o(hmidt)d([1985]\).)38
b(The)951 295 y(only)9 b(unsatisfactory)g(feature)i(of)e(the)h
(solution)f(is)g(that)h Fl(eval)f Fp(has)951 345 y(to)16
b(b)q(e)h(written)h(as)e(a)h(fully-\015edged)f(state)h(transformer,)f
(while)951 394 y(one)j(migh)o(t)e(p)q(erhaps)j(lik)o(e)f(to)g(tak)o(e)g
(adv)n(an)o(tage)f(of)h(its)g(\\read-)951 444 y(only")13
b(nature.)p 951 2639 V 951 2677 a Fh(t)o(yp)q(e)d(signatures,)e(whic)o
(h)j(it)g(shares)e(with)i(ev)o(ery)f(other)g(widely-used)f(func-)951
2717 y(tional)j(language)g(w)o(e)i(kno)o(w.)23 b(The)14
b(t)o(yp)q(e)e(signatures)g(for)h Ff(obey)g Fh(and)g
Ff(eval)951 2756 y Fh(are)f(giv)o(en)g(in)g(commen)o(ts)f(only)m(,)h(b)
q(ecause)f(Hask)o(ell)h(understands)e(them)h(as)951 2796
y(implicitly)k(univ)o(ersally)f(quan)o(ti\014ed)h(o)o(v)o(er)h
Ff(s)p Fh(.)33 b(But)17 b(of)h(course)e(they)g(are)951
2835 y(monomorp)o(hic)8 b(in)j Ff(s)p Fh(!)16 b(Alas.)909
2960 y Fp(16)p eop
%%Page: 17 17
17 16 bop -120 648 2100 2 v -120 698 a Fl(data)21 b(Com)g(=)h(Assign)e
(Var)h(Exp)h(|)f(Read)g(Var)g(|)h(Write)f(Exp)g(|)g(While)g(Exp)g
([Com])-120 747 y(type)g(Var)g(=)h(Char)-120 797 y(data)f(Exp)g(=)h
(....)-120 897 y(interpret)e(::)h([Com])g(->)g([Int])g(->)h([Int])-120
947 y(interpret)e(cs)h(input)g(=)h(runST)e(\(newArr)h(\('A','Z'\))f(0)
43 b(`thenST`)20 b(\\store)h(->)490 996 y(newVar)g(input)173
b(`thenST`)20 b(\\inp->)490 1046 y(command)h(cs)g(store)g(inp\))-120
1146 y(command)f(::)i([Com])e(->)i(MutArray)e(s)i(Int)f(->)g(MutVar)g
(s)g([Int])g(->)g(ST)h(s)f([Int])-120 1196 y(command)f(cs)i(store)e
(inp)i(=)f(obey)g(cs)-76 1245 y(where)-33 1295 y(--)h(obey)f(::)g
([Com])g(->)g(ST)g(s)h([Int])-33 1345 y(obey)f([])h(=)f(returnST)f([])
-33 1395 y(obey)h(\(Assign)f(v)i(e:cs\))f(=)g(eval)g(e)327
b(`thenST`)20 b(\\val->)468 1445 y(writeArr)h(store)f(v)i(val)f
(`thenST_`)468 1495 y(obey)g(cs)-33 1544 y(obey)g(\(Read)g(v:cs\))108
b(=)21 b(readVar)g(inp)43 b(`thenST`)20 b(\\\(x:xs\))g(->)468
1594 y(writeArr)h(store)f(v)i(x)65 b(`thenST_`)468 1644
y(writeVar)21 b(inp)g(xs)130 b(`thenST_`)468 1694 y(obey)21
b(cs)-33 1744 y(obey)g(\(Write)g(e:cs\))86 b(=)21 b(eval)g(e)327
b(`thenST`)20 b(\\out->)468 1793 y(obey)h(cs)305 b(`thenST`)20
b(\\outs->)468 1843 y(returnST)h(\(out:outs\))-33 1893
y(obey)g(\(While)g(e)g(bs:cs\))g(=)g(eval)g(e)327 b(`thenST`)20
b(\\val->)468 1943 y(if)i(val==0)e(then)512 1993 y(obey)h(cs)468
2042 y(else)512 2092 y(obey)g(\(bs)g(++)h(While)e(e)i(bs)f(:)h(cs\))f
(inp)-33 2192 y(--)h(eval)f(::)g(Exp)g(->)g(ST)h(s)f(Int)-33
2242 y(eval)g(e)h(=)f(....)482 2333 y Fp(Figure)14 b(6:)k(An)c(in)o
(terpreter)h(with)f(lazy)f(stream)h(output)p -120 2356
V 909 2960 a(17)p eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
